
/*-------------------------------------------------------
 !copyright: www.andyui.com
 developer:andy
 QQ:276253969
 version:1.1.1
 date:Sun Oct 08 2017 01:24:58
 -------------------------------------------------------*/
!function(a){"use strict";var b={};b.UI_ATTR=["an-tabs","an-accordion","an-datagrid","an-combo","an-spinner","an-related","an-datagridPagination","an-checkbox","an-radiobox","an-topnav","an-sidemenu","an-tabsheader","an-scrollbar","an-scrolltabs"],b.UI_LAYOUT=["g-layout","g-max","g-h-max","g-w-max","g-h-auto","g-w-auto"],b.UI_PERFORM=["u-switch"],b.UI_SHIELDING=["shielding"],b.UI_SHIELDING_LAYOUT=["shielding-layout"],b.UI_SHIELDING_PERFORM=["shielding-perform"],b.EVENT_CLICK="andy_click",b.COMBO_CHOOSE_LISET="combo_choose_list",b.SETTIME_01=100,b.SETTIME_02=200,b.LAYOUT_IE6=!0,b.setZindex=function(a,b){$(a).css("z-index",b)},b.getRandom=function(a){return Math.floor(Math.random()*a+1)},b.setRandomId=function(a,b,c){var d=a.attr("id"),e=c||1e4;return void 0==d||null==d||""==d?(d=b+andy.getRandom(e),a.attr("id",d),a=$("#"+d)):a=$("#"+d),a},b.setWindow=function(b){var c=a.top.an_element;c?a.top.an_element=$.extend(a.top.an_element,b):a.top.an_element=b},b.getWindow=function(b){return a.top.an_element},b.toWindow=function(){var b=arguments[0],c=arguments[1],d=a.top.$("#"+b)[0]||$("#"+b)[0];d||(d=a.top.$("iframe").contents().find("#"+b)[0]),d=d.contentWindow;var e=[];if(arguments.length>2)for(var f=2,g=arguments.length;f<g;f++)e.push(arguments[f]);d&&d[c]?d[c].apply(this,e):console.log("don't have this id!")},b.combo=function(){function a(a){return a.find("[combo]").first()}function b(a){var b,c=a.find("[combo]").first();return a.children(":gt(0)").each(function(a,d){$(d).is("[combo='"+c.attr("combo")+"']")&&(b=$(d))}),b}function c(a){var c=b(a);c&&c.css("display","none"),a.removeClass("open")}for(var d={},e="",f=0;f<arguments.length;f++){var g=arguments[0];"object"==typeof g?d=g:"string"==typeof g&&(e=g)}var h=$.extend({combo:"",showEvent:"click",hiddenEvent:"mouseleave",isEnable:!0,setTime:200,showComplete:function(){},hiddenComplete:function(){}},d);if(""!=e){if("getTouchTarget"==e){var i=arguments[1];return a(i)}if("getShowTarget"==e){var i=arguments[1];return b(i)}if("hiddenTarget"==e){var i=arguments[1];return c(i)}}else{var i=h.combo;i.touchTarget=i.find("[combo]").first(),i.showTarget,i.children(":gt(0)").each(function(a,b){$(b).is("[combo='"+i.touchTarget.attr("combo")+"']")&&(i.showTarget=$(b))});var j=i.attr("opstion");if(j){j=j.split(",");for(var f=0;f<j.length;f++){var k=j[f].split(":");"show"==k[0]?h.showEvent=k[1]:"hidden"==k[0]&&(h.hiddenEvent=k[1])}}var l="";i.enable=h.isEnable;var m=i.touchTarget.parent();m.is("[an-combo]")&&(m=i.touchTarget),h.isEnable&&(m.unbind(h.showEvent),m.bind(h.showEvent,function(a){i.data("isEnable")&&0==i.data("isText")&&(i.hasClass("open")?(i.showTarget.css("display","none"),i.removeClass("open")):(0==i.showTarget.is("ul")&&andy.formlayout(),i.showTarget.css("display","block"),i.addClass("open"),h.showComplete()))}),i.on(h.hiddenEvent,function(a){l=setTimeout(function(){i.showTarget.css("display","none"),i.removeClass("open"),h.hiddenComplete(),l=""},h.setTime)}),i.mouseover(function(a){""!=l&&(clearTimeout(l),l="")}))}},b.fullscreen=b.an_fullscreen=function(){var b=function(){var a=new ActiveXObject("WScript.Shell");null!=a&&a.SendKeys("{F11}")},c=function(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()};a.ActiveXObject||"ActiveXObject"in a?b():c(a.top.document.documentElement)},b.exitFullscreen=function(){var b=function(){var a=new ActiveXObject("WScript.Shell");null!=a&&a.SendKeys("{F11}")},c=function(){a.top.document.exitFullscreen?a.top.document.exitFullscreen():a.top.document.mozCancelFullScreen?a.top.document.mozCancelFullScreen():a.top.document.webkitExitFullscreen&&a.top.document.webkitExitFullscreen()};a.ActiveXObject||"ActiveXObject"in a?b():c()},b.destroyIframe=function(a){var c,d;try{if(d=a.contentWindow&&a.contentWindow.$?a.contentWindow.$("iframe"):a.contentWindow.document.getElementsByTagName("iframe"),d.length>0)for(c=0;c<d.length;c++)b.destroyIframe(d[c]);a.src="about:blank",a.contentWindow.document.write(""),a.contentWindow.document.clear()}catch(a){}a.parentNode&&a.parentNode.removeChild(a)},b.arrayFunCall=function(a,b){var c=!0;if(a.length>0){var d=0;for(d;d<a.length;d++)"function"==typeof a[d]&&(c=c&&a[d](b))}return c},b.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[1]||{},h=2),"object"==typeof g||andy.isFunction(g)||(g={}),i===h&&(g=this,--h);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(andy.isPlainObject(d)||(e=andy.isArray(d)))?(e?(e=!1,f=c&&andy.isArray(c)?c:[]):f=c&&andy.isPlainObject(c)?c:{},g[b]=andy.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},b.enter=function(a,b){var a=void 0==a?document:a;$(a).keydown(function(){13==event.keyCode&&b()})},b.unEnter=function(a){$(a).off("keydown")},b.scrollbar=function(){$(".scrollbar").each(function(a,b){var c=$(this).height(),d=$(this).width();$(this).mCustomScrollbar({setWidth:d,setHeight:c,axis:"y",scrollbarPosition:"inside",autoDraggerLength:!0,autoHideScrollbar:!0,autoExpandScrollbar:!0,alwaysShowScrollbar:0,mouseWheel:{enable:!0},keyboard:{enable:!0},theme:"minimal-dark",scrollInertia:800,live:"on"})})},b.img=function(a){if(a&&a.is("img[src='#']")){var b=a.width(),c=a.height();if(""==a.attr("title")||void 0==a.attr("title"))var d="";else var d=a.attr("title")+" ";a.removeAttr("src").attr("data-src","holder.js/"+b+"x"+c+"?font=Lucida Family&text="+d+b+"×"+c)}},b.url=function(b,c){"top"==c?top.location=b:"self"==c?self.location=b:a.top.contentWindow.find(c).attr("src",b)},b.dataurl=function(){$("[data-url]").each(function(){var a=$(this).attr("data-url"),b=$(this).attr("data-callback");$(this).load(a,b)})},b.a=function(){$("[href='#']").each(function(a,b){$(this).attr("href","javascript:void(0)")})},b.checked=function(){$(".an_checkbox").each(function(a,b){var c=$(b),d=c.attr("title"),e="";if("checkbox"==c.attr("type")&&0==c.hasClass("switch")?e='<label class="i-checks"></label>':"radio"==c.attr("type")?e='<label class="i-checks"></label>':"checkbox"==c.attr("type")&&c.hasClass("switch")&&(e='<label class="i-switch m-r-sm"></label>',d='<span class="textmax">'+c.attr("title")+"</span>"),c.parent().is("label"))return!1;c.wrap(e),c.after(" <i></i>"+d);var f=c.parent();c.hasClass("checkbox-inline")&&f.addClass("checkbox-inline")})},b.closesearch=function(a,b,c){var d=$(a).text();"高级搜索"==d&&($(c).layout("panel","north").panel("resize",{height:b}),$(c).layout("resize"),$(a).text("关闭搜索")),"关闭搜索"==d&&($(c).layout("panel","north").panel("resize",{height:1}),$(c).layout("resize"),$(a).text("高级搜索"))},b.miniDialog=function(a){var b=$.extend({},{content:""},a),c=$("body");c.find(".m-alertbox").length>0?null:c.append("<div class = 'm-alertbox t-m'></div>");var d=c.find(".m-alertbox");d.append("<div class = 'minidialog'>"+b.content+"</div>");var e=c.find(".minidialog:last");e.css({background:"#000","background-color":"rgba(0, 0, 0, 0.4)","text-align":"center",padding:"10px","word-wrap":"break-word","margin-top":"10px",color:"#fff"}),setTimeout(function(){e.remove()},3e3)},b.setDebug=function(a){b.debug=a},b.getDebug=function(){return b.debug?null:b.debug="close",b.debug},b.startCheck=function(a){var c=b.getDebug();b.costTime=0,b.costTitle=a||"",b.checkHanld=null,"open"==c?b.checkHanld=setInterval(function(){b.costTime+=1},1):null},b.endCheck=function(){var a=b.getDebug();"open"==a&&(b.checkHanld?clearInterval(b.checkHanld):null,b.miniDialog({content:b.costTitle+b.costTime}),b.costTime=0,b.costTitle="")},a.andy=b}(window),function(a){var b={};b.floatbox=function(a){if(a.is(".top"))if(a.is(":hidden")){a.show();var b=a.outerHeight();a.css("top",0-b-5+"px").animate({top:"0px"},300)}else{var b=a.outerHeight();a.animate({top:0-b-5+"px"},300,function(){a.hide()})}if(a.is(".bottom"))if(a.is(":hidden")){a.show();var b=a.outerHeight();a.css("bottom",0-b-5+"px").animate({bottom:"0px"},300)}else{var b=a.outerHeight();a.animate({bottom:0-b-5+"px"},300,function(){a.hide()})}if(a.is(".left"))if(a.is(":hidden")){a.show();a.outerWidth();a.css("left",0-b-5+"px").animate({left:"0px"},300)}else{var b=a.outerWidth();a.animate({left:0-b-5+"px"},300,function(){a.hide()})}if(a.is(".right"))if(a.is(":hidden")){a.show();a.outerWidth();a.css("right",0-b-5+"px").animate({right:"0px"},300)}else{var b=a.outerWidth();a.animate({right:0-b-5+"px"},300,function(){a.hide()})}},b.floatact=function(){$("[an-float]").each(function(a,b){var c=$(this).attr("option");"click"==c?$(this).click(function(){andy.floatbox($(this))}):"leave"==c&&$(this).on("mouseleave",function(){andy.floatbox($(this))})})},b.perform=function(a){var b=$("body");a&&(b=a);for(var c=0;c<andy.UI_PERFORM.length;c++){var d=andy.UI_PERFORM[c];"u-switch"==d&&b.hasClass(d)&&b.switchs()}for(var c=0;c<andy.UI_ATTR.length;c++){var d=andy.UI_ATTR[c];b.is("["+d+"]")&&(b.attr(d)||(b.attr(d,d),b[d.replace("-","_")]({})))}b.children("div,input,form,table,thead,tbody,th,tr,td,img,ul,li,a").length>0&&b.children("div,input,form,table,tbody,th,tr,td,img,ul,li,a").each(function(a,b){var b=$(b);b.is("img")&&andy.img(b),b.hasClass(andy.UI_SHIELDING)||b.hasClass(andy.UI_SHIELDING_PERFORM)||b.is("[autoxmpcode=true]")||andy.perform(b)})},b.layout=function(b){if(6==andy.IE()&&0==andy.LAYOUT_IE6)return!1;var c=$("body");b&&(c=b),c.each(function(b,c){var d,e,f=$(c);if(f.parent().is("body"))d=$(a).width(),e=$(a).height();else{var g=f.parent();g.is("form")&&(g=g.parent()),d=g.width(),e=g.height()}for(var h=0;h<andy.UI_LAYOUT.length;h++){var i=andy.UI_LAYOUT[h];f.hasClass(i)&&("g-layout"==i?andy.autolayout(f,d,e):"g-max"==i?andy.gmax(f):"g-h-max"==i?andy.hmax(f):"g-w-max"==i?andy.wmax(f):"g-h-auto"==i?andy.hauto(f):"g-w-auto"==i&&andy.wauto(f))}for(var h=0;h<andy.UI_ATTR.length;h++){var i=andy.UI_ATTR[h],j=f.attr(i);"an-tabs"==j?andy.tabsLayout(f):"an-datagrid"==j&&andy.datagridLayout(f)}if(f.children("div").length>0)f.children("div").each(function(a,b){var c=$(b);c.hasClass("f-hidden")||c.hasClass("item")||c.hasClass(andy.UI_SHIELDING)||c.hasClass(andy.UI_SHIELDING_LAYOUT)||c.is("[autoxmpcode=true]")||andy.layout(c)}),andy.formlayout();else if(f.children("table,form").length>0)f.children("table,form").each(function(a,b){var c=$(b);c.hasClass(andy.UI_SHIELDING)||c.hasClass(andy.UI_SHIELDING_LAYOUT)||c.is("[autoxmpcode=true]")||(andy.layout(c),andy.formlayout(c))});else if(f.children("iframe").length>0){var k=andy.IE();if(k<=8&&0!=k){var l=f.children("iframe");l[0].contentWindow&&l[0].contentWindow.andy&&l[0].contentWindow.andy.layout()}}})},b.activeTarget=function(a){var b=$("body");a&&(b=a),andy.perform(a),andy.layout(a)},b.tabsLayout=function(a){var b=a.parent().height(),c=a.parent().width(),d=a[0];d.option&&0==d.option.fit&&(d.option.height>0&&(b=d.option.height),d.option.width>0&&(c=d.option.width));var e=a.children(".m-tabs-header"),f=a.children(".m-tabs-content"),g=f.children(".item"),h=parseInt(g.css("padding-left")),i={head:"m-tabs-header",body:"m-tabs-content",hidden:"f-hidden",layouted:"layouted",item:"item",active:"activate",headTop:"head-top",headLeft:"head-left",headRight:"head-right",headBottom:"head-bottom"};"number"!=typeof h&&(h=0);var j=0,k=0;a.hasClass(i.headTop)||a.hasClass(i.headLeft)||a.hasClass(i.headRight)||a.hasClass(i.headBottom)?a.hasClass(i.headTop)?j=e.outerHeight():a.hasClass(i.headLeft)?k=e.outerWidth():a.hasClass(i.headRight)?k=e.outerWidth():a.hasClass(i.headBottom)&&(j=e.outerHeight()):j=e.outerHeight(),a.outerHeight(b).outerWidth(c),f.outerHeight(b-j).outerWidth(c-k);var l=f.height(),m=f.width();f.children().each(function(a,b){var c=$(b);c.removeClass(i.layouted),c.outerHeight(l).outerWidth(m),c.hasClass(i.active)&&andy.layout(c)})},b.datagridLayout=function(a){var b=a.parent().parent().parent().height(),c=a.parent().parent().parent().width();a.an_tableLayout(a,c,b)},b.autolayout=function(a,b,c){a[0]&&a.outerWidth(b).outerHeight(c);var d=a,e=d.children(".layout-head"),f=d.children(".layout-left"),g=d.children(".layout-right"),h=d.children(".layout-foot"),i=d.children(".layout-center");if(e[0]&&e.outerWidth(b),h[0]&&h.outerWidth(b),f[0]){var j=0,k=0;e[0]&&(j=e.height()),h[0]&&(k=h.height()),f.height(c-j-k),f.css("top",j+"px")}if(g[0]){var j=0,k=0;e[0]&&(j=e.height()),h[0]&&(k=h.height()),g.height(c-j-k),g.css("top",j+"px")}if(i[0]){var l=0,m=0,n=0,o=0,p=0,q=0;f[0]&&(l=f.width(),p=f.outerWidth()),g[0]&&(m=g.width(),q=g.outerWidth()),e[0]&&(n=e.outerHeight()),h[0]&&(o=h.outerHeight()),i.outerWidth(b-p-q),i.outerHeight(c-n-o),i.css({top:n+"px",left:p+"px"})}if(i.children().is("iframe")){i.height();andy.hauto(i.children("iframe")),i.css("overflow","hidden")}},b.getInnerSize=function(a){var b={innerWidth:0,innerHeight:0},c=a.parent(),d=c.innerHeight();c.css("padding-top")&&(d-=parseInt(c.css("padding-top"))),c.css("padding-bottom")&&(d-=parseInt(c.css("padding-bottom")));var e=c.innerWidth();return c.css("padding-left")&&(e-=parseInt(c.css("padding-left"))),c.css("padding-right")&&(e-=parseInt(c.css("padding-right"))),b.innerWidth=e,b.innerHeight=d,b},b.hmax=function(a){for(var b=andy.getInnerSize(a),c=b.innerHeight,d=b.innerWidth,e=a.siblings(".g-h-max").length+1,f=$(a).siblings(":not(.g-h-max)"),g=f.not(".u-float"),h=g.length,i=0,j=0;j<h;j++)i+=$(g[j]).outerHeight();var k=(c-i)%e,l=Math.floor((c-i)/e);a.index()<k&&(l+=1),a.outerHeight(l,!0).outerWidth(d,!0)},b.hauto=function(a){for(var b=andy.getInnerSize(a),c=b.innerHeight,d=a.siblings(".g-h-auto").length+1,e=$(a).siblings(":not(.g-h-auto)"),f=e.not(".u-float"),g=f.length,h=0,i=0;i<g;i++)h+=$(f[i]).outerHeight();var j=(c-h)%d,k=Math.floor((c-h)/d);a.index()<j&&(k+=1),a.outerHeight(k,!0)},b.wmax=function(a){for(var b=andy.getInnerSize(a),c=b.innerHeight,d=b.innerWidth,e=a.siblings(".g-w-max").length+1,f=$(a).siblings(":not(.g-w-max)"),g=f.not(".u-float"),h=g.length,i=0,j=0;j<h;j++)i+=$(g[j]).outerWidth();var k=(d-i)%e,l=Math.floor((d-i)/e);a.index()<k&&(l+=1),a.outerHeight(c,!0).outerWidth(l,!0)},b.wauto=function(a){for(var b=andy.getInnerSize(a),c=b.innerWidth,d=a.siblings(".g-w-auto").length+1,e=$(a).siblings(":not(.g-w-auto)"),f=e.not(".u-float"),g=f.length,h=0,i=0;i<g;i++)h+=$(f[i]).outerWidth();var j=(c-h)%d,k=Math.floor((c-h)/d);a.index()<j&&(k+=1),a.outerWidth(k,!0)},b.gmax=function(a){var b=andy.getInnerSize(a),c=Math.floor(b.innerHeight),d=Math.floor(b.innerWidth);a.outerWidth(d,!0),a.outerHeight(c,!0)},b.panelauto=function(){$(".u-panel.u-datagrid").each(function(a,b){var c=$(b),d=(c.parent().width(),c.parent().height());c.height(d);var e=c.outerHeight(),f=c.children(".panel-head"),g=c.children(".panel-body"),h=c.children(".panel-foot");g[0]&&g.height(e-(f.outerHeight()||0)-(h.outerHeight()||0))}),$(".u-panel.window").each(function(a,b){var c=$(b),d=parseInt(c.parent().css("padding-top")),e=parseInt(c.parent().css("padding-bottom")),f=(c.parent().width(),c.parent().height()-d-e);c.height(f);var g=c.height(),h=c.children(".panel-head"),i=c.children(".panel-body"),j=parseInt(i.css("padding-top")),k=parseInt(i.css("padding-bottom")),l=c.children(".panel-foot");i&&i.height(g-(h.outerHeight()||0)-(l.outerHeight()||0)-j-k)})},b.uiLayout=function(a){for(var b=0;b<andy.UI_ATTR.length;b++){var c=andy.UI_ATTR[b];a.children().find("["+c+"]").trigger("layout")}},b.formlayout=function(a){$(".m-table-form.inline").find(".u-formitem").each(function(a,b){var c=$(b),d=(c.width(),c.parent().height(),0);c.parent().parent().find(".u-input-span, .u-input, textarea, .g-combo").each(function(a,b){var c=$(b);0==d?d=c.outerHeight():c.outerHeight()>d&&(d=c.outerHeight())}),c.parent().siblings().each(function(a,b){var c=$(b);c.height(d)}),c.parent().height(d)}),$(".u-time-group").find(".u-time-input").each(function(a,b){var c=$(b);andy.inputLayout(c)}),a?a.find(".u-group .u-input, .u-group .g-combo").each(function(a,b){var c=$(b);c.parent().hasClass("m-tooltip")?andy.inputLayout(c.parent()):andy.inputLayout(c)}):$(".u-group").find(".u-input, .g-combo").each(function(a,b){var c=$(b);c.parent().hasClass("m-tooltip")?andy.inputLayout(c.parent()):andy.inputLayout(c)})},b.inputLayout=function(a){var b=a.parent().width(),c=1;if(a.parent().hasClass("u-time-input"))return!1;a.siblings().each(function(d,e){var f=$(e);0==f.hasClass("infobox")&&0==f.hasClass("u-nd")&&0==f.hasClass("u-input")&&0==f.hasClass("u-time-input")&&(a.hasClass("u-input")&&f.hasClass("g-combo")?b-=f.outerWidth():0==f.hasClass("g-combo")&&0==f.hasClass("u-time-input")&&(b-=f.outerWidth())),(a.hasClass("u-input")&&f.hasClass("u-input")||a.hasClass("g-combo")&&f.hasClass("g-combo")||a.hasClass("u-time-input")&&f.hasClass("u-time-input"))&&(c+=1),f.hasClass("item-r")&&f.css({position:"absolute",right:"0",top:"0"})});var d=b%c,e=Math.floor(b/c);if(a.index()<d&&(e+=1),a.outerWidth(e,!0),a.parent().parent().hasClass("g-combo")){var f=andy.combo("getTouchTarget",a),g=andy.combo("getShowTarget",a);f&&g&&g.width(a.width())}},b.shrinkageLayout=function(a){var b=$.extend({element:"",min:0,max:100,direction:"v",isAnimation:!0,time:100,layout:!0,shrinkageBefore:function(){},callback:function(){}},a),c=b.element,d=(c.height(),c.width(),b.min),e=b.max,f=b.time,g=function(){b.layout&&$.fn.layoutMain(),b.callback(c)};b.isAnimation||(f=0),b.shrinkageBefore(),"v"==b.direction&&(c.height()!=d?c.animate({height:d+"px"},f,g):c.animate({height:e+"px"},f,g)),"l"==b.direction&&(c.width()!=d?c.animate({width:d+"px"},f,g):c.animate({width:e+"px"},f,g))},a.andy=$.extend({},!0,a.andy,b)}(window),function(a){a.fn.an_queue=function(b){var c=b.queue;a(this).queue("goqueue",c)},a.fn.an_queue.next=function(b){var c=a(this);if(b){setTimeout(function(){c.dequeue("goqueue")},b)}else c.dequeue("goqueue")},a.fn.an_imgLoad=function(b){var c=a.extend({time:4e3,callback:function(){}},b),d=this,e=0,f=0,g=this.length;d.each(function(){var b=this,c=a(b).attr("date-src"),d=c?c:b.src,f=new Image;f.onload=function(){f.onload=null,b.src=d,e++},f.src=d});var h=window.setInterval(function(){f++,(e==g||200*f>=c.time)&&(window.clearInterval(h),c.callback())},200)},a.fn.layoutMain=function(){6==andy.IE()?andy.LAYOUT_IE6&&andy.layout():andy.layout()},a(function(){a.fn.layoutMain(),andy.perform(),andy.floatact(),andy.a()})}(jQuery),$(document).ready(function(){var a=null,b=andy.SETTIME_02;$(window).resize(function(c){a&&window.clearTimeout(a),a=window.setTimeout(function(){$.fn.layoutMain(),a=null,(andy.IE()>7||0==andy.IE())&&(a=window.setTimeout(function(){$.fn.layoutMain(),a=null},b/2))},b)})}),function(a){var b,c={};c.getBrowser=function(){function c(a,b){return a=(""+a).replace(/_/g,"."),b=b||1,a=String(a).split("."),a=a[0]+"."+(a[1]||"0"),a=Number(a).toFixed(b)}function d(a,c,d){a=b[a],a.name=c,a.version=d,a[c]=d}var e,f=(navigator.platform||"").toLowerCase(),g=navigator.userAgent.toLowerCase();if(b)return b;b={};var h=b.platform={name:void 0!=a.orientation?"iPod":(f.match(/mac|win|linux/i)||["unknown"])[0],version:0,iPod:0,iPad:0,iPhone:0,android:0,win:0,linux:0,mac:0};(e=g.match(/windows ([\d.]+)/))?d("platform","win",c(e[1])):(e=g.match(/windows nt ([\d.]+)/))?d("platform","win",c(e[1])):(e=g.match(/linux ([\d.]+)/))?d("platform","linux",c(e[1])):(e=g.match(/mac ([\d.]+)/))?d("platform","mac",c(e[1])):(e=g.match(/ipod ([\d.]+)/))?d("platform","iPod",c(e[1])):(e=g.match(/ipad[\D]*os ([\d_]+)/))?d("platform","iPad",c(e[1])):(e=g.match(/iphone ([\d.]+)/))?d("platform","iPhone",c(e[1])):(e=g.match(/android ([\d.]+)/))?d("platform","android",c(e[1])):0;var i=b.browser={name:"unknown",version:0,ie:0,firefox:0,chrome:0,opera:0,safari:0,mobileSafari:0,adobeAir:0};return(e=g.match(/trident.*; rv\:([\d.]+)/))?d("browser","ie",c(e[1])):(e=g.match(/msie ([\d.]+)/))?d("browser","ie",c(e[1])):(e=g.match(/firefox\/([\d.]+)/))?d("browser","firefox",c(e[1])):(e=g.match(/chrome\/([\d.]+)/))?d("browser","chrome",c(e[1])):(e=g.match(/opera.([\d.]+)/))?d("browser","opera",c(e[1])):(e=g.match(/adobeair\/([\d.]+)/))?d("browser","adobeAir",c(e[1])):(e=g.match(/version\/([\d.]+).*safari/))?d("browser","safari",c(e[1])):0,(e=g.match(/version\/([\d.]+).*mobile.*safari/))?d("browser","mobileSafari",c(e[1])):0,h.iPad&&d("browser","mobileSafari","0.0"),i.ie&&(document.documentMode?document.documentMode!==Math.floor(i.ie)&&d("browser","ie",c(document.documentMode)):document.documentMode=Math.floor(i.ie)),b.engine={name:"unknown",version:0,trident:0,gecko:0,webkit:0,presto:0},(e=g.match(/trident\/([\d.]+)/))?d("engine","trident",c(e[1])):(e=g.match(/gecko\/([\d.]+)/))?d("engine","gecko",c(e[1])):(e=g.match(/applewebkit\/([\d.]+)/))?d("engine","webkit",c(e[1])):(e=g.match(/presto\/([\d.]+)/))?d("engine","presto",c(e[1])):0,b.browser.ie&&(6==b.browser.ie?d("engine","trident",c("4")):7!=i.ie&&8!=i.ie||d("engine","trident",c("5"))),b},c.getBrowser(),c.IE=function(){var a=b.browser.ie,c=parseInt(a,10);return c},c.isChrome=function(){return"chrome"===b.browser.name},c.isFirefox=function(){return"firefox"===b.browser.name},c.getBrowserEngine=function(){return b.engine},a.andy=$.extend({},!0,a.andy,c)}(window),function(a){var b={};b.getRandomColor=function(){return"#"+("00000"+(16777215*Math.random()+.5>>0).toString(16)).slice(-6)},b.isSimilarColor=function(a,b,c){this.offsetNum=Math.abs(c),this.offsetNum>255?this.offsetNum=this.offsetNum-256:"";for(var d=[parseInt(a.substring(1,3),16),parseInt(a.substring(3,5),16),parseInt(a.substring(5,7),16)],e=[parseInt(b.substring(1,3),16),parseInt(b.substring(3,5),16),parseInt(b.substring(5,7),16)],f=0;f<d.length;f++)if(Math.abs(d[f]-e[f])>this.offsetNum)return!1;return!0},a.andy=$.extend({},!0,a.andy,b)}(window),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return a<10?"0"+a:a}function this_value(){return this.valueOf()}function quote(a){return rx_escapable.lastIndex=0,rx_escapable.test(a)?'"'+a.replace(rx_escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;c<f;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;c<f;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;d<c;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(window){var module={};module.loaddata=function(a,b,c){var d;return 2===arguments.length&&(c=b,b=void 0),a.indexOf("{")>0||a.indexOf("[")>0?(d=module.stringToJson(a),void c(d)):void $.get(a,b,function(b,d){"success"==d?c(b):console.log(a+"|load data is failure!")}).error(function(a){c(!1,a)})},module.postdata=function(a,b,c){2===arguments.length&&(c=b,b=void 0),$.post(a,b,function(b,d){"success"==d?c(b):console.log(a+"|load data is failure!")})},module.getDataByApi=function(a,b,c,d){if("object"==typeof a)return b(a)},module.stringToJson=function(string){var datastring=string;return"string"==typeof datastring&&(datastring=eval("("+datastring+")")),datastring},module.jsonToString=function(a){var b=a;return"object"==typeof b&&(b=JSON.stringify(b)),b},module.where=function(a,b){var c=$.grep(a,function(a,c){return JSON.parse(b)});return c},module.stringReplace=function(a,b,c){var d,e=a,f=function(a,b){var f;if(d=null,d=new RegExp(a,"g"),"object"==typeof c)for(var g=0;g<c.length;g++)g==b&&(f=c[g]);else"string"==typeof c&&(f=c);e=e.replace(d,f)};if("object"==typeof b)for(var g=0;g<b.length;g++)f(b[g],g);else f(b);return e},module.an_andyData=function(a){var b,c,d,e,f;f=a,b=$("[andy-data-main]"),c="andy-data",d="andy-data-type";var e=function(a,b){var c,d=a.split("."),e=function(a,b){var c=!1;for(var d in a)d==b&&(c=!0);return c},g=function(a,b,c,d){var f=a[b[c]];b[c+1]&&e(f,b[c+1])?g(f,b,c+1,d):d(f)};return g(f,d,0,function(a){c=a}),c};b.find("["+c+"]").each(function(a,b){var f=$(b),g=e(f.attr(c));if("combo"==f.attr(d))f.an_combo(g);else{var h=f;h.is("input")?h.val(g):h.text(g)}})},module.copy=function(a,b){0==$("#copytextarea").length&&$("body").append("<textarea id='copytextarea' style='height:0; border:0; width:0; display:block; opacity:0'></textarea>");var c=$("#copytextarea");c.text(a),c.select(),document.execCommand("Copy"),alert(b)},module.execiFrame=function(a){var b=a.execPageUrl||"",c=a.execData||"";c=andy.jsonToString(c),c=encodeURI(c),b=b+"?exec="+c,"undefined"==typeof exec_obj?(exec_obj=document.createElement("iframe"),exec_obj.name="exec_frame",exec_obj.src=b,exec_obj.style.display="none",document.body.appendChild(exec_obj)):exec_obj.src=b},module.getUrlParam=function(a,b){var c=b||window.location,d=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),e=c.search.substr(1).match(d);return null!=e?decodeURI(e[2]):null},window.andy=$.extend({},!0,window.andy,module)}(window),function(a,b){var c=function(){try{var a=window.top;return window.top.url,a}catch(a){return window}},d=function(a,b){var d;d="top"===a?c().$("body").find(".loading_bg"):window.$("body").find(".loading_bg"),d.addClass("fadeOut"),setTimeout(function(){d.remove(),"function"==typeof b&&b()},500)};return a.overlay=function(a,d,e,f){var g='<div class="loading_bg '+e+' animated fadeIn">'+d+"</div>";"top"==a&&0==c().$("body").find(".loading_bg").length?c().$("body").append(g):"top"==a&&1==c().$("body").find(".loading_bg").length?c().$("body").find(".loading_bg").html(d):"self"==a&&0==b("body").find(".loading_bg").length?b("body").append(g):"self"==a&&1==b("body").find(".loading_bg").length?b("body").find(".loading_bg").html(d):"self"!=a&&"top"!=a&&0==b("body").find(".loading_bg").length?(b(a).append(g),b(a).find(".loading_bg").css({position:"absolute"})):"self"!=a&&"top"!=a&&1==b("body").find(".loading_bg").length&&b(a).find(".loading_bg").html(d),"function"==typeof f&&f()},a.loading=function(b,c,e){var f={},g='<div class="loading_bg_center"><span class="quarters-loader"></span><p id="loadingtext">'+c+"</p></div>";return a.overlay(b,g),"function"==typeof e&&e(),f.close=function(a){d(b,a)},f.changeText=function(c){var d='<div class="loading_bg_center"><span class="quarters-loader"></span><p id="loadingtext">'+c+"</p></div>";a.overlay(b,d)},f},a.closeOverlay=function(a){d("top",a)},a}(andy,$),!function(){function a(a){return a.replace(t,"").replace(u,",").replace(v,"").replace(w,"").replace(x,"").split(y)}function b(a){return"'"+a.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function c(c,d){function e(a){return m+=a.split(/\n/).length-1,k&&(a=a.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),a&&(a=s[1]+b(a)+s[2]+"\n"),a}function f(b){var c=m;if(j?b=j(b,d):g&&(b=b.replace(/\n/g,function(){return m++,"$line="+m+";"})),0===b.indexOf("=")){var e=l&&!/^=[=#]/.test(b);if(b=b.replace(/^=[=#]?|[\s;]*$/g,""),e){var f=b.replace(/\s*\([^\)]+\)/,"");n[f]||/^(include|print)$/.test(f)||(b="$escape("+b+")")}else b="$string("+b+")";b=s[1]+b+s[2]}return g&&(b="$line="+c+";"+b),r(a(b),function(a){if(a&&!p[a]){var b;b="print"===a?u:"include"===a?v:n[a]?"$utils."+a:o[a]?"$helpers."+a:"$data."+a,w+=a+"="+b+",",p[a]=!0}}),b+"\n"}var g=d.debug,h=d.openTag,i=d.closeTag,j=d.parser,k=d.compress,l=d.escape,m=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q="".trim,s=q?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],t=q?"$out+=text;return $out;":"$out.push(text);",u="function(){var text=''.concat.apply('',arguments);"+t+"}",v="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+t+"}",w="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(g?"$line=0,":""),x=s[0],y="return new String("+s[3]+");";r(c.split(h),function(a){a=a.split(i);var b=a[0],c=a[1];1===a.length?x+=e(b):(x+=f(b),c&&(x+=e(c)))});var z=w+x+y;g&&(z="try{"+z+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+b(c)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var A=new Function("$data","$filename",z);return A.prototype=n,A}catch(a){throw a.temp="function anonymous($data,$filename) {"+z+"}",a}}var d=function(a,b){return"string"==typeof b?q(b,{filename:a}):g(a,b)};d.version="3.0.0",d.config=function(a,b){e[a]=b};var e=d.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},f=d.cache={};d.render=function(a,b){return q(a,b)};var g=d.renderFile=function(a,b){var c=d.get(a)||p({filename:a,name:"Render Error",message:"Template not found"});return b?c(b):c};d.get=function(a){var b;if(f[a])b=f[a];else if("object"==typeof document){var c=document.getElementById(a);if(c){var d=(c.value||c.innerHTML).replace(/^\s*|\s*$/g,"");b=q(d,{filename:a})}}return b};var h=function(a,b){return"string"!=typeof a&&(b=typeof a,"number"===b?a+="":a="function"===b?h(a.call(a)):""),a},i={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},j=function(a){return i[a]},k=function(a){return h(a).replace(/&(?![\w#]+;)|[<>"']/g,j)},l=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},m=function(a,b){var c,d;if(l(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)},n=d.utils={$helpers:{},$include:g,$string:h,$escape:k,$each:m};d.helper=function(a,b){o[a]=b};var o=d.helpers=n.$helpers;d.onerror=function(a){var b="Template Error\n\n";for(var c in a)b+="<"+c+">\n"+a[c]+"\n\n";"object"==typeof console&&console.error(b)};var p=function(a){return d.onerror(a),function(){return"{Template Error}"}},q=d.compile=function(a,b){function d(c){try{return new i(c,h)+""}catch(d){return b.debug?p(d)():(b.debug=!0,q(a,b)(c))}}b=b||{};for(var g in e)void 0===b[g]&&(b[g]=e[g]);var h=b.filename;try{var i=c(a,b)}catch(a){return a.filename=h||"anonymous",a.name="Syntax Error",p(a)}return d.prototype=i.prototype,
d.toString=function(){return i.toString()},h&&b.cache&&(f[h]=d),d},r=n.$each,s="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",t=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,u=/[^\w$]+/g,v=new RegExp(["\\b"+s.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),w=/^\d[^,]*|,\d[^,]*/g,x=/^,+|,+$/g,y=/^$|,+/;e.openTag="{{",e.closeTag="}}";var z=function(a,b){var c=b.split(":"),d=c.shift(),e=c.join(":")||"";return e&&(e=", "+e),"$helpers."+d+"("+a+e+")"};e.parser=function(a){a=a.replace(/^\s/,"");var b=a.split(" "),c=b.shift(),e=b.join(" ");switch(c){case"if":a="if("+e+"){";break;case"else":b="if"===b.shift()?" if("+b.join(" ")+")":"",a="}else"+b+"{";break;case"/if":a="}";break;case"each":var f=b[0]||"$data",g=b[1]||"as",h=b[2]||"$value",i=b[3]||"$index",j=h+","+i;"as"!==g&&(f="[]"),a="$each("+f+",function("+j+"){";break;case"/each":a="});";break;case"echo":a="print("+e+");";break;case"print":case"include":a=c+"("+b.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(e)){var k=!0;0===a.indexOf("#")&&(a=a.substr(1),k=!1);for(var l=0,m=a.split("|"),n=m.length,o=m[l++];n>l;l++)o=z(o,m[l]);a=(k?"=":"=#")+o}else a=d.helpers[c]?"=#"+c+"("+b.join(",")+");":"="+a}return a},"function"==typeof define?define(function(){return d}):"undefined"!=typeof exports?module.exports=d:this.template=d}(),function(a,b){var c=function(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&(c[a[b]]=parseInt(b,10));return c};a.CODE_MSG_MAPPING={8:"BackSpace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps_Lock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",41:"Select",42:"Print",43:"Execute",45:"Insert",46:"Delete",47:"Help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Win",92:"Win",96:"KP_0",97:"KP_1",98:"KP_2",99:"KP_3",100:"KP_4",101:"KP_5",102:"KP_6",103:"KP_7",104:"KP_8",105:"KP_9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num_Lock",145:"Scroll_Lock",187:"+",186:";",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a.MSG_CODE_MAPPING=c(a.CODE_MSG_MAPPING);var d={},e={},f=function(b){var c,e=b||window.event;return"input"!==e.target.localName||!e||27!=e.keyCode&&13!=e.keyCode?(c=a.CODE_MSG_MAPPING[e.keyCode],c&&(c=c.toLowerCase(),d[c]&&d[c].length>0)?void d[c].pop()(e):void 0):void b.target.blur()},g=function(b){var c=b||window.event,d=a.CODE_MSG_MAPPING[c.keyCode];if(d&&(d=d.toLowerCase(),e[d]&&e[d].length>0))return void e[d].pop()(c)},h=function(a,c,f,g){f=f||"keyup",c=c.toLowerCase(),a?b(a)[f](function(a){a.keyCode==c&&g(a)}):"keyup"===f?(e[c]=e[c]||[],e[c].push(g)):"keydown"===f&&(d[c]=d[c]||[],d[c].push(g))},i=function(a,c){a&&b(a).off(c||"keydown")};a.addKeyEvent=h,a.removeKeyEvent=i,b(document).keydown(f),b(document).keyup(g)}(andy,$),function(a,b){var c,d='<div class="infobox" style="width:{{width}};top:{{top}}; left:{{left}}; bottom:{{bottom}}; right:{{right}}; display: none;"><i class="iconfont {{ip}}">{{itype}}</i><div class="content">{{#content}}</div></div>',e={width:"auto",top:0,left:0,bottom:"auto",right:"auto",ip:"b",itype:"&#xe605;",content:"提示",position:"bottom"},f=function(b){var c,d,f={};b.getAttribute("options")&&(f=a.stringToJson(b.getAttribute("options")));for(c in e)d=b.getAttribute(c),d&&(f[c]=d);return f};return a.tooltip=function(a,f,g,h,i){var j,k={},l=b.extend({},e,{content:g,position:f});if(!a.parent().is(".m-tooltip")){var m=999-b(".m-tooltip").length;a.wrap("<div class='m-tooltip "+h+"' style = 'z-index:"+m+"'></div>")}return"bottom"==f?(l.top=a.outerHeight()+2+"px",l.itype="&#xe7bb;"):"top"==f?(l.top="auto",l.bottom=a.outerHeight()+2+"px",l.ip="t",l.itype="&#xe611;"):"left"==f?(l.ip="l",l.left=18*-g.length+5+"px",l.itype="&#xe788;"):"right"==f&&(l.ip="r",l.left=a.outerWidth()+"px",l.width=18*g.length+"px",l.itype="&#xe787;"),c=c||template.compile(d),b(c(l)).insertAfter(a),j=a.next(".infobox"),k.show=function(){j.fadeIn(200)},k.hide=function(){j.fadeOut(200)},k.change=function(a){j.find(".content").html(a)},i&&(a.on("mouseover",function(){k.show()}),a.on("mouseleave",function(){k.hide()})),k},a.showTooltip=function(a,c){b(a).next(".infobox").fadeIn(200),c&&setTimeout(function(){b(a).next(".infobox").fadeOut(2500)},500)},a.hideTooltip=function(a){b(a).next(".infobox").fadeOut(200)},a.changeTooltip=function(a,c){b(a).next(".infobox").find(".content").html(c)},b(document).ready(function(){b(".tooltip").each(function(c,d){var e=f(d);a.tooltip(b(d),e.position,e.content,e.type,e.isMouseOverShow)})}),a}(andy,$),function(a,b){"use strict";var c=86,d=9e3,e="systemstage",f={"成功":{title:"成功!",icon:"&#xe700;",iconclass:"f-color-success",buttons:[{text:"确定",cls:"success"}]},"询问":{title:"信息",icon:"&#xe744;",iconclass:"f-color-info",buttons:[{text:"确定",cls:"success"},{text:"取消"}]},"错误":{title:"错误!",icon:"&#xe701;",iconclass:"f-color-danger",buttons:[{text:"返回"}]},"禁止":{title:"禁止!",icon:"&#xe702;",iconclass:"f-color-danger",buttons:[{text:"返回"}]},"警告":{title:"警告!",icon:"&#xe6ff;",iconclass:"f-color-warning",buttons:[{text:"返回"},{text:"继续"}]},"提示":{title:"提示!",icon:"&#xe624;",iconclass:"f-color-info",buttons:[{text:"确定",cls:"success"},{text:"取消"}]},default:{title:"提示!",icon:"&#xe624;"}},g=function(){try{var a=window.top;return window.top.url,a}catch(a){return window}},h=function(a){var c,d,e;return a&&("object"==typeof a&&(e=b(a).parents(".u-panel"),0===e.length&&(e=void 0)),"string"==typeof a&&(c=a.indexOf("#")>-1?a:"#"+a,d=g().$(c),e=d[0]?d:g().$("iframe").contents().find(c))),e},i=function(b,c,d){var e=a.IE();!c||e<=8&&0!==e?d&&d(b):(b.addClass(c),window.setTimeout(function(){b.removeClass(c),d&&d(b)},500))},j=function(c,d,e){var f,h,i,j,k,l="",m="",n="",o="";j=g().$.data(c[0],"an_dialog").options,f=c.parent()[0],k=b(f).scrollTop(),(a.IE()>0||a.isFirefox())&&(k=f.ownerDocument.documentElement.scrollTop||window.pageYOffset||f.ownerDocument.body.scrollTop),h=c.parent().height(),i=c.parent().width(),m=d||(i-c.width())/2,l=e||(h-c.height())/2+k,j.location&&(j.location.indexOf("left")!==-1&&(m=5),j.location.indexOf("top")!==-1&&(l=5+k),j.location.indexOf("right")!==-1&&(n=5,m=""),j.location.indexOf("bottom")!==-1&&(l=k+f.clientHeight-5-c.eq(0).height())),c.eq(0).css({left:m,top:l,right:n,bottom:o})},k=function(a,d,e){var f,h,i,j,k,l,m,n;try{n=g().$.data(a[0],"an_dialog"),n&&n.options&&(f=n.options,k=a.next(".m-panel-mask"),l=a.find(".panel-body"),h=a.parents("html")[0]||g(),i=b(h).height(),j=b(h).width(),m=f.buttons&&f.buttons.length>0?c:c-37,2===arguments.length&&"max"===d?(a.height(i-20),a.width(j-10),l.height(i-m),l.width(j-10)):(void 0!==e&&(e=e>i?i-10:e,a.height(e),l.height(""===e?e:e-m)),void 0!==d&&(d=d>j?j-10:d,a.width(d),l.width(""===d?d:d-10))),k.height(h.scrollHeight),k.width(h.scrollWidth))}catch(a){}},l=function(c){var d,e,f,j;if(c){d=c.next(".m-panel-mask");try{f=g().$.data(c[0],"an_dialog").options}catch(a){throw"can not close this dialog!"}(!f.onBeforeClose||f.onBeforeClose&&f.onBeforeClose(f))&&i(c.eq(0)||c,f.aniClose,function(){e=c.nextAll('div[dialogMoveRect="true"]'),e&&e.remove(),c.hide(),d.hide(),f.onClose&&f.onClose(f),f.parent&&(j=h(f.parent),j&&l(j)),f.url&&a.destroyIframe(c.find("iframe")[0]),f.div&&b("#dailogreplace"+f.id).replaceWith(c.find(".panel-body").children()),c.remove(),d.remove()})}},m=function(){var c,e,f,h,i,l,m,n,o,p,q,r={},s=!1,t={},u={},v={},w=[{cls:"move",coe:[1,1,0,0]},{cls:"n-resize",coe:[0,1,0,-1]},{cls:"ne-resize",coe:[0,1,1,-1]},{cls:"e-resize",coe:[0,0,1,0]},{cls:"se-resize",coe:[0,0,1,1]},{cls:"s-resize",coe:[0,0,0,1]},{cls:"sw-resize",coe:[1,0,-1,1]},{cls:"w-resize",coe:[1,0,-1,0]},{cls:"nw-resize",coe:[1,1,-1,-1]}];return m=g().$('<div dialogMoveRect="true" style="border: 1px dashed dodgerblue; position: absolute; "></div>'),e=function(){s=!1,h&&h.parent("body").css("cursor",""),l.removeClass("an_dialog_dragLayer"),m.remove()},i=function(){var b,c=g().$.data(h[0],"an_dialog").options,d=m.width(),f=m.height(),i=m.offset().left,l=m.offset().top;d==h.outerWidth()&&f==h.outerHeight()||(c.onResize(d,f),k(h,d,f)),i==h.offset().left&&l==h.offset().top||(c.onMove(i,l),6===a.IE()&&(b=h.parents("html")[0]||g(),l-=b.scrollTop),j(h,i,l)),e()},q=function(a){var c=a.target||a.srcElement;if(!s)return o="",c.getAttribute("an_dialog_drag")?(h=b(c).parents(".m-panel"),"true"===c.getAttribute("an_dialog_drag")&&(o=0)):h=c.getAttribute("an_dialog_resize")?b(c):c.getAttribute("an_dialog")?b(c).parents(".m-panel"):void 0,h&&("true"===h.attr("an_dialog_resize")&&(h.position().top<a.y&&a.y<h.position().top+5&&(o=1),h.position().left+h.outerWidth()>a.x&&a.x>h.position().left+h.outerWidth()-5&&(o=o?2:3),h.position().top+h.outerHeight()>a.y&&a.y>h.position().top+h.outerHeight()-5&&(o=o?4:5),h.position().left<a.x&&a.x<h.position().left+5&&(o=1===o?8:5===o?6:7)),l=h.next(),h.css("cursor",o?w[o].cls:"")),o},f=function(a){s&&i(),q(a),h&&""!==o&&(a.preventDefault&&a.preventDefault(),s=!0,t.x=u.x=a.clientX,t.y=u.y=a.clientY,m.css("left",h.offset().left),m.css("top",h.offset().top),m.css("z-index",d+4*c.winIndex+3),m.width(h.outerWidth()),m.height(h.outerHeight()),h.parent("body").append(m),h.parent("body").css("cursor",w[o].cls),l.addClass("an_dialog_dragLayer"))},n=function(a){var b,c,d;if(s){if(v.x=a.clientX-u.x,v.y=a.clientY-u.y,b=w[o].coe,c=m.offset().left+v.x*b[0],d=m.offset().top+v.y*b[1],c=c<=0?.1:c,c=c>m.parent().width()-m.width()?m.parent().width()-m.width():c,d=d<=0?.1:d,m.css("left",c),m.css("top",d),m.width(m.width()+v.x*b[2]),m.height(m.height()+v.y*b[3]),(c<=.1||d<=.1||c>=m.parent().width()-m.width())&&h.offset().left>.1&&h.offset().top>.1&&h.offset().left<m.parent().width()-m.width())return void i();u.x=a.clientX,u.y=a.clientY}else q(a)},p=function(a){s===!0&&h&&w[o]&&(a.preventDefault&&a.preventDefault(),i())},r.bindEvent=function(a){if(c=a,c.addEventListener)c.addEventListener("mousedown",f),c.addEventListener("mousemove",n),c.addEventListener("mouseup",p);else{if(!c.attachEvent)throw"can not add dialogform event listener";c.document.attachEvent("onmousedown",f),c.document.attachEvent("onmousemove",n),c.document.attachEvent("onmouseup",p)}},r.unbindEvent=function(a){c.removeEventListener("mousedown",f),c.removeEventListener("mousemove",n),c.removeEventListener("mouseup",p)},r};a.dialoghDragInit=m,b.fn.an_dialog=function(c,h){var m,n;if("string"==typeof c){if(n=b.fn.an_dialog.methods[c])return n(this,h);throw"The method of"+c+"is undefined"}return m=b.extend({},b.fn.an_dialog.defaults,c),this.each(function(){var h,n,o,p,q,r,s,t,u,v;if(m.locMyself?h=window:(o=g().document.getElementById(e),h=o&&o.contentWindow.$?o.contentWindow:g()),m.massage?(m.width=m.width||300,m.height=m.height||150):(m.width=m.width||800,m.height=m.height||600),p=function(c){var d,e,f;f=null,d=c.next(".m-panel-mask"),m.maxSize?k(c,"max"):k(c,m.width,m.height),j(c),e=h.$("body").find("[an_dialog].m-panel"),e.length>1&&(c[0].style.left=parseInt(c[0].style.left,10)+15*(e.length-1)+"px",c[0].style.top=parseInt(c[0].style.top,10)+15*(e.length-1)+"px"),v(c,h.winIndex),a.IE()>7&&b(":focus").length>0&&b(":focus").blur(),c.eq(0).show(),m.modalval&&d.addClass("m-panel-maskshow"),b(h).resize(function(a){null==f&&(f=setTimeout(function(){k(c),f=null},100))}),i(c.eq(0),m.aniOpen,m.onOpen),m.url||m.data||m.onLoad(c)},v=function(a,b){var c;c=a.next(".m-panel-mask"),a.css("z-index",d+4*b+2),c.css("z-index",d+4*b)},t=function(a){var c,d=a&&a.data||n;c=g().$.data(d[0],"an_dialog").options,a.target.className.indexOf("restore")>-1?(b(a.target).removeClass("tool-restore"),b(a.target).addClass("tool-max"),k(d,a.target.getAttribute("reW"),a.target.getAttribute("reH")||"")):(b(a.target).addClass("tool-restore"),b(a.target).removeClass("tool-max"),a.target.setAttribute("reW",c.width||d.width()),a.target.setAttribute("reH",c.height||d.height()),k(d,"max")),j(n)},u=function(a){var b;if(a.delegate(".tool-close","click",a,function(a){l(a.data)}),m.maximizable&&(a.delegate(".tool-max","click",a,t),a.delegate(".tool-restore","click",a,t)),a.delegate(".m-panel-mask","click",a,l),m.buttons)for(b=0;b<m.buttons.length;b++)m.massage&&f[m.massage.type]&&f[m.massage.type].buttons&&(a.callback=m.massage.callback,m.buttons[b].handler=m.buttons[b].handler||function(a){a.data.callback&&a.data.callback(a.data,a),l(a.data)}),a.delegate("button[bt_index="+b+"]","click",a,m.buttons[b].handler)},s=function(){var a,d,e,g,i,j;return j='<div style="position: absolute; " an_dialog="true" an_dialog_resize = '+m.resizeable+' class="animated m-panel window'+m.cls+'" style="display: none"><div an_dialog="true" class="panel-head"><div class="m-toolbar '+(m.draggable?"an_dialog_drag":"")+'" an_dialog_drag = '+m.draggable+'><div class="item"><div class="title"><i class="iconfont">#icon#</i><span id="title">#title#</span></div></div><div an_dialog="true" class="item f-right"><div class="u-group">#tools#<button type="button" class="u-btn sm texture tool-close"><i class="iconfont " title="关闭">&#xe602;</i></button></div></div></div></div>#content##bottons#</div><div class="m-panel-mask"></div>',i=function(){var a;return m.massage&&(a=m.massage.title||f[m.massage.type].title),a||m.title},d=function(){var a="";return m.icon&&(a='<i class="iconfont "'+m.icon+'">&#xe62c;</i>'),a},a=function(){var a,b="",d='<button type="button" class="u-btn sm texture"><i class="iconfont tool-#type#"" href="javascript:void(0)" #attr#> #icon# </i></button>';return m.collapsible&&(b+=d.replace("#type#","collapse").replace("#tip#","收起").replace("#icon#","")),m.minimizable&&(b+=d.replace("#type#","min").replace("#tip#","最小化").replace("#icon#","")),m.maximizable&&(a=m.maxSize?d.replace("#type#","restore").replace("#tip#","还原").replace("#icon#","&#xe60c;"):d.replace("#type#","max").replace("#tip#","最大化").replace("#icon#","&#xe616;"),b+=a.replace("#attr#","reW = "+c.width+" reH ="+c.height)),b},e=function(){var a,b="",c='<button  bt_index="#index#" class="#class#" > #text# #icon#</button>';if(m.massage&&(m.buttons=m.buttons||f[m.massage.type].buttons),m.buttons){for(b='<div class="panel-foot">',a=m.buttons.length-1;a>=0;a--)b+=c.replace("#index#",a).replace("#class#","u-btn sm "+m.buttons[a].cls||"texture").replace("#text#",m.buttons[a].text||""),b=m.buttons[a].icon?b.replace("#icon#",'<i class="iconfont"> + args.buttons[i].icon </i>'):b.replace("#icon#","");b+="</div>"}return b},g=function(){var a,c;return m.url?(a='<iframe frameborder="0" an_dialog="true" src = #content# class="panel-body"></iframe><div style="z-index: 1;position: absolute;left:50%;top:50%" class="loading_bg_center"><span class="quarters-loader"></span></div>',c=m.url):(a='<div an_dialog="true" class="panel-body">#content#</div>',m.data?(c='<div class="loading_bg_center"><span class="quarters-loader"></span></div>',b.ajax({url:m.data,success:function(b){m.onLoad(n),a=n.find(".loading_bg_center").replaceWith(b)}})):(m.massage&&(c='<div class="panel-massage-box"><i class="iconfont '+f[m.massage.type].iconclass+' panel-massage-icon">'+f[m.massage.type].icon+'</i><div class="panel-massage">'+m.massage.content+"</div></div>"),m.html&&(c=m.html),m.text&&(c=m.text),m.div&&(c=""),m.mediaBox&&(c=b(h.document).an_mediabox("get",m.mediaBox)))),a=a.replace("#content#",c)},j=j.replace("#title#",i()),j=j.replace("#icon#",d()),j=j.replace("#tools#",a()),j=j.replace("#content#",g()),j=j.replace("#bottons#",e())},!h.$)throw"错误！ "+h.name+"页面没有jquery!";return m.id&&h.$("body").find("#"+m.id).length>0?(h.$("body").find("#"+m.id).addClass("wobble"),!1):(n=h.$(s()),m.div&&(q=n.find(".panel-body"),q.append(m.div.clone(!0)),m.div.replaceWith("<div id='dailogreplace"+m.id+"'></div>")),m.url&&(q=n.find(".panel-body")[0],r=function(){n.find(".loading_bg_center").remove(),q.contentWindow.dialog=n,q.contentWindow.onresize&&q.contentWindow.onresize(),q.contentWindow.dialogReady&&q.contentWindow.dialogReady(n,m),m.onLoad()},q.attachEvent?q.attachEvent("onload",r):q.addEventListener("load",r)),h.winIndex=h.winIndex||1,m.id=m.id||(m.locMyself?"win_":"rootWin_")+h.winIndex,n.eq(0).attr("id",m.id),n.find("iframe").attr("dialogid",m.id),n.attr({aniClose:m.aniClose}),m.massage&&n.eq(0).addClass("an_d_massage"),u(n),void(m.onBeforeOpen(n)&&(h.$("body").append(n),h.winIndex++,g().$.data(h.$("#"+m.id)[0],"an_dialog",{options:m}),p(n),h.hasDialogHandler||(h.andy.dialoghDragInit().bindEvent(h),h.hasDialogHandler=!0))))})},b.fn.an_dialog.methods={options:function(a){var b=g().$.data(a[0],"an_dialog").options;return b},getOptions:function(a){var b=g().$.data(a[0],"an_dialog").options;return b},move:function(a,b){j(a,b.left,b.top)},resize:function(a,b){k(a,b.width,b.height)},find:function(a,b){return h(b)},doCPageFun:function(a,b){"true"===a.attr("an_dialog")&&a.find("iframe")[0].contentWindow[b.funName](b.argus)},close:function(a,b){var c;"true"===a.attr("an_dialog")?c=a:b&&(c=h(b)),c&&l(c)}},b.fn.an_dialog.defaults={title:"窗口",width:0,height:0,reloadid:"datagrid",modalval:!0,source:this,aniOpen:"zoomIn",aniClose:"",locMyself:!1,maximizable:!1,draggable:!0,resizeable:!1,collapsible:!1,closable:!0,cls:"",onLoad:function(){},onBeforeOpen:function(){return!0},onOpen:function(){},onBeforeClose:function(){return!0},onClose:function(){return!0},onResize:function(a,b){},onMove:function(a,b){}}}(andy,jQuery),function(a){a.fn.extend({an_datagrid:function(){var b={},c="",d=arguments[0];"object"==typeof d?b=d:c=d;var e=a.extend({table:"",bodyUrl:"",urlParams:{},ajaxType:"get",lockTable:{lockRow:0,lockColumn:0},width:"100%",height:"100%",checkEnable:!0,checkbox:"",radio:"",addColumns:"",coverColumns:"",setRowHtml:"",setTrId:"",sortList:"",onSortClick:function(){},onLoadComplete:function(){},onClickRow:function(){},onDblClickRow:function(){},onClickCell:function(){},onDblClickCell:function(){}},b),f=e.table,g=a(this);""==e.table&&(g=andy.setRandomId(g,"datagrid_"),e.table=g.attr("id"),f=e.table);var h=g.parent(),i=h.height(),j=h.width(),k=g.attr("options");if(k){k="{"+k+"}",k=andy.stringToJson(k);for(var l in k)"true"==k[l]?e[l]=!0:"false"==k[l]?e[l]=!1:e[l]=k[l]}e.table=g;var m="EVENT_LOCK",n="EVENT_GET_ROW_DATA",o="EVENT_ADD_ROW",p="EVENT_GET_ROW",q="EVENT_SET_ROW",r="EVENT_TABLE_VIEW",s="EVENT_ADD_COLS",t="EVENT_COVER_COLS",u="EVENT_GET_CHECKED",v=!1;if("100%"!=e.height||e.height>0?i=e.height:"100%"==e.height,"100%"!=e.width||e.width>0?j=e.width:"100%"==e.width,""!=c)if("locakTable"==c){var w={lockRow:0,lockColumn:0},x=arguments[1];w=a.extend(w,x),g.trigger(m,w)}else if("tableView"==c){var y=arguments[1];g.trigger(r,y)}else{if("getHeadJson"==c){var z=[],g=arguments[1],A=function(a){var b=0,c=0,d=function(a){for(var e=0;e<a.length;e++){var f=a[e];f.children.length>0?(f.jsonParentIndex=c,d(f.children),c+=1):(f.jsonIndex=b,b+=1)}};d(a,b)},B=function(a){var b="open";return a.hasClass("f-hidden")&&(b="close"),b},C=function(a,b){var c=a-1,d=0,b=b,e="",f=function(a){for(var g=0,h=0,i=0;i<a.length;i++){var j=a[i];if(c==d)if(j.rowspan);else{g+=j.maxColspan?parseInt(j.maxColspan):1;for(var k=h;k<g;k++)if(b==k){e=j;break}h+=1}else j.children.length>0&&(d=parseInt(j.layer),f(j.children));if(""!=e)break}};return f(z),e};return g.find("thead tr").each(function(b,c){a(c).find("th").each(function(c,d){var e=a(d),f={id:b+"_"+c,name:e.html(),view:B(e),th_index:c,layer:b,colspan:e.attr("colspan"),maxColspan:e.attr("maxColspan"),rowspan:e.attr("rowspan"),children:[]};if(0==b)z.push(f);else{var g=C(b,c);""!=g&&g.children.push(f)}})}),A(z),z}if("addColumns"==c){var D={};D={data:arguments[1]},g.trigger(s,D)}else if("coverColumns"==c){var D={};D={data:arguments[1]},g.trigger(t,D)}else if("getChecked"==c){var E=arguments[1];g.trigger(u,E)}else if("addRow"==c){var z=arguments[1],E=arguments[2],F={data:z,callback:E};g.trigger(o,F)}else if("getRow"==c){var G=arguments[1],E=arguments[2],F={id:G,callback:E};g.trigger(p,F)}else if("getAllRowData"==c){var E=arguments[1];g.trigger(n,E)}else if("setRow"==c){var G=arguments[1],z=arguments[2],H=arguments[3],F={id:G,data:z,value:H};g.trigger(q,F)}}else{var I=a("<div style = 'position:relative;clear:both;'></div>");"100%"!=j&&(I=a(0==e.lockTable.lockRow?"<div style = 'position:relative;clear:both;overflow-x:auto;height:100%;'></div>":"<div style = 'position:relative;clear:both;overflow-x:auto;overflow-y:hidden;height:100%;'></div>")),g.wrap(I),g.data("options",e);var J=function(){g.bind(r,function(b,c){var d=a("#"+f);d.an_tableSetView(d,c);var e=d.parent().parent().parent().height(),g=d.parent().parent().parent().width();d.an_tableLayout(d,g,e)}),e.table.bind(m,function(b,c){var d=a("#"+f);d.an_tableLock({table:f,lockRow:c.lockRow,lockColumn:c.lockColumn,width:j,height:i}),c.lockRow>0&&d.parent().parent().css("overflow-y","hidden");var e=d.parent().parent().parent().height(),g=d.parent().parent().parent().width();d.an_tableLayout(d,g,e)}),e.table.bind(s,function(a,b){g.an_addColumns({table:f,columns:b.data})}),""!=e.addColumns&&g.an_addColumns({table:f,columns:e.addColumns}),e.table.bind(t,function(a,b){"string"==typeof b&&(b=andy.stringToJson(b)),g.an_coverColumns({table:f,columns:b.data})}),""!=e.coverColumns&&g.an_coverColumns({table:f,columns:e.coverColumns}),g.bind(o,function(a,b){var c=g.data("options");g.an_addRow(c,b)}),g.bind(p,function(a,b){g.an_getRow(b)}),g.bind(n,function(a,b){g.an_getAllRowData(b)}),g.bind(u,function(b,c){var d=a.extend(!0,{},e,{callback:c});""==d.checkbox&&""==d.radio||g.an_getChecked(d)}),g.bind(q,function(a,b){g.an_setRow(b)});var b=e.lockTable.lockRow,c=e.lockTable.lockColumn;v&&g.find("thead").children().length>0&&(b=g.find("thead").children().length,e.lockTable.lockRow=b),(b>=1||c>=1)&&g.an_tableLock({table:f,lockRow:b,lockColumn:c,width:j,height:i}),""!=e.sortList&&g.an_creatSortBtn();var d=g.parent().parent().parent().height(),h=g.parent().parent().parent().width();g.an_tableLayout(g,h,d),g.on("click",function(b){var c=a(b.target),d=c.parent();e.onClickRow(d.index(),d),e.onClickCell(c.index(),c)}),g.on("dblclick",function(b){var c=a(b.target),d=c.parent();e.onDblClickRow(d.index(),d),e.onDblClickCell(c.index(),c)})};""!=e.bodyUrl?g.an_creatDataList(e,function(){J()}):J()}},an_addColumns:function(b){var c=a(this),d=c.find("tbody"),e=c.find("thead");if(b.columns&&b.columns.length>0)for(var f in b.columns){var g=b.columns[f],h=g.field,i=g.formatter;e.find("[field]").each(function(b,c){a(c).attr("field")==h&&d.find("tr").each(function(c,d){a(d).find("td").each(function(c,d){c==b&&a(d).append(i)})})})}},an_coverColumns:function(b){var c=a(this),d=c.find("tbody"),e=c.find("thead");if(b.columns&&b.columns.length>0)for(var f in b.columns){var g=b.columns[f],h=g.field,i=g.formatter;e.find("[field]").each(function(b,c){a(c).attr("field")==h&&d.find("tr").each(function(c,d){a(d).find("td").each(function(c,d){c==b&&(a(d).empty(),a(d).append(i))})})})}},an_getChecked:function(b){var c=a(this),d=c.find("tbody"),e=c.find("thead"),f="",g="",h=[];""!=b.checkbox?f=b.checkbox:""!=b.radio&&(f=b.radio),e.find("[field]").each(function(b,c){a(c).attr("field")==f&&d.find("tr").each(function(c,d){a(d).hasClass("current")&&(h.push(a(d).data("tr_data")),a(d).find("td").each(function(c,d){c==b&&(g+=""==g?a(d).text():","+a(d).text())}))})}),b.callback(g,h)},an_addRow:function(b,c){var d=a(this),e=d.find("tbody"),f=(d.find("thead"),b.setTrId);""==f&&(f=d.attr("id"));var g=(e.find("tr").last().attr("id"),(new Date).getTime()),h=f+g,i="<tr id='"+h+"'>",j="",k=c.data;""!=b.setRowHtml&&(j=b.setRowHtml(h,k),i+=j.html,i+="</tr>",e.append(i),a("#"+h).data("tr_data",k),j.callback&&j.callback(h,k,j.html),andy.perform(a("#"+h))),c.callback&&c.callback(k,h,j.html)},an_getRow:function(b){var c=a(this);c.find("tbody"),c.find("thead");b.callback&&b.callback(a("#"+b.id).data("tr_data"))},an_getAllRowData:function(b){var c=a(this),d=c.find("tbody"),e=(c.find("thead"),[]);d.find("tr").each(function(b,c){e.push(a(c).data("tr_data"))}),b&&b(e)},an_setRow:function(b){var c=a(this),d=c.find("tbody"),e=(c.find("thead"),b.id),f=d.find("#"+e);if("string"==typeof b.data){var g=f.data("tr_data");g[b.data]=b.value,f.data("tr_data",g)}else"object"==typeof b.data&&f.data("tr_data",b.data)},an_creatDataList:function(b,c){var d=a(this),e=d.attr("id"),f=b.bodyUrl,g=b.ajaxType,h=function(a){var b=!1;for(var c in a)"children"==c&&(b=a[c]);return b},i=function(c){var f=d.find("tbody"),g=d.find("thead"),i=c.rows,j=c.rows_align||!1,k=c.rows_class,l=[],m=[],n=function(b){var c="";return g.find("th").each(function(d,e){a(e).attr("field")==b&&a(e).hasClass("f-hidden")&&(c=" f-hidden")}),c},o=function(){var a="";if(l.length>0)for(var b=0;b<l.length;b++){for(var c in m)c==l[b]&&(a+=m[c]);"checkbox"==l[b]?a+="<td><input type='checkbox'></td>":"radio"==l[b]&&(a+="<td><input type='radio' name = 'radio_"+d.attr("id")+"'></td>")}else for(var c in m)a+=m[c];return a};g.find("[field]").each(function(b,c){var d=a(c);l[b]=d.attr("field")});var p="",q=function(a,b){for(var c=0;c<a.length;c++){var d="<tr style = 'display:none;'>",e="",f=a[c];for(var g in f){var i="",l="";if(j&&j[0][g]&&(i=j[0][g]),k&&"tree"==k[0][g]){var r=h(f);"string"==typeof r?(l="group n"+(b+1),F="childrenUrl = "+r):"object"==typeof r?(l="group n"+(b+1),q(r,b+1)):l="node n"+(b+1)}var s=n(g);""!=s&&(l+=s),"children"!=g&&(m[g]="<td align = '"+i+"' class = '"+l+"' "+F+">"+f[g]+"</td>")}e=o(),d+=e,d+="</tr>",p+=d,d="",m=[]}},r="",s=function(a,b){for(var c=0;c<a.length;c++){var d="<tr style = 'display:none;'>",e="",f=a[c];for(var g in f){var i="",l="";if(j&&j[0][g]&&(i=j[0][g]),k&&"tree"==k[0][g]){var s=h(f);"string"==typeof s?(l="group n"+(b+1),F="childrenUrl = "+s):"object"==typeof s?(l="group n"+(b+1),q(s,b+1)):l="node n"+(b+1)}var t=n(g);""!=t&&(l+=t),"children"!=g&&(m[g]="<td align = '"+i+"' class = '"+l+"' "+F+">"+f[g]+"</td>")}e=o(),d+=e,d+="</tr>",r+=d,r+=p,d="",p="",m=[]}},t=b.setTrId;""==t&&(t=e);for(var u=0;u<i.length;u++){var v=new Date,w=t+Date.parse(v)+u,x="<tr id='"+w+"'>",y="",z=i[u],A="";if(""!=b.setRowHtml){var B=b.setRowHtml(w,z);y=B.html,A=B.callback||function(){}}else{for(var C in z){var D="",E="",F="";if(j&&j[0][C]&&(D=j[0][C]),k&&"tree"==k[0][C]){var G=h(z);"string"==typeof G?(E="group n1",F="childrenUrl = "+G):"object"==typeof G?(E="group n1",s(G,1)):E="node n1"}else k&&(E=k[0][C]);var H=n(C);""!=H&&(E+=H),"children"!=C&&(m[C]="<td align = '"+D+"' class = '"+E+"' "+F+">"+z[C]+"</td>")}y=o()}if(x+=y,x+="</tr>",x+=r,r="",m=[],f.append(x),a("#"+w).data("tr_data",z),""!=A&&A(w,z,y),z.checked&&1==z.checked){a("#"+w).addClass("current");var I=a("#"+w).find("input");"checkbox"!=I.attr("type")&&"radio"!=I.attr("type")||I.prop("checked",!0)}y=""}""!=b.setRowHtml&&andy.perform(d)};"string"==typeof f?"get"==g?andy.loaddata(f,b.urlParams,function(a){"string"==typeof a&&(a=andy.stringToJson(a)),i(a),b.onLoadComplete(a),c()}):"post"==g&&andy.postdata(f,b.urlParams,function(a){"string"==typeof a&&(a=andy.stringToJson(a)),i(a),b.onLoadComplete(a),c()}):"object"==typeof f&&(i(f),c())},an_tableInsertList:function(b,c){for(var d=b.parent(),e=0;e<c.length;e++){var f="<tr>",g=c[e],h=0;for(var i in g){var j="",k="",l="";d.children().each(function(b,c){var d=a(c);h==b&&(j=d.attr("align"),(d.hasClass("group")||d.hasClass("node"))&&(k="node n2"))}),"children"!=i&&(f+="<td align = '"+j+"' class = '"+k+"' childrenUrl = '"+l+"'>"+g[i]+"</td>"),h+=1}f+="</tr>",d.after(f)}},an_tableLayout:function(b,c,d){var e=17,f=b[0].id,g=b,h="divBoxing-"+f,i="divBoxingbody-"+f,j="divBoxinghead-"+f,k="divBoxingfixed-"+f,l=a("#"+h),m=a("#"+j),n=a("#"+i),o=a("#"+k),p=a("#"+f+"_h"),q=a("#"+f+"_w"),r=d,s=c;g.height()<=d&&(e=0),l.parent().width(s).height(r),l.width(s).height(r),m.width(l.width()-e),p.height(g.height()),n.height(l.height()-e),q.width(g.width());var t=function(a,b){if(a.parent().is("td")){a.prop("checked",b);var c=a.parents("tr");if(b){c.addClass("current");var d=c.data("tr_data");d?d.checked=!0:d={},d.checked=!0,c.data("tr_data",d)}else{c.removeClass("current");var d=c.data("tr_data");d?d.checked=!1:d={},d.checked=!1,c.data("tr_data",d)}}},u=function(b,c,d){c.find("input").each(function(c,e){var f=a(e);"number"==typeof b&&b!=c||f.prop("checked")!=d&&t(f,d)})},v=function(a){l[0]?u("",l.find("table"),a):u("",g,a),u("",m.find("table"),a),u("",n.find("table"),a),u("",o.find("table"),a)},w=function(a,b){l[0]?u(a,l.find("table"),b):u(a,g,b),u(a,m.find("table"),b),u(a,n.find("table"),b),u(a,o.find("table"),b)},x=function(a,b){var c=a.children("."+b),d=c.attr("class");return d},y=function(a,b){var c=x(a,b),d=c.split(" "),e=(d[1].substr(0,1),parseInt(d[1].substr(1,d.length)));return e},z=function(a){var b=x(a,"node"),c=b.split(" "),d=c[1].substr(0,1),e=parseInt(c[1].substr(1,c.length));e>=1&&(e-=1);var f=a.prevAll(".group"+d+e).first();return 0==e&&(f=null),f},A=function(b,c,d,e){var f=b.attr("class");if(f&&f.substr(0,f.length-1)==c.substr(0,c.length-1)&&f.substr(f.length-1,f.length)>c.substr(c.length-1,c.length))e?a(b).css("display",""):a(b).css("display","none");else if(!f)if(e){var g=z(b);g&&g.children("td").hasClass("open")&&a(b).css("display","")}else{var g=z(b),h=y(d,"group"),i=y(b,"node");(g&&0==g.children("td").hasClass("open")||i>h)&&a(b).css("display","none")}},B=function(b){b.find("input").each(function(b,c){var d=a(c);if(d.parent().is("th")||d.parent().is("td")){if(0==g.data("options").checkEnable)return!1;d.unbind("click"),d.click(function(a){if(d.prop("checked")&&"checkbox"==d.attr("type")){d.parents("tr").addClass("current");var c=d.parents("tr");c.data("tr_data")||c.data("tr_data",{checked:!0});var e=c.data("tr_data");e.checked=!0,w(b,!0),d.parent().is("th")&&"checkbox"==d.attr("type")&&v(!0)}else if("checkbox"==d.attr("type")){d.parents("tr").removeClass("current"),w(b,!1);var c=d.parents("tr"),e=c.data("tr_data");e.checked=!1,d.parent().is("th")&&"checkbox"==d.attr("type")&&v(!1)}d.prop("checked")&&"radio"==d.attr("type")&&(d.parents("tr").siblings().removeClass("current"),d.parents("tr").addClass("current"))})}}),b.find(".group").each(function(e,f){var h=a(f),i=h.parent(),j=h.attr("class"),k=j.split(" ");j=k[0]+k[1],i.addClass(j),h.unbind("click"),h.click(function(e){var f=a(e.target);if(f.find("span").hasClass("quarters-loader"))return!1;var h=f.parent(),i=h.attr("class").split(" ")[0],j="<span class='quarters-loader' style = 'width:18px;height:18px;margin-left:8px'></span>",k=!1;if(f.hasClass("open")?(k=!1,f.removeClass("open")):(k=!0,f.addClass("open")),f.attr("childrenUrl"))f.append(j),andy.loaddata(f.attr("childrenUrl"),function(a){f.find("span").remove(".quarters-loader"),g.an_tableInsertList(f,a),f.attr("childrenUrl",""),b.an_tableLayout(b,c,d)});else{h.nextUntil("."+i).each(function(b,c){A(a(c),i,h,k)});var l=m.find("tbody tr").eq(h.index());l.nextUntil("."+i).each(function(b,c){A(a(c),i,l,k)});var p=n.find("tbody tr").eq(h.index());p.nextUntil("."+i).each(function(b,c){A(a(c),i,p,k)});var q=o.find("tbody tr").eq(h.index());q.nextUntil("."+i).each(function(b,c){A(a(c),i,q,k)});var r=g.parent().parent().parent().height(),s=g.parent().parent().parent().width();g.an_tableLayout(g,s,r)}})})};B(l[0]?l.find("table"):g),B(m.find("table")),B(n.find("table")),B(o.find("table"))},an_tableLock:function(b){var c=a.extend({table:"lockTable",lockRow:0,lockColumn:0,width:"100%",height:"100%",lockRowCss:"lockRowBg",lockColumnCss:"lockColumnBg"},b),d=c.table,e=a("#"+d),f="an-datagrid",g="divBoxing-"+d,h="divBoxingbody-"+d,i="divBoxinghead-"+d,j="divBoxingfixed-"+d,k=50,l=1,m=100,n=a("<div id='"+g+"'></div>").scroll(function(a){
a.target.scrollTop>0&&(q.css({"z-index":l}),p.css({"z-index":k})),a.target.scrollLeft>0&&(q.css({"z-index":k}),p.css({"z-index":l})),q.stop().animate({scrollTop:a.target.scrollTop+"px"},0),p.stop().animate({scrollLeft:a.target.scrollLeft+"px"},0)});n.css({width:c.width,height:c.height,overflow:"auto",position:"relative",clear:"both"}),e.wrap(n),e.addClass("tbLock");var o=a("#"+g);o.after("<div id = '"+i+"'></div>"),o.after("<div id = '"+h+"'></div>"),o.after("<div id = '"+j+"'></div>");var p=a("#"+i),q=a("#"+h),r=a("#"+j),s=(c.lockRow*c.lockColumn,17),t=0,u=0;if(c.lockRow>0)for(var v,w=0;w<c.lockRow;++w){v=e.find("thead tr:eq("+w+") >th").addClass("LockRow").addClass(c.lockRowCss),v[w]||(v=e.find("tbody tr:eq("+w+") >td").addClass("LockRow").addClass(c.lockRowCss));var x=v[w].offsetHeight;a(v[w]).attr("rowspan")&&(x/=parseInt(a(v[w]).attr("rowspan"))),t+=x;for(var y=0;y<c.lockColumn;++y)v&&(e.find("thead tr th:eq("+y+")").addClass("LockCell"),v.find("td:eq("+y+")").addClass("LockCell").addClass(c.lockRowCss))}if(c.lockColumn>0)for(var v,z,A=a("#"+d+" tr").length,w=c.lockRow;w<A;++w){v=e.find("tr:eq("+w+")"),z=e.find("thead tr:eq(0) >th");for(var y=0;y<c.lockColumn;++y)w==c.lockRow&&(u+=z[y].offsetWidth),v.find("td:eq("+y+")").addClass("LockCell").addClass(c.lockColumnCss)}var B=o.width()-s;p.width(B);var z=e.clone(!0).attr({id:d+"_h"});z.height(e.height()),p.css({position:"absolute",top:"0px",left:"0px",overflow:"hidden"}),p.height(t),p.append(z),z.attr("optipns",null),z.attr(f,null),q.css({position:"absolute",top:"0px",left:"0px",overflow:"hidden"});var C=o.height()-s;q.height(C);var D=e.clone(!0).attr({id:d+"_w"});D.width(e.width()),q.width(u),q.append(D),D.attr("options",null),D.attr(f,null),r.css({position:"absolute",top:"0px",left:"0px",overflow:"hidden"}),r.css({"z-index":m});var E=e.clone(!0).attr({id:d+"_f"});r.width(u).height(t),r.append(E),E.width(e.width()).height(e.height()),E.attr("options",null),E.attr(f,null),t>0&&u>0&&e.bind("layout",function(){var a=o.parent().parent().height(),b=o.parent().parent().width();o.parent().width(b).height(a),o.width(b).height(a),E.width(e.width()).height(e.height()),p.width(o.width()-s),z.height(e.height()),q.height(o.height()-s),D.width(e.width())})},an_tableSetView:function(b,c){var d=b[0].id,e=b,f="divBoxing-"+d,g="divBoxingbody-"+d,h="divBoxinghead-"+d,i="divBoxingfixed-"+d,j=a("#"+f),k=a("#"+h),l=a("#"+g),m=a("#"+i),n=e.an_datagrid("getHeadJson",e),o=function(b){var d=function(){var d=0,e="",f="",g=function(a){for(var b=0;b<a.length;b++){var h=a[b];if(c.layer==h.layer&&c.jsonIndex==d){e=h;break}if(h.children.length>0?(f=h,g(h.children)):d+=1,""!=e)break}};g(n);for(var h=0,i=0;i<f.children.length;i++){var j=f.children[i];"open"==j.view&&(h+=1)}b.find("thead tr").each(function(b,c){a(c).find("th").each(function(c,d){b==parseInt(f.layer)&&c==parseInt(f.th_index)&&(h>0?(a(d).removeClass("f-hidden"),a(d).attr("colspan",h),f.view="open"):0==h&&(a(d).addClass("f-hidden"),f.view="close"))})})},f=function(){var d=0,e="",f="",h=function(a){for(var b=0;b<a.length;b++){var g=a[b];if(c.layer==g.layer&&c.jsonParentIndex==g.jsonParentIndex){e=g;break}if(g.children.length>0&&(f=g,d+=1,h(g.children)),""!=e)break}},i=function(c){for(var d=0;d<c.children.length;d++){var e=c.children[d];b.find("thead tr").each(function(b,d){a(d).find("th").each(function(d,f){if(b==parseInt(e.layer)&&d==parseInt(e.th_index)){var h=a(f);"open"==c.view?(h.removeClass("f-hidden"),e.view="open"):(h.addClass("f-hidden"),e.view="close"),g(e)}})}),e.children.length>0&&i(e.children)}},j=function(a){for(var b=0,c=0;c<a.children.length;c++){var d=a.children[c];"open"==d.view&&(b+=1)}return b};h(n),i(e),j(e)>0&&b.find("thead tr").each(function(b,c){a(c).find("th").each(function(c,d){if(b==parseInt(e.layer)&&c==parseInt(e.th_index)){a(d);a(d).attr("colspan",j(e))}})})},g=function(c){b.find("tbody tr").each(function(b,d){a(d).find("td").each(function(b,d){b==parseInt(c.jsonIndex)&&("open"==c.view?a(d).removeClass("f-hidden"):a(d).addClass("f-hidden"))})})},h=b.find("thead tr").length;b.find("thead tr").each(function(b,i){a(i).find("th").each(function(i,j){b==parseInt(c.layer)&&i==parseInt(c.th_index)&&(a(j).hasClass("f-hidden")?(a(j).removeClass("f-hidden"),c.view="open"):(a(j).addClass("f-hidden"),c.view="close"),n=e.an_datagrid("getHeadJson",e),g(c),b>0?d():b<h-1&&f())})})};j.length>0?(o(j),o(k),o(l),o(m)):o(e)},an_tableView:function(){for(var b={},c="",d=0;d<arguments.length;d++){var e=arguments[0];"object"==typeof e?b=e:"string"==typeof e&&(c=e)}var f=a(this),g=f.attr("id")+"_dialog",h=f.attr("id")+"_tree",i="EVENT_GET_JSON";if(""!=c){if("getJson"==c){var j=arguments[1];f.trigger(i,j)}}else{var k=a.extend({width:400,height:430,setHeadJson:"",postUrl:"",postSuccess:function(){},onTreeCheck:function(){}},b),l="<div class='u-p-l-bottom u-upload-bot' style = 'width:100%;height:40px;background:#EEE;position:absolute;bottom:0px;left:0px;_top:"+(k.height-45)+"px;_left:5px;_z-index:10000;'><div class='f-right f-p-xs'><a href='javascript:;' class='u-button-default success submit' id = 'submit_btn' style='float:left; margin-left:10px;'>确认</a></div></div>";a(document).an_dialog({id:g,aniClose:!1,locMyself:!0,onBeforeClose:function(){return!0},title:"显示隐藏列",html:"<div class='' style = 'height:"+(k.height-85)+"px;overflow-y:auto'><ul id='"+h+"' class='ztree'></ul></div>"+l,width:k.width,height:k.height}),dialog=a("#"+g);var m=dialog.find("#submit_btn"),n=!1,o=function(a){f.an_datagrid("tableView",a)},p=function(b){var c=a.fn.zTree.getZTreeObj(h),d=c.getNodeByParam("id",b.id);c.checkNode(d,!0,!1)},q=function(b,c,d){var e={treeObj:null,callback:{onCheck:function(a,b,c){k.onTreeCheck(c),o(c)}},check:{enable:!0,chkStyle:"checkbox",chkboxType:{Y:"sp",N:"sp"}},data:{simpleData:{enable:!0}}};c&&(e=a.extend(e,c));var f="";if(d){a.fn.zTree.init(a("#"+b),e,d),f=a("#"+b);for(var g=0;g<d.length;g++)"close"==d[g].view&&p(d[g])}else op&&op.url};m.on("click",function(b){if(n)return!0;if(n=!0,""==k.postUrl)n=!1,dialog.an_dialog("close");else{var c=f.an_datagrid("getHeadJson",f);a.post(k.postUrl,c,function(a,b,c){"success"==b?(alert("状态已经保存"),k.postSuccess(),n=!1,dialog.an_dialog("close")):(alert(c),n=!1)})}}),f.bind(i,function(a,b){var c=f.an_datagrid("getHeadJson",f);b(c)});var r=f.an_datagrid("getHeadJson",f);q(h,null,r)}},an_creatSortBtn:function(){var b=a(this),c=b.attr("id"),d=b.data("options"),e=d.lockTable,f=d.sortList.field,g=d.sortList.sort||"descending",h=d.sortList.icon||"<div class = 'm-icon'><i class='iconfont'>&#xe705;</i></div>",i=d.sortList.iconb||"<div class = 'm-icon'><i class='iconfont'>&#xe706;</i></div>";(e.lockColumn>0||e.lockRow>0)&&(b=a("#"+c+"_h"));var j=function(b){g="descending"==g?"ascending":"descending",b.replaceWith("descending"==g?i:h),b.click(function(b){j(a(b.target)),d.onSortClick(f,g)})};b.find("thead tr th").each(function(b,c){a(c).attr("field")==f&&(a(c).append("descending"==g?i:h),a(c).find(".m-icon").click(function(b){j(a(b.target)),d.onSortClick(f,g)}))})}})}(jQuery),function(a){a.fn.extend({an_tabs:function(){var b={},c="",d=arguments[0];"object"==typeof d?b=d:c=d;var e=a.extend({tabsId:"",index:1,fit:!0,autoActive:!0,height:0,width:0,tabsEvent:"click",hidden:[],onClick:function(){}},b),f={head:"m-tabs-header",body:"m-tabs-content",layouted:"layouted",hidden:"f-hidden",item:"item",active:"active",headTop:"head-top",headLeft:"head-left",headRight:"head-right",headBottom:"head-bottom"},g=a(this);""==e.tabsId&&(g=andy.setRandomId(g,"tabs_"),e.tabsId=g.attr("id"));var h=g.children("."+f.head),i=g.children("."+f.body),j=(i.children("."+f.item),"<div class='iconfont left-bar'>&#xe614;</div>"),k="<div class='iconfont right-bar'>&#xe607;</div>",l="SHOW_EVENT",m=g.attr("options");if(m){m="{"+m+"}",m=andy.stringToJson(m);for(var n in m)"true"==m[n]?e[n]=!0:"false"==m[n]?e[n]=!1:e[n]=m[n]}g.data("fit",e.fit);var o=function(b){i.children().each(function(c,d){var g=a(d);b==c?(g.hasClass(f.active)||g.addClass(f.active),g.hasClass(f.layouted)||(0==e.autoActive&&g.append(g.data("content")),andy.perform(g),andy.layout(g),g.addClass(f.layouted))):g.removeClass(f.active)})},p=function(a){return e.hidden==[]?1:"number"==typeof e.hidden[a]?e.hidden[a]:void 0};if(""!=c){if("hidden"==c){var q=function(a){for(var b=0,c=0;c<a.length;c++)if(1==a[c]){b=c;break}return b},r=arguments[1],s=q(r);e.hidden=r,o(s),h.find("li").each(function(b,c){var d=a(c);d.removeClass(f.active),0==p(b)?d.hide():1==p(b)&&(d.show(),b==s&&d.addClass(f.active))})}else if(c="show"){var t=parseInt(arguments[1]);t<0&&(t=0),g.trigger(l,t)}}else{g[0]&&(g[0].option=e);var u,v,w=parseInt(i.css("padding-left"));w||(w=0);var x=parseInt(i.css("border-left"));x||(x=0);var y=parseInt(i.css("border-bottom"));y||(y=0);var z=0,A=0,B=function(a){var b=E(),c=h.width()-2*u.outerWidth()-2*h.find("li").length-2,d=h.find("ul"),e="auto"==d.css("left")?0:parseInt(d.css("left")),f=e+c*a;f>0?f=0:null,f<-b?f=e:null,-f>b-c?f=c-b:null,d.animate({left:f},300)},C=function(){h.append(j),h.append(k),u=h.find(".left-bar"),u.hide(),u.click(function(){B(1)}),v=h.find(".right-bar"),v.hide(),v.click(function(){B(-1)})};g.hasClass(f.headTop)||g.hasClass(f.headLeft)||g.hasClass(f.headRight)||g.hasClass(f.headBottom)?g.hasClass(f.headTop)?(z=h.outerHeight(),C()):g.hasClass(f.headLeft)?A=h.outerWidth():g.hasClass(f.headRight)?A=h.outerWidth():g.hasClass(f.headBottom)&&(z=h.outerHeight()):(z=h.outerHeight(),C());var s=function(b){h.find("li").each(function(c,d){var e=a(d);b==c?e.hasClass(f.active)||e.addClass(f.active):(0==p(c)&&e.hide(),e.removeClass(f.active))}),0==e.autoActive&&i.children().each(function(c,d){var e=a(d);if(b!=c&&!e.hasClass(f.layouted)){var g=e.html();g&&e.data("content",g),e.empty()}}),o(b)},D=function(){g.children().find(f.head)&&s(e.index-1),h.find("li").each(function(b,c){var d=a(c);d.find(".close").click(function(a){d.addClass("f-hidden"),e.hidden[b]=0,s(0),a.stopPropagation()}),d.bind(e.tabsEvent,function(a){s(b),e.onClick(a),g.trigger(andy.EVENT_CLICK,b+1)})})},E=function(){var b=0;return h.find("li").each(function(c,d){b+=a(d).outerWidth()}),b},F=function(){var b=g.parent().height(),c=g.parent().width();g.outerHeight(b).outerWidth(c),i.outerHeight(b-z).outerWidth(c-A);var d=i.height(),e=i.width();i.children().each(function(b,c){var f=a(c);f.outerHeight(d).outerWidth(e)}),E()>h.width()&&u?(h.addClass("overflow"),h.find("ul").width(2*h.width()),u.show(),v.show()):u&&(h.removeClass("overflow"),u.hide(),v.hide())};if(g.bind(l,function(a,b){s(b)}),g.data("fit"))F(),g.bind("layout",function(){F()});else{var G=g.parent().height(),H=g.parent().width();e.height>0&&(G=e.height),e.width>0&&(H=e.width),g.outerHeight(G).outerWidth(H),i.outerHeight(G-z).outerWidth(H-A);var I=i.height(),J=i.width();i.children().each(function(b,c){var d=a(c);d.outerHeight(I).outerWidth(J),d.outerWidth(J)})}D()}}})}(jQuery),function(a){a.fn.extend({switchs:function(){var b=function(a,b){var c,d;a.find("i").remove(),a.removeClass("on off"),c=b?'<i class="iconfont ">&#xe61c;</i>':'<i class="iconfont ">&#xe61d;</i>',d=b?"on":"off",a.addClass(d).append(c).addClass("switchState")};Config={init:function(c){var d={changeBefor:function(a){},changeAfter:function(a){}},e=a(this),f=e.children("input"),g=!!f.is(":checked");e.hasClass("switchState")||b(e,g);var h=a.extend(!0,d,c||{});e.unbind("click"),e.on("click",function(c){if(c.stopPropagation(),h.changeBefor(f),!f.prop("disabled")){var d=f.is(":checked");f.prop("checked",!d),b(a(this),!d),h.changeAfter(f)}})},setEnable:function(){a(this).children("input").prop("disabled",arguments[1])},setState:function(){b(a(this),arguments[1]),a(this).children("input").prop("checked",arguments[1])}};var c=arguments[0];if(Config[c])c=Config[c];else{if("object"!=typeof c&&c)return a.error("Something bad happened"),this;c=Config.init}return c.apply(this,arguments)}})}(jQuery),function(a,b){var c=1,d=function(a){if(""!==a){if("string"==typeof a){var b=a.split("-");if(3===b.length&&4===b[0].length){var c=~~b[0],d=~~b[1]-1,e=~~b[2],f=new Date(c,d,e);return f.getFullYear()===c&&f.getMonth()===d&&f.getDate()===e}}return!1}},e=function(a){var b=new Array("~","`","!","@","#","$","%","^","&","*","{","}","[","]","(",")");b.push(":",";","'","|","\\","<",">","?","/","<<",">>","||","//"),b.push("admin","administrators","administrator","管理员","系统管理员"),b.push("select","delete","update","insert","create","drop","alter","trancate"),a=a.toLowerCase();for(var c=0;c<b.length;c++)if(a.indexOf(b[c])>-1)return!1;return!0},f=function(a){a=a.toUpperCase();var b={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "};if(!b[a.substr(0,2)])return!1;if(!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(a))return!1;var c,d;if(c=a.length,15==c){d=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);var e,f=a.match(d),g=new Date("19"+f[2]+"/"+f[3]+"/"+f[4]);if(e=g.getYear()==Number(f[2])&&g.getMonth()+1==Number(f[3])&&g.getDate()==Number(f[4])){var h,i=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),j=new Array("1","0","X","9","8","7","6","5","4","3","2"),k=0;for(a=a.substr(0,6)+"19"+a.substr(6,a.length-6),h=0;h<17;h++)k+=a.substr(h,1)*i[h];return a+=j[k%11],!0}return!1}if(18==c){d=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);var e,f=a.match(d),g=new Date(f[2]+"/"+f[3]+"/"+f[4]);if(e=g.getFullYear()==Number(f[2])&&g.getMonth()+1==Number(f[3])&&g.getDate()==Number(f[4])){var l,h,i=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),j=new Array("1","0","X","9","8","7","6","5","4","3","2"),k=0;for(h=0;h<17;h++)k+=a.substr(h,1)*i[h];return l=j[k%11],l==a.substr(17,1)}return!1}return!1},g={trim:{check:function(a){return a.value=a.value.replace(/(^\s*)|(\s*$)/g,""),!0}},required:{message:"不能为空",placeholder:"请输入文字...",check:function(a){return""!==a.value&&a.value!==g.required.placeholder}},int:{message:"不是整数，请输入整数",placeholder:"请输入整数",check:function(a){return/^\-?\d+$/.test(a.value)}},mobile:{message:"手机号码不合法",placeholder:"请输入手机号",check:function(a){return/^(13[0-9]|14[57]|15[012356789]|17[0678]|18[0-9])\d{8}$/.test(a.value)}},phone:{message:"座机号码不合法",placeholder:"请输入座机号",check:function(a){var b=/^[0][1-9]{2,3}-[0-9]{5,10}$/,c=/^[1-9]{1}[0-9]{5,8}$/;return a.value.length>9?b.test(a.value):c.test(a.value)}},mobile_phone:{message:"输入号码不合法",placeholder:"请输入手机或者座机号",check:function(a){return g.phone.check(a)||g.mobile.check(a)}},decimal:{message:"不是小数，请输入小数",placeholder:"请输入小数",check:function(a){return/^\-?\d*\.?\d+$/.test(a.value)}},alpha:{message:"包含字母以外的非法字符",placeholder:"请输入字母",check:function(a){return/^[a-z]+$/i.test(a.value)}},alpha_numeric:{message:"包含字母或数字以外的非法字符",placeholder:"请输入字母或数字",check:function(a){return/^[a-z0-9]+$/i.test(a.value)}},alpha_dash:{message:"包含字母或数字及下划线以外的非法字符",placeholder:"请输入字母或数字及下划线等字符",check:function(a){return/^[a-z0-9_\-]+$/i.test(a.value)}},chs:{message:"请输入中文字符",placeholder:"请输入中文字符",check:function(a){return/^[\u4e00-\u9fa5]+$/.test(a.value)}},chs_numeric:{message:"请输入中文字符或数字及下划线等特殊字符",placeholder:"请输入中文字符或数字及下划线等特殊字符",check:function(a){return/^[\\u4E00-\\u9FFF0-9_\-]+$/i.test(a.value)}},qq:{message:"腾讯QQ号从10000开始",placeholder:"请输入QQ号",check:function(a){return/^[1-9]\d{4,10}$/.test(a.value)}},postoffice:{message:"邮编格式错误",placeholder:"请输入邮编",check:function(a){return/^[1-9][0-9]{5}$/.test(a.value)}},idcard:{message:"身份证格式错误",placeholder:"请输入身份证号",check:function(a){return f(a.value)}},ipv4:{message:"ip地址不正确",placeholder:"请输入ip地址",check:function(a){var b=/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i;return b.test(a.value)}},email:{message:"邮箱地址错误",placeholder:"请输入邮箱",check:function(a){return/^([A-Z0-9]+[_|\_|\.]?)*[A-Z0-9]+@([A-Z0-9]+[_|\_|\.]?)*[A-Z0-9]+\.[A-Z]{2,3}$/i.test(a.value)}},url:{message:"URL格式错误",placeholder:"请输入链接",check:function(a){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(a.value)}},quote:{message:"包含非法字符",placeholder:"请输入...",check:function(a){return e(a.value)}},repeat:{message:"密码输入不一致",check:function(a){var b=a.getAttribute("repeat");if(b)var c=a.ownerDocument.getElementById(b);return!!c&&a.value===c.value}},norepeat:{message:"输入重复",check:function(a){var c,d,e=!0,f=a.getAttribute("norepeat");if(f&&g.required.check(a)){var h=b('[norepeat="'+f+'"]');if(h.length>0)for(c=0;c<h.length;c++)if(d=h[c],a!==d&&g.required.check(d)&&a.value===d.value){e=!1;break}}return e}},date:{message:"必须符合日期格式 YYYY-MM-DD",placeholder:"请输入日期 例如：2016-3-2",check:function(a){return d(a.value)}},passport:{message:"护照格式错误或过长",placeholder:"请输入护照号",check:function(a){return/^[a-zA-Z0-9]{4,20}$/i.test(a.value)}},minlength:{message:"最少输入{{minlength}}个字",placeholder:"请输入{{minlength}}个以上字符",check:function(a){var b=a,c=parseInt(b.getAttribute("minlength"),10);return b.value.length>=c}},maxlength:{message:"最多输入{{maxlength}}个字",placeholder:"请输入{{maxlength}}个以下字符",check:function(a){var b=a,c=parseInt(b.getAttribute("maxlength"),10);return b.value.length<=c}},greaterthan:{message:"请输入大于{{greaterthan}}的数字",placeholder:"请输入大于{{greaterthan}}的数字",check:function(a){var b=a,c=parseInt(b.getAttribute("greaterthan"),10),d=parseFloat(b.value);return!isNaN(d)&&d>c}},lessthan:{message:"请输入小于{{lessthan}}的数字",placeholder:"请输入小于{{lessthan}}的数字",check:function(a){var b=a,c=parseInt(b.getAttribute("lessthan"),10),d=parseFloat(b.value);return!isNaN(d)&&d<c}},contains:{message:"必须包含{{contains}}中的一个",placeholder:"必须包含{{contains}}中的一个",check:function(a){for(var b=a.value,c=[].concat(b).map(String),d=(a.getAttribute("contains")||"").split(","),e=!1,f=0,g=c.length;f<g;f++){var h=c[f];if(d.indexOf(h)>=0){e=!0;break}}return e}},contain:{message:"必须包含{{contain}}",placeholder:"请输入包含{{contain}}这样格式的字符",check:function(a){var b=a.value,c=[].concat(b).map(String),d=(a.getAttribute("contain")||"").split(",");if(c.length){h=!0;for(var e=0,f=d.length;e<f;e++){var g=d[e];if(c.indexOf(g)===-1){h=!1;break}}}else var h=!1;return h}},pattern:{message:"必须匹配/{{pattern}}/这样的格式",placeholder:"请输入匹配/{{pattern}}/这样格式的字符",check:function(a){var b=a,c=b.getAttribute("pattern"),d=new RegExp("^(?:"+c+")$");return d.test(b.value)}}},h=function(a){var c,d=b(a),e=d.attr("placeholder");e&&!d.attr("combo")&&(d.parent().append("<div class='ie-placeholder place'>"+e+"</div>"),c=d.parent().find(".ie-placeholder"),""==d[0].value?c.show():c.hide(),c.click(function(a){b(this).hide();var c=b(this).parent().find("[placeholder]");c[0].click(),c[0].focus()}),d.blur(function(){setTimeout(function(){""==d.val()&&d.parent().find(".ie-placeholder").show()},300)}),d.focus(function(){b(this).parent().find(".ie-placeholder").hide()}))},i="<div class = 'u-input-cor'></div>",j="<div class = 'u-input-err'></div>",k=function(a){b(a).before(i)},l=function(a){b(a).before(j),setTimeout(function(){},3e3)},m=function(a){b(a).prev().is("div")&&b(a).prev().remove()},n=function(c){var d,e,f,h=!0,i="",j=c.getAttribute("verify");if(!j)return!0;if(b(c).is(":disabled"))return!0;if(""===c.value&&j&&j.indexOf("required")<0)return!0;for(j=j.split(","),f=0;f<j.length;f++){if(e=g[j[f]].check(c),e===!1)return c.getAttribute("message")?i=c.getAttribute("message"):(i=g[j[f]].message,i.indexOf(j[f])>-1&&(i=i.replace("{{"+j[f]+"}}",c.getAttribute(j[f])))),d=b(c).next(".infobox"),a.changeTooltip(c,i),a.showTooltip(c,!0),l(c),e;h=h&&e}return h?(m(c),a.hideTooltip(c),k(c)):l(c),h},o=function(c,d){c.getAttribute("tipPos")?a.tooltip(b(c),c.getAttribute("tipPos"),b(c).attr("title"),"terr"):a.tooltip(b(c),"bottom",b(c).attr("title"),"terr");var e=function(a){return d?d(a.target):n(a.target)};c.getAttribute("validateOnKeyup")?b(c).keyup(e):c.getAttribute("validateOnblur")?b(c).blur(e):b(c).change(e),b(c).unbind("focus"),b(c).bind("focus",function(d){m(b(this)),c.getAttribute("validateOnFocus")?e(d):a.hideTooltip(this)})},p=function(c){var d=c?c.find("[verify]"):b("[verify]");d.each(function(c,d){if(""!==d.getAttribute("verify")){if(d.parentNode.className.indexOf(".m-tooltip")<0){var e=d.getAttribute("verify").split(",");if(o(d),(e+"").indexOf("required")>-1&&b(d).parents(".u-formitem").find("label").append("<span class='f-color-danger'>*</span>"),b(d).parent().parent().hasClass("u-group")&&a.inputLayout(b(d).parent()),!d.getAttribute("placeholder")){var f=g[e[e.length-1]].placeholder;f&&(f.indexOf("{{")>-1&&(f=f.replace("{{"+e[e.length-1]+"}}",d.getAttribute(e[e.length-1]))),d.getAttribute("combo")||d.setAttribute("placeholder",f))}}a.IE()<=9&&0!==a.IE()&&h(d)}})};a.fromInit=p,a.addVerify=function(a,d){var e,f,h={massage:"输入不合法",check:function(){return!0}};e=b.extend(h,d),f="custom"+c,g[f]=e,a.setAttribute("verify",a.getAttribute("verify")?a.getAttribute("verify")+","+f:f),o(a,e.check),c++},a.ajaxVerify=function(c,d){var e,f={async:!1,type:"get",url:"",data:{},dataType:"json",beforeSend:function(){},complete:function(){},success:function(){},error:function(){}};d&&(e=b.extend(f,d),e.success=function(b){b.success?k(c):(b.tipStr&&(a.changeTooltip(c,b.tipStr),a.showTooltip(c,!0)),l(c)),d.success&&d.success(b)},e.error=function(a){alert("error"+a.toString())},o(c,function(a){e.data=d.data?d.data():a.value,b.ajax(e)}))},a.fromVerify=function(a){var c=!0;return b(a).find("[verify]").each(function(a,b){c=n(b)&&c}),c},a.inputCheck=n,a.placeholder4IE=h,b(document).ready(function(){setTimeout(function(){p()},500)})}(andy,jQuery),function(a){a.fn.extend({an_accordion:function(b){var c=a.extend({index:1,isAnimation:!0,animationTime:200,multiple:!1,isAllOpen:!1,fit:!1,height:0,width:0,onClick:function(){}},b),d={head:"panel-head",body:"panel-body",title:"panel-head-title",hidden:"f-hidden",active:"active"},e=a(this),f=e.children().children("."+d.head),g=e.children().children("."+d.body),h=e.attr("options");if(h){h="{"+h+"}",h=andy.stringToJson(h);for(var i in h)"true"==h[i]?c[i]=!0:"false"==h[i]?c[i]=!1:c[i]=h[i]}var j="",k="";if(c.fit){var l=e.parent().height();j="height:"+l+"px";var m=0;e.css("overflow","hidden"),f.each(function(b,c){m+=a(c).outerHeight()}),k="height:"+(l-m)+"px",e.innerHeight(l),g.each(function(b,c){a(c).outerHeight(l-m),a(c).css("overflow-y","auto")})}var n=function(b){var e=c.index;b&&(e=b),g.each(function(b,f){var g=a(f);e>0&&e==b+1?c.isAnimation?c.multiple?g.slideToggle(c.animationTime,function(){andy.layout(g)}):g.slideDown(c.animationTime,function(){andy.layout(g)}):c.multiple?(g.toggleClass(d.hidden),andy.layout(g)):g.removeClass(d.hidden):c.multiple||(c.isAnimation?g.slideUp(c.animationTime):g.addClass(d.hidden))})},o=function(){c.multiple&&!c.isAllOpen?g.each(function(b,e){var f=a(e);c.index>0&&c.index==b+1?c.isAnimation&&f.slideDown(c.animationTime,function(){andy.layout(f)}):c.isAnimation?f.slideUp(c.animationTime):f.addClass(d.hidden)}):c.multiple&&c.isAllOpen?g.each(function(b,d){var e=a(d);c.isAnimation&&e.slideDown(c.animationTime,function(){andy.layout(e)})}):n()},p=function(){g&&o(),f.each(function(b,e){a(e).click(function(e){n(b+1),f.each(function(b,c){a(c).removeClass(d.active)}),a(this).addClass(d.active),c.onClick(e)}),b==c.index-1?a(this).addClass(d.active):c.isAllOpen&&a(this).addClass(d.active)})};p()}})}(jQuery),function(a){a.fn.extend({an_pagination:function(){var b={},c="",d=arguments[0];if("object"==typeof d?b=d:c=d,""==c){var e=a.extend({index:1,total:100,selectListIndex:1,list:[10,20,30,40,50],onSelectPage:function(){}},b),f=a(this),g=f.find("[page-fist]"),h=f.find("[page-prev]"),i=f.find("[page-next]"),j=f.find("[page-last]"),k=f.find("[page-index]"),l=f.find("[page-select]"),m=f.find("[page-refresh]");if(e.pageSize>0)for(var n=0;n<e.list.length;n++)e.pageSize==e.list[n]&&(e.selectListIndex=n+1);var o=e.list[e.selectListIndex-1];e.selectListIndex=parseInt(e.selectListIndex),(e.selectListIndex>1||b.selectListIndex<=e.list.length+1)&&(o=e.list[e.selectListIndex-1],l.val(o)),l&&(o=l.val());var p=parseInt(e.index),q=Math.ceil(parseInt(e.total)/o),r=function(){var a=f.find("[page-counts]"),b=f.find("[page-record]"),c=f.find("[page-index]");a&&a.text(q),c&&c.val(p),b&&b.text("共"+e.total+"条记录")};return k&&(k.focus(function(a){f.unbind("select")}),k.change(function(b){p=a(b.target).val(),/^\-?\d+$/.test(p)&&0!=q&&(p=p<=0?1:p>q?q:p,e.onSelectPage(p,o))}),k.blur(function(a){f.bind("select",function(a){e.onSelectPage(p,o)})})),f.find("[page-select]").change(function(b){e.onSelectPage(p,a(b.target).val()),o=a(b.target).val(),q=Math.ceil(e.total/o),p>q&&(p=1),r()}),f.bind("select",function(a){e.onSelectPage(p,o)}),f.bind("total",function(a,b){e.total=b,q=Math.ceil(e.total/o),p>q&&(p=1),r()}),g&&g.click(function(a){1!=p&&(p=1,r(),e.onSelectPage(p,o))}),h&&h.click(function(a){p>1&&(p-=1,r(),e.onSelectPage(p,o))}),i&&i.click(function(a){p<q&&(p+=1,r(),e.onSelectPage(p,o))}),j&&j.click(function(a){p!=q&&(p=q,r(),e.onSelectPage(p,o))}),m&&m.click(function(a){e.onSelectPage(p,o)}),k&&(k.css("type","number"),k.blur(function(a){p=parseInt(k.val()),e.onSelectPage(parseInt(k.val()),o)})),r(),e}"total"==c&&a(this).trigger("total",arguments[1].total),"select"==c&&a(this).trigger("select")}})}(jQuery),function(a){a.fn.extend({an_datagridPagination:function(){var b={},c="",d=arguments[0];"object"==typeof d?b=d:c=d;var e=a.extend({dpId:"",url:"",urlParams:{},ajaxType:"get",addColumns:"",coverColumns:"",onPaginationSelect:function(){},onLoadComplete:function(){},onClickRow:function(){},onDblClickRow:function(){},onClickCell:function(){},onDblClickCell:function(){}},b),f=a(this);""==e.dpId&&(f=andy.setRandomId(f,"datagrid_pagination_"),e.dpId=f.attr("id"),dpId=e.dpId);var g=f.attr("options");if(g){g="{"+g+"}",g=andy.stringToJson(g);for(var h in g)"true"==g[h]?e[h]=!0:"false"==g[h]?e[h]=!1:e[h]=g[h]}var i,j;if(i="EVENT_LOAD_LIST",j="EVENT_GET_TABLE_CHECKED",""!=c){if("loadListData"==c){var k=arguments[1],l=arguments[2],m=arguments[3],n=arguments[4];0!=l&&(l=!0);var o={url:k,isNewPagination:l,data:m,ajaxType:n};f.trigger(i,o)}else if("getChecked"==c){var p=arguments[1];f.trigger(j,p)}}else{var q=f.find("table"),r=q.attr("id");q=a("#"+r);var s=f.find(".m-pagebar"),t=(s.attr("id"),1),u=function(){if(s[0]){var a="<div class='f-left'> 每页显示<select class='u-select xs auto' page-select = ''><option>10</option><option>20</option><option>30</option><option>40</option><option>50</option></select><button class='u-btn xs texture' page-fist = ''><i class='iconfont'>&#xe60e;</i></button><button class='u-btn xs texture' page-prev = ''><i class='iconfont'>&#xe787;</i></button>第<input type='text' style='width:50px' value='1' class='u-input xs auto' page-index = ''>共<a page-counts>10</a>页<button class='u-btn xs texture' page-next = ''><i class='iconfont'>&#xe788;</i></button><button class='u-btn xs texture' page-last = ''><i class='iconfont'>&#xe60d;</i></button></div><div class='f-right' page-record = ''>共2000记录</div>";s.append(a)}},v=function(b){e.bodyUrl=b;var c=e;if(q.an_datagrid(c),b.total&&0==s.hasClass("promty")){var d={};d=a.extend(!0,b,c,{onSelectPage:function(a,b){w(e.url+"?pageNumber="+a+"&pageSize="+b,"have"),t=a,e.onPaginationSelect&&e.onPaginationSelect(a,parseInt(b))}}),s.empty(),u(),d.urlParams.pageNumber&&(d.index=d.urlParams.pageNumber),s.an_pagination(d),s.addClass("promty")}},w=function(a,b){q.find("tbody").empty();var c=e.urlParams;"have"==b&&(c={});var d=function(a,b,c,d){"get"==c?andy.loaddata(a,b,function(a){d(a)}):andy.postdata(a,b,function(a){d(a)})};"object"==typeof a?(v(a),e.onLoadComplete(a)):"get"==e.ajaxType?d(a,c,"get",function(a){v(a),e.onLoadComplete(a)}):"post"==e.ajaxType&&d(a,c,"post",function(a){v(a),e.onLoadComplete(a)})};""!=e.url&&w(e.url),f.bind(j,function(b,c){var d=a("#"+r);d.an_datagrid("getChecked",function(a,b){c(a,b)})}),f.bind(i,function(b,c){c.isNewPagination&&s.removeClass("promty"),c.ajaxType&&(e.ajaxType=c.ajaxType),c.data&&(e.urlParams=a.extend(!0,{},e.urlParams,c.data)),w(c.url)})}}})}($),function($){$.fn.extend({an_selector:function(){function onTreeClick(a,b){var c={},d=_options.getUrl;d||(d=b?_options.searchUrl:a.dataUrl);""!=d&&(inputText.val()!=_options.searchText&&b&&(c.search=inputText.val()),c.id=a.id,_options.clickTree&&(c=_options.clickTree(a)),d&&""!==d&&andy.loaddata(d,c,function(a){a=andy.stringToJson(a),chooseData=a,changeCenterFrame(a)}))}function changeCenterFrame(a){if(center&&"true"!=center.attr("table-list")){center.empty();for(var b=0;b<a.length;b++){var c=a[b];checkId(right,c.id)||addToCenter(c)}}else{$("#tableOption").find("tbody").empty();for(var b=0;b<a.length;b++){var c=a[b];checkId(right,c.id)||addToCenterList(c)}}}function addToCenter(a){if(center&&checkDataId(chooseData,a.id)&&!checkId(center,a.id)){center.append("<button class='u-btn sm' id = "+a.id+" data = "+a.data+" name = "+a.name+">"+a.name+"</button>");var b=$("#"+a.id);b.click(function(c){clearSelf(b),addToRight(a)})}}function addToRight(a){if(right)if(!checkId(right,a.id)&&_options.selects){right.append("<button class='u-btn sm' id = "+a.id+" data = "+a.data+" name = "+a.name+">"+a.name+"<i class='iconfont'>&#xe602;</i></button>");var b=$("#"+a.id);b.click(function(c){clearSelf(b),"true"!=center.attr("table-list")?addToCenter(a):addToCenterList(a)})}else if(0==_options.selects){right.children("button").each(function(b,c){var d=$(c);clearSelf(d);({id:d.attr("id"),name:d.attr("name"),data:d.attr("data")});"true"!=center.attr("table-list")?addToCenter(a):addToCenterList(a)}),right.append("<button class='u-btn sm' id = "+a.id+" data = "+a.data+" name = "+a.name+">"+a.name+"<i class='iconfont'>&#xe602;</i></button>");var b=$("#"+a.id);b.click(function(c){clearSelf(b),"true"!=center.attr("table-list")?addToCenter(a):addToCenterList(a)})}}function checkId(a,b){var c=!1;return a.children().each(function(a,d){b==$(d).attr("id")&&(c=!0)}),c}function checkDataId(a,b){for(var c=!1,d=0;d<a.length;d++){var e=a[d];b==e.id&&(c=!0)}return c}function clearSelf(a){a.unbind("click"),a.remove()}function getChooseJson(){var str="[";right.children().each(function(a,b){var c=$(b),d="{'id':'"+c.attr("id")+"','name':'"+c.attr("name")+"','data':'"+c.attr("data")+"', 'tId':'"+c.attr("tId")+"'}";str+="["==str?d:","+d}),str+="]";var jstr=eval("("+str+")");return jstr}for(var options={},METHODS={},funstyle="",i=0;i<arguments.length;i++){var a=arguments[0];"object"==typeof a?options=a:"string"==typeof a&&(funstyle=a)}if(""!=funstyle){if(METHODS[funstyle])return METHODS[funstyle](this,arguments[1]);throw"The method of"+funstyle+"is undefined"}var _options=$.extend({treeid:"",selects:!0,treeData:options.url||"",nodes:[],rightNodes:[],searchUrl:"",getUrl:"",searchText:"输入工号/名字",treeTitle:options.leftTitle||"部门结构",setting:"",tableList:!1,cal:function(){},submit:function(){}},options),sel=$(this),center=sel.find("[center]"),right=sel.find("[right]"),choose=sel.find("[choose]"),cancel=sel.find("[cancel]"),submit=sel.find("[submit]"),inputText=sel.find("[inputText]"),search=sel.find("[search]"),treeTitle=sel.find("[treeTitle]"),chooseData=[],currentTreeNode="";if(_options.tableList||(center.wrap("<div class='f-p-sm' center></div>"),center.remove(),center=$("[center]")),0===treeTitle.length)var treeTitle=sel.find("[leftTitle]");var default_setting={data:{simpleData:{enable:!0}}},setting={callback:{onClick:function(a,b,c){currentTreeNode=c,onTreeClick(currentTreeNode)}}};""!=_options.setting&&(setting=$.extend(!0,setting,_options.setting,default_setting)),setting.callback.onClick=function(a,b,c){currentTreeNode=c,onTreeClick(currentTreeNode)};var tree="";if(""==_options.treeData?($.fn.zTree.init($("#"+_options.treeid),setting,_options.nodes),tree=$("#"+_options.treeid)):andy.loaddata(_options.treeData,function(a){a=andy.stringToJson(a),$.fn.zTree.init($("#"+_options.treeid),setting,a),tree=$("#"+_options.treeid)}),_options.rightNodes.length>0)for(var i=0;i<_options.rightNodes.length;i++){var data=_options.rightNodes[i];addToRight(data)}if(treeTitle&&treeTitle.text(_options.treeTitle),choose&&(0==_options.selects&&choose.addClass("f-hidden"),
choose.click(function(){center&&"true"!=center.attr("table-list")?center.children().each(function(a,b){for(var c=0;c<chooseData.length;c++)$(b).attr("id")==chooseData[c].id&&(clearSelf($(b)),addToRight(chooseData[c]))}):($("#tableOption tbody").find("tr").each(function(a,b){for(var c=$(b).attr("id"),d=0;d<chooseData.length;d++)$("#"+c).data("tr_data").id==chooseData[d].id&&addToRight(chooseData[d])}),$("#tableOption tbody").empty())})),cancel&&(0==_options.selects&&cancel.addClass("f-hidden"),cancel.click(function(){right&&right.children().each(function(a,b){clearSelf($(b)),changeCenterFrame(chooseData)})})),submit&&submit.click(function(){_options.submit(getChooseJson()),_options.cal(getChooseJson())}),search&&search.click(function(){onTreeClick(currentTreeNode,!0)}),inputText){inputText.attr("placeholder",_options.searchText);var ie=andy.getBrowser().browser.ie;ie&&ie<8&&(inputText.val(_options.searchText),inputText.blur(function(a){""==$(a.target).val()&&inputText.val(_options.searchText)}),inputText.focus(function(a){$(a.target).val()==_options.searchText&&inputText.val("")}))}var addToCenterList=function(a){$("#tableOption").an_datagrid("addRow",a,function(b,c,d){$("#"+c).on("click",function(b){$(b.target).is("input")&&($(b.target).prop("checked")?($("#"+c).addClass("current"),addToRight(a),$("#"+c).remove()):$("#"+c).removeClass("current"))})})};METHODS.changeCenterFrame=changeCenterFrame},an_selectorMulti:function(){function onTreeClick(a,b){var c={},d=_options.getUrl;d||(d=b?_options.searchUrl:a.dataUrl);""!=d&&(inputText.val()!=_options.searchText&&b&&(c.search=inputText.val()),c.id=a.id,_options.clickTree&&(c=_options.clickTree(a)),d&&""!==d&&andy.loaddata(d,c,function(a){a=andy.stringToJson(a),chooseData=a,changeCenterFrame(a)}))}function changeCenterFrame(a){if(center&&"true"!=center.attr("table-list")){center.empty();for(var b=0;b<a.length;b++){var c=a[b];checkId(right,c.id)||addToCenter(c)}}else{$("#tableOption").find("tbody").empty();for(var b=0;b<a.length;b++){var c=a[b];checkId(right,c.id)||addToCenterList(c)}}}function addToCenter(a){if(center&&checkDataId(chooseData,a.id)&&!checkId(center,a.id)){center.append("<button class='u-btn sm' id = "+a.id+" data = "+a.data+" name = "+a.name+">"+a.name+"</button>");var b=$("#"+a.id);b.click(function(c){clearSelf(b),addToRight(a)})}}function addToRight(a){if(right)if(!checkId(right,a.id)&&_options.selects){right.append("<button class='u-btn sm' id = "+a.id+" data = "+a.data+" name = "+a.name+">"+a.name+"<i class='iconfont'>&#xe602;</i></button>");var b=$("#"+a.id);b.click(function(c){clearSelf(b),"true"!=center.attr("table-list")?addToCenter(a):addToCenterList(a)})}else if(0==_options.selects){right.children("button").each(function(b,c){var d=$(c);clearSelf(d);({id:d.attr("id"),name:d.attr("name"),data:d.attr("data")});"true"!=center.attr("table-list")?addToCenter(a):addToCenterList(a)}),right.append("<button class='u-btn sm' id = "+a.id+" data = "+a.data+" name = "+a.name+">"+a.name+"<i class='iconfont'>&#xe602;</i></button>");var b=$("#"+a.id);b.click(function(c){clearSelf(b),"true"!=center.attr("table-list")?addToCenter(a):addToCenterList(a)})}}function checkId(a,b){var c=!1;return a.children().each(function(a,d){b==$(d).attr("id")&&(c=!0)}),c}function checkDataId(a,b){for(var c=!1,d=0;d<a.length;d++){var e=a[d];b==e.id&&(c=!0)}return c}function clearSelf(a){a.unbind("click"),a.remove()}function getChooseJson(){var str="[";right.children().each(function(a,b){var c=$(b),d="{'id':'"+c.attr("id")+"','name':'"+c.attr("name")+"','data':'"+c.attr("data")+"', 'tId':'"+c.attr("tId")+"'}";str+="["==str?d:","+d}),str+="]";var jstr=eval("("+str+")");return jstr}for(var options={},METHODS={},funstyle="",i=0;i<arguments.length;i++){var a=arguments[0];"object"==typeof a?options=a:"string"==typeof a&&(funstyle=a)}if(""!=funstyle){if(METHODS[funstyle])return METHODS[funstyle](this,arguments[1]);throw"The method of"+funstyle+"is undefined"}var _options=$.extend({treeid:"",selects:!0,treeData:options.url||"",nodes:[],rightNodes:[],tableList:!0,searchUrl:"",getUrl:"",searchText:"输入工号/名字",treeTitle:options.leftTitle||"部门结构",setting:"",submit:function(){}},options),sel=$(this),head=sel.find("[selecthead]"),leftframe=sel.find("[leftframe]"),center=sel.find("[center]"),right=sel.find("[right]"),choose=sel.find("[choose]"),cancel=sel.find("[cancel]"),submit=sel.find("[submit]"),inputText=sel.find("[inputText]"),search=sel.find("[search]"),chooseData=[],currentTreeNode="";_options.tableList||(center.wrap("<div class='f-p-sm' center></div>"),center.remove(),center=$("[center]"));var setShowFrame=function(a){var b=sel.find(".leftframe");b.each(function(b,c){b==a?$(c).show():$(c).hide()})};if("object"==typeof _options.treeTitle){for(var i=0;i<_options.treeTitle.length;i++)head.append("<li index='1' selectbtn style='margin:5px 5px 0 0;'><a href='javascript:;'>"+_options.treeTitle[i]+"</a></li>"),leftframe.append("<div class = 'g-max leftframe' style = 'position:relative;'><div class='panel-head f-b-b'><div class='panel-h-l'><strong class='title' treeTitle>"+_options.treeTitle[i]+"</strong></div></div><div class='panel-body g-h-max'><ul id='"+_options.treeid[i]+"' class='ztree'></ul></div></div>");sel.an_tabs(),andy.layout(leftframe),andy.layout(center.parent()),setShowFrame(0)}var treeTitle=sel.find("[treeTitle]"),selectbtn=sel.find("[selectbtn]");if(0===treeTitle.length)var treeTitle=sel.find("[leftTitle]");var default_setting={data:{simpleData:{enable:!0}}},setting={callback:{onClick:function(a,b,c){currentTreeNode=c,onTreeClick(currentTreeNode)}}};""!=_options.setting&&(setting=$.extend(!0,setting,_options.setting,default_setting)),setting.callback.onClick=function(a,b,c){currentTreeNode=c,onTreeClick(currentTreeNode)};var tree="",createTree=function(a){""==_options.treeData?($.fn.zTree.init($("#"+_options.treeid[a]),setting,_options.nodes),tree=$("#"+_options.treeid[a])):andy.loaddata(_options.treeData[a],function(b){b=andy.stringToJson(b),$.fn.zTree.init($("#"+_options.treeid[a]),setting,b),tree=$("#"+_options.treeid[a])})};if(createTree(0),_options.rightNodes.length>0)for(var i=0;i<_options.rightNodes.length;i++){var data=_options.rightNodes[i];addToRight(data)}if(sel.bind(andy.EVENT_CLICK,function(a,b){setShowFrame(b-1),createTree(b-1)}),choose&&(0==_options.selects&&choose.addClass("f-hidden"),choose.click(function(){center&&"true"!=center.attr("table-list")?center.children().each(function(a,b){for(var c=0;c<chooseData.length;c++)$(b).attr("id")==chooseData[c].id&&(clearSelf($(b)),addToRight(chooseData[c]))}):($("#tableOption tbody").find("tr").each(function(a,b){for(var c=$(b).attr("id"),d=0;d<chooseData.length;d++)$("#"+c).data("tr_data").id==chooseData[d].id&&addToRight(chooseData[d])}),$("#tableOption tbody").empty())})),cancel&&(0==_options.selects&&cancel.addClass("f-hidden"),cancel.click(function(){right&&right.children().each(function(a,b){clearSelf($(b)),changeCenterFrame(chooseData)})})),submit&&submit.click(function(){_options.submit(getChooseJson()),_options.cal(getChooseJson())}),search&&search.click(function(){onTreeClick(currentTreeNode,!0)}),inputText){inputText.attr("placeholder",_options.searchText);var ie=andy.getBrowser().browser.ie;ie&&ie<8&&(inputText.val(_options.searchText),inputText.blur(function(a){""==$(a.target).val()&&inputText.val(_options.searchText)}),inputText.focus(function(a){$(a.target).val()==_options.searchText&&inputText.val("")}))}var addToCenterList=function(a){$("#tableOption").an_datagrid("addRow",a,function(b,c,d){$("#"+c).on("click",function(b){$(b.target).is("input")&&($(b.target).prop("checked")?($("#"+c).addClass("current"),addToRight(a),$("#"+c).remove()):$("#"+c).removeClass("current"))})})};METHODS.changeCenterFrame=changeCenterFrame},an_selectorTree:function(){function initRight(){if(_options.rightNodes.length>0)for(var a=0;a<_options.rightNodes.length;a++){var b=_options.rightNodes[a];addToRight(b);var c=$.fn.zTree.getZTreeObj(_options.treeid),d=c.getNodeByParam("id",b.id);c.checkNode(d,!0,!1)}}function onTreeCheck(a){a&&(a.checked?goCheck(a,!0):goCheck(a,!1))}function goCheck(a,b){if(a&&b)if(a.children&&_options.selects){addToRight(a);for(var c=0;c<a.children.length;c++)goCheck(a.children[c],b)}else addToRight(a);else if(!b)if(a.children){removeToRight(a);for(var c=0;c<a.children.length;c++)goCheck(a.children[c],b)}else removeToRight(a)}function addToRight(a){if(right)if(!checkId(right,a.id)&&_options.selects){right.append("<button class='u-btn sm' id = "+a.id+" data = "+a.data+" name = "+a.name+">"+a.name+"<i class='iconfont'>&#xe602;</i></button>");var b=right.find("#"+a.id);b.click(function(b){removeToRight(a)})}else if(0==_options.selects){var c=$.fn.zTree.getZTreeObj(_options.treeid);right.children("button").each(function(a,b){var d=$(b).attr("id"),e=c.getNodeByParam("id",d);removeToRight(e)}),right.append("<button class='u-btn sm' id = "+a.id+" data = "+a.data+" name = "+a.name+">"+a.name+"<i class='iconfont'>&#xe602;</i></button>");var b=right.find("#"+a.id);b.click(function(b){removeToRight(a)})}}function removeToRight(a){var b=right.find("#"+a.id);clearSelf(b);var c=$.fn.zTree.getZTreeObj(_options.treeid);a.tId||(a=c.getNodeByParam("id",a.id)),c.checkNode(a,!1,!1)}function checkId(a,b){var c=!1;return a.children().each(function(a,d){b==$(d).attr("id")&&(c=!0)}),c}function checkDataId(a,b){for(var c=!1,d=0;d<a.length;d++){var e=a[d];b==e.id&&(c=!0)}return c}function clearSelf(a){a.unbind("click"),a.remove()}function getChooseJson(){var str="[";right.children().each(function(a,b){var c=$(b),d="{'id':'"+c.attr("id")+"','name':'"+c.attr("name")+"','data':'"+c.attr("data")+"'}";str+="["==str?d:","+d}),str+="]";var jstr=eval("("+str+")");return jstr}for(var options={},funstyle="",i=0;i<arguments.length;i++){var a=arguments[0];"object"==typeof a?options=a:"string"==typeof a&&(funstyle=a)}if(""!=funstyle);else{var _options=$.extend({treeid:"",selects:!0,treeData:options.url||"",nodes:[],rightNodes:[],treeTitle:options.leftTitle||"部门结构",submit:function(){}},options),sel=$(this),right=sel.find("[right]"),cancel=sel.find("[cancel]"),submit=sel.find("[submit]"),treeTitle=sel.find("[treeTitle]"),chooseData=[],currentTreeNode="",treeObject=$.fn.zTree.getZTreeObj(_options.treeid);if(0===treeTitle.length)var treeTitle=sel.find("[leftTitle]");var setting={treeId:"1",treeObj:null,callback:{onCheck:function(a,b,c){onTreeCheck(c)}},check:{enable:!0,chkStyle:"checkbox",chkboxType:{Y:"s",N:"s"}},data:{simpleData:{enable:!0}}};_options.selects||(setting.check={enable:!0,chkStyle:"radio"});var tree="";""==_options.treeData?($.fn.zTree.init($("#"+_options.treeid),setting,_options.nodes),tree=$("#"+_options.treeid),initRight()):andy.loaddata(_options.treeData,function(a){a=andy.stringToJson(a),$.fn.zTree.init($("#"+_options.treeid),setting,a),tree=$("#"+_options.treeid),initRight()}),treeTitle&&treeTitle.text(_options.treeTitle),cancel&&(0==_options.selects&&cancel.addClass("f-hidden"),cancel.click(function(){right&&right.children().each(function(a,b){var c=$(b),d=$.fn.zTree.getZTreeObj(_options.treeid),e=c.attr("id"),f=d.getNodeByParam("id",e);removeToRight(f)})})),submit&&submit.click(function(){_options.submit(getChooseJson())})}}}),andy.openSelectorDialog=function(a){var b,c={title:"人员选择",treeTitle:"部门结构",treeData:"/project/tsi/data/department.json",callback:function(a){},cal:function(){}};b=$.extend({},c,a),$(document).an_dialog({id:"openSelector",width:a.width||823,height:455,title:b.title,url:a.url||(a.pathroot||"")+"/andyui/admin/js/selector/selector.html",data:b})},andy.initSelector=function(a){if(a.getAttribute("options")){var b=andy.stringToJson(a.getAttribute("options"));b.callback=function(c){b.rightNodes=c,andy.multiSelect({parent:$(a).find("[selectorListBox]")[0],dataKey:b.dataKey,onDelete:function(a){c.splice(a-1,1)},list:c})},b.rightNodes&&0!==b.rightNodes.length&&b.callback(b.rightNodes),$(a).find("[openSelector]").click(function(){a.className.indexOf("tree-selector")>0?(b.url=(b.pathroot||"")+"/andyui/admin/js/selector/tree-selector.html",b.width=420):a.className.indexOf("multi-selector")>0&&(b.url=(b.pathroot||"")+"/andyui/admin/js/selector/tabs-selector.html"),andy.openSelectorDialog(b)})}},$(document).ready(function(){$(".selector").each(function(a,b){andy.initSelector(b)})})}(jQuery),function(a){a.fn.extend({an_combo:function(){var b={},c="",d=arguments[0];"object"==typeof d?b=d:c=d;var e=a.extend({comboId:"",comboSize:"",touchTargetType:"input",inputVerify:"",showTargetType:"list",changeTarget:!0,inputName:"",showUrl:"",showData:[],checked:[],treeCheckBoxType:{},defaultValue:"下拉选择",treeId:"",treeSetting:{},treeAsync:{},selects:!1,isEnable:!0,isText:!1,row:0,showHeight:200,open:!1,windowAuto:!0,idvalue:"id",valuedata:"value",namevalue:"name",editor:!1,onChange:function(){}},b),f=a(this);if(f.is("input")){var g=f.attr("id");f.removeAttr("id",""),f.removeAttr("an-combo",""),g||(g="combo_"+andy.getRandom(1e4));var h=f.attr("style");f.removeAttr("style"),e.inputName=f.attr("name"),f.removeAttr("name");var i=f.attr("options");i="options = "+i,f.removeAttr("options","");var j="m-combo";f.attr("class")&&(j=f.attr("class"),f.attr("class","")),f.css("type","hidden");var k="<div class = '"+j+"' id = '"+g+"' style = '"+h+"' "+i+" an-combo></div>";f.before(k),f.remove(),f=a("#"+g)}"an-combo"!=f.attr("an-combo")&&f.attr("an-combo","an-combo"),""==e.comboId&&(f=andy.setRandomId(f,"combo_"),e.comboId=f.attr("id"));var l=a(document),m=a(window),n=0,o="EVENT_ROW",p="EVENT_SET_DEFAULT",q="EVENT_GET_VALUE",r="EVENT_GET_ID",s="EVENT_SHOW",t="EVENT_ENABLE",u="EVENT_CHOOSE",v="EVENT_HIDDEN_TARGET",w="EVENT_UPDATE_URL",x="EVENT_TREE",y="click",z=f.attr("options");if(z){z="{"+z+"}",z=andy.stringToJson(z);for(var A in z)if("onChange"==A){var B=z[A];e.onChange=andy.stringToJson(B)}else if("checked"==A){var C=z[A].split(",");e.checked=C}else"true"==z[A]?e[A]=!0:"false"==z[A]?e[A]=!1:e[A]=z[A]}if(e.combo=f,f.data("options",e),e.valueForInput=null,f.find("input").each(function(b,c){"hidden"==a(c).attr("type")&&(e.valueForInput=a(c))}),""!=c)if("row"==c){var D=arguments[1];f&&f[0]&&f.trigger(o,D)}else if("setDefault"==c){var E=arguments[1];f.trigger(p,E)}else if("setCurrentChoose"==c){var F=arguments[1],G={choose:F};f.trigger(u,G)}else if("getValue"==c){var E=arguments[1];f.trigger(q,E)}else if("getChooseId"==c){var E=arguments[1];f.trigger(r,E)}else{if("getShowTarget"==c)return andy.combo("getShowTarget",a("#"+e.comboId));if("setShowTarget"==c){var H=arguments[1];f.trigger(s,H)}else if("addTree"==c){var I=arguments[1];f.trigger(x,I)}else if("isEnable"==c){var J=arguments[1];f.trigger(t,J)}else if("hiddenTarget"==c)f.trigger(v);else if("updateUrl"==c){var K=arguments[1],L={data:K};f.trigger(w,L)}}else{6==andy.IE()&&f.find("ul").each(function(b,c){var d=a(c);d.prev().is("div")||d.before("<div></div>")});var M=function(){var a=!1;return l.height()>m.innerHeight()&&(a=!0),a},N=function(){f.showTarget.children().length>e.row&&0!=e.row?(f.showTarget.addClass("u-overflow-y"),n=e.row*f.showTarget.children().outerHeight(),f.showTarget.height(n)):(f.showTarget.removeClass("u-overflow-y"),n=0,f.showTarget.css("height",""))},O=function(a){a<f.showTarget.height()&&(f.showTarget.addClass("u-overflow-y"),f.showTarget.outerHeight(a))},P=function(a,b){var c=a.offset(),d=c.left,g=c.top,h=l.width(),i=(l.height(),l.scrollTop()),j=b.outerWidth();N();var k=b.height(),n=0;M()&&(n=17),h-d-n>=j?b.css({left:"0px",right:"auto"}):b.css({left:"auto",right:"0px"});var o=f.touchTarget.outerHeight(),p=m.height()-(g-i),q=m.height()-p-o;e.windowAuto?p>=q?(b.css("top",o+"px"),O(p-o)):(O(m.height()-p),k=f.showTarget.outerHeight(),b.css("top",-k+"px")):(b.css("top",o+"px"),O(p-o))},H=function(a,b){var c=a.offset(),d=c.left,g=c.top,h=l.width(),i=(l.height(),l.scrollTop()),j=b.outerWidth(),k=b.height(),n=0;M()&&(n=17),h-d-n>=j?b.css({left:"0px",right:"auto"}):b.css({left:"auto",right:"0px"});var o=f.touchTarget.outerHeight(),p=m.height()-(g-i),q=m.height()-p-o;e.windowAuto?p>=q?(b.css("top",o+"px"),O(p-o)):(O(m.height()-p),k=f.showTarget.outerHeight(),b.css("top",-k+"px")):(b.css("top",o+"px"),O(p-o))},Q=function(b,c){c&&f.showTarget.empty(),b instanceof jQuery?f.showTarget.replaceWith(b):f.showTarget.replaceWith(a(b)),andy.combo({combo:f,showEvent:y,showComplete:function(){f.css({"z-index":99999,position:"relative"}),f.showTarget.css("z-index",99999),"list"==e.showTargetType?P(f,f.showTarget):b(f,f.showTarget)},hiddenComplete:function(){f.css({"z-index":"",position:"static"}),f.showTarget.css("z-index","")}}),e.showData=[],f.an_combo_bindEvent(e)},R=function(){if(f){var a=f.touchTarget;0==a.is("input")&&(a=a.find("input")),1==f.data("isEnable")?(a.removeAttr("disabled"),f.removeClass("u-disabled")):(a.attr("disabled","disabled"),f.addClass("u-disabled"))}},S=function(a,b,c){a.data("selects",e.selects),a.data("isEnable",e.isEnable),a.data("isText",e.isText),a.an_combo_creatTouch(e),a.an_combo_creatShow(e)};if(0==f.children().length)S(f,e.touchTargetType,e.showTargetType);else{var T=andy.combo("getTouchTarget",f);T.is("a")&&(e.touchTargetType="button",""==e.inputName&&(e.inputName=e.comboId),null==e.valueForInput&&(f.append("<input type = 'hidden' name = '"+e.inputName+"'>"),e.valueForInput=f.find("input"))),S(f,e.touchTargetType,e.showTargetType),0==e.editor?f.find(".u-input").addClass("u-diseditor"):f.find(".u-input").attr("readonly",null)}andy.combo({combo:f,showEvent:y,showComplete:function(){f.css({"z-index":99999,position:"relative"}),f.showTarget.css("z-index",99999),"list"==e.showTargetType?P(f,f.showTarget):H(f,f.showTarget)},hiddenComplete:function(){f.css({"z-index":"",position:"static"}),f.showTarget.css("z-index","")}}),R(),e.valueForInput=f.touchTarget,0==e.valueForInput.is("input")&&e.valueForInput.find("input").each(function(b,c){e.valueForInput=a(c)}),e.valueForInput.is("input")&&(""==e.inputName&&void 0==e.valueForInput.attr("name")?(e.inputName=e.comboId+"_input",e.valueForInput.attr("name",e.inputName)):void 0==e.valueForInput.attr("name")&&e.valueForInput.attr("name",e.inputName)),f.bind(o,function(a,b){e.row=b}),f.bind(s,function(a,b){Q(b,!0)}),f.bind(x,function(a,b){}),f.showTarget.is("ul"),f.bind(p,function(b,c){var d=f.touchTarget,g="",h="",i="";0==d.is("input")&&(d=d.find("input")),f.showTarget.is("ul")&&f.showTarget.children().each(function(b,c){var d=a(c);if(d.hasClass("active")&&d.removeClass("active"),e.checked.length>0)for(var f in e.checked)d.attr("listId")==e.checked[f]&&(d.addClass("active"),""==i?(g=d.text(),h=d.attr("value"),i=d.attr("listId")):(g+=","+d.text(),h=d.attr("value"),i+=","+d.attr("listId")))}),d.is("input")&&(e.checked.length>0?(d.attr({value:g,idValue:i,valueData:h}),d.val(g)):(d.attr({value:e.defaultValue,idValue:"",valueData:""}),d.val(e.defaultValue))),c&&c(h,i)}),f.bind(t,function(a,b){f.data("isEnable",b),R()}),f.bind(v,function(a){andy.combo("hiddenTarget",f)}),f.bind(w,function(a,b){f.an_combo("setDefault");var c=b.data,d=f.data("options");f.showTarget.empty(),d.combo=f,"string"==typeof c?d.showUrl=c:"object"==typeof c&&(d.showData=c),f.an_combo_creatShow("eventBind",d)}),f.an_combo_creatShow("eventBind",e),f.bind(u,function(a,b){})}},an_combo_creatTouch:function(){for(var b={},c="",d=0;d<arguments.length;d++){var e=arguments[0];"object"==typeof e?b=e:"string"==typeof e&&(c=e)}var f=a.extend({combo:"",comboName:"combo",inputVerify:"",checked:"",selects:!1,defaultValue:"下拉选择",touchTargetType:""},b),g="EVENT_ADD_CHOOSE",h="EVENT_CANCEL_CHOOSE",i="EVENT_GET_VALUE",j="EVENT_GET_ID",k=a(this).attr("id"),l=a("#"+k),m="",n="";if(void 0!=l.data("selects")&&(f.selects=l.data("selects")),""!=c){if("addChoose"==c){var o=arguments[1];l.trigger(g,o)}else if("cancelChoose"==c){var o=arguments[1];l.trigger(h,o)}else if("getValue"==c){var p=arguments[1];l.trigger(i,p)}}else{var q=function(a){n.addElement(a)},r=function(a){n.deleteElement(a)},s=function(b){var c=a("#"+k),d=andy.combo("getTouchTarget",c),e=d,g=f.valueForInput;0==g.is("input")&&g.find("input").each(function(b,c){g=a(c)});var h=e.attr("value"),i=g.attr("idValue");b.attr&&"string"!=typeof b.attr&&(b.attr="");var j=g.attr("valueData");if(void 0==h||""==h||h==f.defaultValue)h=b.name,i=b.id,j=b.value||b.attrValue||b.attr;else{h=h+"，"+b.name,i=i+","+b.id;var l=b.value||b.attrValue||b.attr;j=j+","+l}0==f.selects?(g.attr({idValue:b.id,valueData:b.value||b.attrValue||b.attr}),f.changeTarget&&e.html(b.name+"<i class='iconfont'>&#xe613;</i>")):(g.attr({idValue:i,valueData:j}),f.changeTarget&&e.text(h+"<i class='iconfont'>&#xe613;</i>")),g.attr("verify")},t=function(b){var c=a("#"+k);null==f.valueForInput&&0==c.find("input").length&&(c.append("<input type = 'hidden' name = '"+f.inputName+"'>"),f.valueForInput=c.find("input"));var d=f.valueForInput;if(0==d.is("input")&&d.find("input").each(function(b,c){d=a(c)}),d&&d.is("input")){var e=d.attr("idValue");if(void 0!=e&&""!=e){for(var g=e.split(","),h=!1,i=0;i<g.length;i++)g[i]==b.id&&(h=!0);h||s(b)}else s(b)}},u=function(a){},v=function(a){for(var b="",c=0;c<a.length-1;c++)b+=a[c].name+"-";return b},w=function(b){var c=a("#"+k),d=andy.combo("getTouchTarget",c);0==d.is("input")&&d.find("input").each(function(b,c){d=a(c)});var e=d.attr("value"),g=d.attr("idValue");b.attr&&"string"!=typeof b.attr&&(b.attr="");var h=d.attr("valueData"),i="";if(b.getParentNode&&0==f.selects?i=v(b.getPath()):b.path&&0==f.selects&&(i=v(b.path)),void 0==e||""==e||e==f.defaultValue)e=i+b.name,g=b.id,h=b.value||b.attrValue||b.attr;else{e=e+"，"+i+b.name,g=g+","+b.id;var j=b.value||b.attrValue||b.attr;h=h+","+j}0==f.selects?(d.attr({value:i+b.name,idValue:b.id,valueData:b.value||b.attrValue||b.attr}),d.val(i+b.name)):(d.attr({value:e,idValue:g,valueData:h}),d.val(e)),d.attr("verify")&&andy.inputCheck(d[0])},x=function(b){var c=andy.combo("getTouchTarget",a("#"+k));if(0==c.is("input")&&c.find("input").each(function(b,d){c=a(d)}),c&&c.is("input")){var d=c.attr("idValue");if(void 0!=d&&""!=d){for(var e=d.split(","),f=!1,g=0;g<e.length;g++)e[g]==b.id&&(f=!0);f||w(b)}else w(b)}},y=function(b){var c=andy.combo("getTouchTarget",a("#"+k));if(0==c.is("input")&&c.find("input").each(function(b,d){c=a(d)}),c&&c.is("input")){for(var d=c.attr("value"),e=c.attr("idValue"),f=c.attr("valueData"),g=d.split("，"),h=e.split(","),i=f.split(","),j=0;j<h.length;j++)h[j]==b.id&&(h.splice(j,1),g.splice(j,1),i.splice(j,1));c.attr("value",""),c.attr("idValue",""),c.attr("valueData","");for(var d=c.attr("value"),e=c.attr("idValue"),f=c.attr("valueData"),j=0;j<h.length;j++){var l=g[j],m=h[j],n=i[j];0==j?(d=l,e=m,f=n):(d=d+"，"+l,e=e+","+m,f=f+","+n)}c.attr("value",d),c.val(d),c.attr("idValue",e),c.attr("valueData",f)}},z=function(a){"input"==f.touchTargetType?x(a):"button"==f.touchTargetType?t(a):"selects"==f.touchTargetType&&q(a)},A=function(a){"input"==f.touchTargetType?y(a):"button"==f.touchTargetType?u(a):"selects"==f.touchTargetType&&r(a)};if("input"==f.touchTargetType){if(0==f.combo.children().length){var B="";0==f.combo.data("isEnable")&&(B="disabled"),f.checked.length>0&&(f.defaultValue=""),f.combo.append("<div class='u-group "+f.comboSize+"'><input class = 'item item-l u-input u-diseditor' readonly='readonly' verify = '"+f.inputVerify+"' value = '"+f.defaultValue+"' "+B+" combo = '"+f.comboName+"'><i class='iconfont mark item item-r'>&#xe613;</i></div>"),andy.formlayout()}}else if("button"==f.touchTargetType){if(0==f.combo.children().length){var B="";0==f.combo.data("isEnable")&&(B="disabled"),f.checked.length>0&&(f.defaultValue=""),f.combo.append("<a class='u-btn "+f.comboSize+"' combo = '"+f.comboName+"'>"+f.defaultValue+"<i class='iconfont'>&#xe613;</i></a>"),f.combo.toggleClass("u-btn-eject u-group-center"),andy.formlayout()}}else if("selects"==f.touchTargetType){m=k+"_selects",0==f.combo.children().length&&f.combo.append("<div class='u-btn-eject' style='width:100%;' combo = '"+f.comboName+"'><div class='u-btn-checkbox f-clear' id="+m+"></div></div>");var C=f.inputName;(C="")&&(C=k+"_input"),n=andy.multiSelect({parent:document.getElementById(m),dataKey:C,list:[]})}l.bind(g,function(a,b){z(b)}),l.bind(h,function(a,b){A(b)}),l.bind(i,function(b,c){var d=andy.combo("getTouchTarget",a("#"+k));if(d){var e=d.attr("valueData");c(e)}}),l.bind(j,function(b,c){var d=andy.combo("getTouchTarget",a("#"+k));if(0==d.is("input")&&d.find("input").each(function(b,c){d=a(c)}),d){var e=d.attr("idvalue");c(e)}})}},an_combo_creatShow:function(){for(var b={},c="",d=0;d<arguments.length;d++){var e=arguments[0];"object"==typeof e?b=e:"string"==typeof e&&(c=e)}var f=a.extend({combo:"",comboName:"combo",showTargetType:""},b),g="EVENT_BIND";if(""!=c){if("eventBind"==c){var h=arguments[1];a(this).trigger(g,h)}}else"list"==f.showTargetType?1==f.combo.children().length&&f.combo.append("<ul class = 'combo m-menu' combo = '"+f.comboName+"'></ul>"):"tree"==f.showTargetType&&1==f.combo.children().length&&f.combo.append("<div class='combo but-tree' style='height:"+f.showHeight+"px;' combo ='"+f.comboName+"'></div>"),f.combo.bind(g,function(a,b){f.combo.an_combo_bindEvent(b)})},an_combo_bindEvent:function(){for(var b={},c="",d=0;d<arguments.length;d++){var e=arguments[0];"object"==typeof e?b=e:"string"==typeof e&&(c=e)}var f=a.extend({combo:"",selects:!1,checked:[],treeId:"",onChange:function(){},touchTargetType:"input",showTargetType:"list",showUrl:""},b),g=(f.combo.touchTarget,f.combo.showTarget);if(void 0!=a(this).data("selects")&&(f.selects=a(this).data("selects")),""!=c);else{var h=function(b,c){var d=f.combo;c&&d.showTarget.empty(),b instanceof jQuery?d.showTarget=b:d.showTarget=a(b)},i=function(a){a.checked?f.combo.an_combo_creatTouch("addChoose",a):f.combo.an_combo_creatTouch("cancelChoose",a)},j=function(a,b){if(a&&b&&a.checked)if(a.children&&f.selects){f.combo.an_combo_creatTouch("addChoose",a);for(var c=0;c<a.children.length;c++)j(a.children[c],b)}else f.combo.an_combo_creatTouch("addChoose",a);else if(!b)if(a.children){f.combo.an_combo_creatTouch("cancelChoose",a);for(var c=0;c<a.children.length;c++)j(a.children[c],b)}else f.combo.an_combo_creatTouch("cancelChoose",a)},k=function(a){a&&j(a,a.checked)},l=function(b,c){if(!c)return!1;for(var d=a.fn.zTree.getZTreeObj(b),e=0;e<c.length;e++){var g=d.getNodeByParam("id",c[e],null);if(g){d.checkNode(g,!0,!0);var h={path:g.getPath(),children:g.children,value:g[f.valuedata],attr:g.attr||"",name:g[f.namevalue],children:g.children,checked:g.checked,id:g[f.idvalue]};k(h)}}},m=function(a){var b={checked:a.hasClass("active"),value:a.attr("value"),id:a.attr("listId"),name:a.text()};return b},n=function(){var b=f.checked.length;g.children().each(function(c,d){var e=a(d);if(e.attr("listId")||e.attr("listId",f.combo.attr("id")+"_"+c),b>0)for(var h=0;h<b;h++)if(e.attr("listId")==String(f.checked[h])){e.addClass("active");var j=m(e);i(j)}e.unbind("click"),e.on("click",function(b){var c=a(b.target);0==c.is("li")&&(c=c.closest("li")),f.selects||g.children().each(function(b,c){a(c).removeClass("active")}),c.toggleClass("active");var d=m(c);e.comboData=d,i(d),a("#"+f.comboId).trigger(andy.COMBO_CHOOSE_LISET,e),f.onChange(e),0==f.selects&&c.is("li")&&andy.combo("hiddenTarget",f.combo)})})},o=function(b,c,d,e){var g=b;f.selects=e.selects;var i=e.checked,j=f.combo,m={treeObj:null,callback:{onCheck:function(a,b,c){var d={path:c.getPath(),children:c.children,value:c[f.valuedata],attr:c.attr||"",name:c[f.namevalue],children:c.children,checked:c.checked,id:c[f.idvalue]};k(d),f.onChange(c)}},check:{enable:!0,autoCheckTrigger:!0,chkStyle:"checkbox",chkboxType:{Y:"s",N:"s"}},data:{key:{name:f.namevalue},simpleData:{enable:!0,idKey:f.idvalue}}};f.treeCheckBoxType!={}&&(m.check.chkboxType=f.treeCheckBoxType),f.treeAsync!={}&&(m.async=f.treeAsync),0==f.selects&&(m.check={enable:!0,radioType:"all",chkStyle:"radio"}),c&&(m=a.extend(!0,{},m,c)),j.showTarget.append("<div class='g-h-max'><ul id='"+g+"' class='ztree'></ul></div>");var n="";d?(a.fn.zTree.init(a("#"+g),m,d),n=a("#"+g),l(g,i),h(j.showTarget)):e&&e.url&&andy.loaddata(e.url,function(b){b=andy.stringToJson(b),a.fn.zTree.init(a("#"+g),m,b),n=a("#"+g),l(g,i),h(j.showTarget)})},p=function(a){if("list"==f.showTargetType){for(var b="",c=0;c<a.length;c++){var d=a[c],e="",h="",i="",j="";0==c&&(e="first"),d[f.valuedata]?h="value = "+d[f.valuedata]:d.attrValue?j="attrValue = "+d.attrValue:d.attr&&(i="attrStr = "+d.attr);var k="<li class = '"+e+"' "+h+" "+i+" "+j+" listId = '"+d[f.idvalue]+"' ><a>"+d[f.namevalue]+"</a></li>";b+=k}g.append(b),n()}else"tree"==f.showTargetType&&(""==f.treeId&&(f.treeId="treeId_"+andy.getRandom(1e4)),o(f.treeId,f.treeSetting,a,f))};if(null==f.showUrl||""==f.showUrl&&0==f.showData.length)return"list"==f.showTargetType&&n(),!1;""!=f.showUrl?andy.loaddata(f.showUrl,function(a){a=andy.stringToJson(a),a.length>0&&p(a)}):f.showData.length>0?("string"==typeof f.showData&&(f.showData=andy.stringToJson(f.showData)),p(f.showData)):"list"==f.showTargetType&&n(),f.combo.bind("EVENT_CHOOSE",function(b,c){g.children().each(function(b,d){for(var e=a(d),h=0;h<c.choose.length;h++)if(parseInt(e.attr("listId"))==c.choose[h]){f.selects||g.children().each(function(b,c){a(c).removeClass("active")}),e.addClass("active");var j=m(e);i(j)}})})}}})}(jQuery),function(a){a.fn.extend({an_spinner:function(){var b={},c="",d=arguments[0];"object"==typeof d?b=d:c=d;var e=a.extend({spinnerSize:"",increment:1,min:0,max:99999,inputName:"",value:1,onChange:function(){}},b),f=a(this);if(f.is("input")){var g=f.attr("id");f.removeAttr("id",""),f.removeAttr("an-spinner",""),g||(g="spinner_"+andy.getRandom(1e4));var h=f.attr("style");f.attr("name")&&(e.inputName=f.attr("name"),f.removeAttr("name")),f.attr("value")&&(e.value=f.attr("value"),f.removeAttr("value"));var i=f.attr("options");f.css("display","none");var j="<a class='item item-l u-btn' sub><i class='iconfont'>&#xe670;</i></a>",k="<a class='item item-r u-btn' add><i class='iconfont'>&#xe66f;</i></a>",l="<input type='text' class='item u-input nohover' name = '"+e.inputName+"' style='text-align:center; width:0px; text-indent:0' value='"+e.value+"' val>",m="<div class='u-group "+e.spinnerSize+"' id = '"+g+"' style = '"+h+"' options = "+i+" an-spinner>"+j+l+k+"</div>";f.before(m),f=a("#"+g),andy.layout(f.parent())}var n=f.find("[sub]"),o=f.find("[val]"),p=f.find("[add]"),q="EVENT_VALUE",r=f.attr("options");if(r){r="{"+r+"}",r=andy.stringToJson(r);for(var s in r)if("onChange"==s){var t=r[s];e.onChange=function(a){var b;(b="string"==typeof t?andy.stringToJson(t):t)(a)}}else"increment"==s?e.increment=parseInt(r[s]):"min"==s?e.min=parseInt(r[s]):"max"==s?e.max=parseInt(r[s]):"true"==r[s]?e[s]=!0:"false"==r[s]?e[s]=!1:e[s]=r[s]}if(""!=c){if("getValue"==c){var u=arguments[1];f.trigger(q,u)}}else f.bind(q,function(a,b){b(o.val())}),n.click(function(a){var b=parseInt(o.val());b>e.min&&(b-=e.increment,o.val(b),o.attr("value",b),e.onChange(o.val()))}),p.click(function(a){var b=parseInt(o.val());b<e.max&&(b+=e.increment,o.val(b),o.attr("value",b),e.onChange(o.val()))})}})}(jQuery),function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),g=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e),void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120),d.unshift(b,e,f,g),(a.event.dispatch||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=c.length;d;)a.event.fixHooks[c[--d]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery),function(a){a.findOutElement=function(a,b,c,d,e){
if(a)for(var f,g=a.ownerDocument;a&&a!==g;){if(a.getAttribute){if(d&&(f=a.getAttribute(d),""===f||f))return;if(e&&(f=a.getAttribute(e),""===f||f))return;if(f=a.getAttribute(b),""===f||f){if(void 0===c)return a;if(f.indexOf(c)>-1)return a}}a=a.parentNode}};var b,c,d=[],e=0,f=!1,g={},h={},i=new Date,j=function(a){a.className=a.className+" u-global-drag"},k=function(a){a.className=a.className.replace(" u-global-drag","")},l=function(c){var e;if(!f&&d.length>0){for(e=d.length-1;e>=0;e--)if(f=a.arrayFunCall(d[e].onDragCheck,{event:c,data:d[e].data})){b=d[e];break}f&&(j(b.element||document.body),g.x=h.x=c.clientX,g.y=h.y=c.clientY,c.stopPropagation?c.stopPropagation():c.cancelBubble=!0)}},m=function(e){var g,j,k={};if(d.length>0){if(f&&b){var l=new Date-i;return l>b.restrictedMoveTime&&(i=l,void 0===c&&(c=!0,b.onDragBefore.length>0&&(c=a.arrayFunCall(b.onDragBefore,[e]))),k.x=e.clientX-h.x,k.y=e.clientY-h.y,h.x=e.clientX,h.y=e.clientY,c&&(b.lockRect&&(e.clientX>b.lockRect.x+b.lockRect.w&&(k.x=0,h.x=b.lockRect.x+b.lockRect.w),e.clientX<b.lockRect.x&&(k.x=0,h.x=b.lockRect.x),e.clientY>b.lockRect.y+b.lockRect.h&&(k.y=0,h.y=b.lockRect.y+b.lockRect.h),e.clientY<b.lockRect.y&&(k.y=0,h.x=b.lockRect.y)),b.lockX&&(k.y=0),b.lockY&&(k.x=0),a.arrayFunCall(b.onDragOn,{offset:k,data:b.data,event:e}))),!1}for(g=d.length-1;g>=0&&!(j=a.arrayFunCall(d[g].onMoveCheck,{event:e,data:d[g].data}));g--);}},n=function(d){if(f&&b){var e=a.arrayFunCall(b.onDragEnd,{event:d,data:b.data});return k(b.element||document.body),f=!1,c=void 0,b=void 0,e}},o=function(){$(document).on("mousedown",l),$(document).on("mousemove",m),$(document).on("mouseup",n)},p=function(){$(document).off("mousedown",l),$(document).off("mousemove",m),$(document).off("mouseup",n)};a.drag=function(b){var c={lockX:!1,lockY:!1,lockRect:void 0,restrictedMoveTime:12,data:{},onMoveCheck:[],onDragCheck:[],onDragBefore:[],onDragOn:[],onDragBeforeEnd:[],onDragEnd:[]},f={},g=a.extend(c,b);return f.addEventCall=function(a,b){g[a]&&g[a].push(b)},f.getData=function(){return g.data},f.destroy=function(){d.splice(g.dragIndex,1),0===d.length&&p()},0===d.length&&o(),g.dragIndex=e,e++,d.push(g),f};a.dragElement=function(b){var c,d,e,f,g,h,i=function(b,c){return c=c||a.findOutElement(b.event.target,d.dragName,"true",void 0,d.notDragEl),!!c},j=function(b){var c=a.findOutElement(b.event.target,d.dragName,"true",void 0,d.notDragEl);return c&&i(b,c)?(e=c,!0):(e=void 0,!1)},k=function(a){return d.dragHelp||d.dragCopyEl&&(f=e.cloneNode(!0),f.style.position="absolute",f.style.left=e.offsetLeft+"px",f.style.top=e.offsetTop+"px",e.parentNode.appendChild(f)),d.onDragBeforeElement(e,a,f)&&!0},l=function(a){var b,c,i,j,k,l;return j=function(e){k=e.offsetLeft-parseInt($(e).css("margin-left"),10)+a.offset.x,l=e.offsetTop-parseInt($(e).css("margin-top"),10)+a.offset.y,d.lockInParent&&(c=e.parentNode.offsetWidth,i=e.parentNode.offsetHeight,b(e)),a.left=k,a.top=l,e.style.left=k+"px",e.style.top=l+"px"},b=function(a){var b=parseInt($(a).css("margin-left"),10),d=parseInt($(a).css("margin-top"),10);void 0===g&&(g=c-$(a).outerWidth()-b-b),void 0===h&&(h=i-$(a).outerHeight()-d),k=k<0?0:k,k=k>g?g:k,l=l<0?0:l,l=l>h?h:l},d.dragSelf&&("true"===e.getAttribute("lockx")&&(a.offset.y=0),"true"===e.getAttribute("locky")&&(a.offset.x=0),j(e)),f&&j(f),d.onDragElement(e,a,f)},m=function(a){return d.onDragEndElement(e,a,f),f&&f.parentNode&&f.parentNode.removeChild(f),e=void 0,g=void 0,h=void 0,!1},n={element:document.body,lockInParent:!0,dragSelf:!0,dragHelp:!1,dragCopyEl:!1,dragName:"andyDrag",onDragCheck:[j],onMoveCheck:[i],onDragBefore:[k],onDragOn:[l],onDragEnd:[m],posCheck:function(){},onDragElement:function(){return!0},onDragEndElement:function(){return!0},onDragBeforeElement:function(){return!0}};return d=a.extend(n,b),c=a.drag(d)},a.dragElement()}(andy),function(a){var b='<div  class="multi-select-box" style="position:relative;width: 100%;height:100%">{{each list as value i}}<span multiSelect="true" index="{{i+1}}" data-id="{{list[i].val||list[i].id||list[i].text}}" class="option-block" nametext="{{list[i].text||list[i].name}}" ><span class="indexnum">{{i+1}}.</span> {{list[i].text||list[i].name}}<i notdrag="true" class="iconfont">&#xe62d;</i></span>{{/each}}</div><input type="hidden" name="{{dataKey}}">',c=function(a){var b=[],c=a.next("input")[0]||a.find("input")[0];a.find("[multiselect]").each(function(a,c){c.setAttribute("index",a+1),$(c).find(".indexnum").html(a+1+"."),b.push(c.getAttribute("data-id"))}),c&&(c.value=b.join(","))},d=function(a,b){var c=a.next(),d=b.prev();c[0]===b[0]?b.insertBefore(a):(b.insertBefore(c),a.insertAfter(d))},e=function(){var b,e,f,g,h,i,j,k;if(!a.dragElement)throw"需要在这之前加载拖动drag.js";a.dragElement({dragName:"multiSelect",dragCopyEl:!0,dragSelf:!1,notDragEl:"notdrag",onDragBeforeElement:function(a,c,d){return a.style.visibility="hidden",d.style.opacity=.5,d.removeAttribute("multiselect"),e=$(a.parentNode).find("[multiselect]").length,b=parseInt(a.parentNode.offsetWidth/a.offsetWidth,10),j=parseInt(a.getAttribute("index"),10),k=$(a).parent().children(),!0},onDragElement:function(a,b,c){var e,h,i,l=0;for(l;l<k.length-1;l++){if(e={},h=l,i=k[l],e.x=(i.offsetLeft+i.offsetLeft+i.offsetWidth)/2,e.y=(i.offsetTop+i.offsetTop+i.offsetHeight)/2,""===i.className)return;if(e.x>c.offsetLeft&&e.x<c.offsetLeft+c.offsetWidth&&e.y>c.offsetTop&&e.y<c.offsetTop+c.offsetHeight&&(f=h+1,!g&&f!==j||g&&g!==f)){g=f,d($(i),$(a));break}}},onDragEndElement:function(a,b,d){h=void 0,i=void 0,g=void 0,c($(a).parent()),a.style.visibility="visible"}})};a.multiSelect=function(a){var d={},e=$(a.parent),f=e.find(".multi-select-box");if(e.css("z-index",1),f.length>0&&e.empty(),a.list){var g=template.compile(b),h=g(a);e.append(h),e.find(".multi-select-box").addClass("f-clear")}c(e),e.find("i").mousedown(function(b){var d,f=$(this).parent().parent();a.onDelete&&(d=parseInt($(this).parent().attr("index"),10),a.onDelete(d)),$(this).parent().remove(),c(f),e.find(".multi-select-box").height("auto").css({width:e.width(),height:e.height()||23})});var i=function(b){var d,f=b.parent().parent();a.onDelete&&(d=parseInt(b.parent().attr("index"),10),a.onDelete(d)),b.parent().remove(),c(f),e.find(".multi-select-box").height("auto").css({width:e.width(),height:e.height()||23})};return d.setEnable=function(a){a?e.find("[multiSelectMask]").remove():(e.append("<div multiSelectMask style='position: absolute;width: 100%; height: auto;z-index: 2;background: #fff; opacity: 0.5; top: 0px;'></div>"),e.find("[multiSelectMask]").height(e.height()))},d.addElement=function(b){a.list.push(b);var d='<span multiSelect="true" index="'+a.list.length+'" data-id="'+(b.val||b.id||b.text)+'" class="option-block" nametext="'+(b.text||b.name)+'" ><span class="indexnum">'+a.list.length+".</span> "+(b.text||b.name)+'<i notdrag="true" class="iconfont">&#xe62d;</i></span>';a.removeIndex?d='<span multiSelect="true" index="'+a.list.length+'" data-id="'+(b.val||b.id||b.text)+'" class="option-block" nametext="'+(b.text||b.name)+'" >'+(b.text||b.name)+'<i notdrag="true" class="iconfont">&#xe62d;</i></span>':null,e.find(".multi-select-box").append(d),e.find(".multi-select-box span:last i").unbind("click"),e.find(".multi-select-box span:last i").click(function(a){i($(a.target))}),c(e)},d.deleteElement=function(b){for(var d in a.list)b.id==a.list[d].id&&a.list.splice(d,1);e.find("[data-id="+b.id+"]").unbind("click").remove(),c(e)},d.emptyElement=function(){a.list=[],e.find("[data-id]").unbind("click").remove(),c(e)},d},e()}(andy),function(a){a.fn.extend({an_related:function(){var b={},c="",d=arguments[0];"object"==typeof d?b=d:c=d;var e=a.extend({relatedId:"",showUrl:"",relatedSize:"",item:[],checked:[],row:5,inputName:"",isText:!1,value:""},b),f=a(this),g="";if(f.is("input")){var h=f.attr("id");f.removeAttr("id",""),f.removeAttr("an-related",""),h||(h="related_"+andy.getRandom(1e4));var i="";f.attr("style")&&(i=f.attr("style"),f.removeAttr("style","")),f.attr("name")&&(e.inputName=f.attr("name"),f.removeAttr("name")),f.attr("value")&&(e.value=f.attr("value"),f.removeAttr("value"));var j="u-group "+e.relatedSize;f.attr("class")&&(j=f.attr("class"),f.attr("class",""));var k=f.attr("options");k="options = "+k,f.removeAttr("options"),f.css("display","none");var l="<input type = 'hidden' name = '"+e.inputName+"' value='"+e.value+"' val>",m="<div class='"+j+"' id = '"+h+"' style = '"+i+"' "+k+" an-related>"+l+"</div>";f.before(m),f.remove(),f=a("#"+h),andy.layout(f.parent())}""==e.relatedId&&(e.relatedId=f.attr("id")),void 0==e.relatedId&&(e.relatedId="as_"+andy.getRandom(1e4),f.attr("id",e.relatedId)),f=a("#"+e.relatedId),f.find("input").each(function(b,c){var d=a(c);"hidden"==d.attr("type")&&(g=d,e.inputName=d.attr("name"))});var n=f.attr("options");if(n){n="{"+n+"}",n=andy.stringToJson(n);for(var o in n)if("item"==o){var p=n[o].split(",");e.item=p}else if("checked"==o){var p=n[o].split(",");e.checked=p}else e[o]=n[o]}var q=e.item.length,r="";if(q>0&&f.find("input").length<q){for(var s=0;s<q;s++){var t=Math.floor(f.innerWidth()/q)/2,u="item u-input nohover m-combo",v=!0;0==s?u="item item-l u-input nohover m-combo":s==q-1&&(u="item item-r u-input nohover m-combo"),s>0&&0==e.checked.length&&(v=!1);var w="options = defaultValue:'"+e.item[s]+"',isEnable:'"+v+"',row:'"+e.row+"',isText:'"+e.isText+"'";r+="<input class = '"+u+"' style = 'width:"+t+"px' name = 'input_name' "+w+">"}f.prepend(r)}var x="EVENT_VALUE";if(""!=c){if("getValue"==c){var y=arguments[1];f.trigger(x,y)}}else{var z="",g="",q=0;f.find("input").each(function(b,c){var d=a(c);"hidden"==d.attr("type")&&(g=d)});var A=function(a,b){for(var c=0;c<b.length;c++)b[c].id==a?z=b[c].children:b[c].children&&A(a,b[c].children);if(""!=z)return z},B=function(a,b,c){for(var d=0;d<b.length;d++)b[d].id==a?b[d].children=c:b[d].children&&B(a,b[d].children,c)},C=function(a,b){var c=b.find("ul");c.empty();for(var d=0;d<a.length;d++){var e=a[d],f="";0==d&&(f="first");var g="<li class = '"+f+"' value = '"+e.value+"' listId = '"+e.id+"' ><a>"+e.name+"</a></li>";c.append(g)}return c},D=function(a,b){var c=g.attr("idValue"),d=g.attr("valueData");if(!c){for(var e=" ",f=0;f<q-1;f++)e+=", ";g.attr("idValue",e),c=g.attr("idValue")}var h=c.split(",");h[b]=a.attr("listid");for(var f=0;f<h.length;f++)f>b&&(h[f]=null);if(g.attr("idValue",h),!d){for(var e=" ",f=0;f<q-1;f++)e+=", ";g.attr("valueData",e),d=g.attr("valueData")}var i=d.split(",");i[b]=a.attr("value");for(var f=0;f<i.length;f++)f>b&&(i[f]=null);g.attr("valueData",i)},E=function(b,c){for(var d=b+1;d<c.length;d++){var e=a("#"+c[d]);e.an_combo("setDefault"),e.an_combo("isEnable",!1)}};andy.loaddata(e.showUrl,function(b){var c=b;f.find("input").each(function(b,d){var f=a(d);if("hidden"!=f.attr("type")){var h="";if(q+=1,0==b&&(h=e.showUrl),e.checked.length>0){var i=[];if(i=0==b?c:A(e.checked[b-1],c),i&&(f.an_combo({row:e.row,checked:[e.checked[b]],showData:i}),g)){var j=g.attr("idValue");if(!j){for(var k=" ",b=0;b<q-1;b++)k+=", ";g.attr("idValue",k),j=g.attr("idValue"),g.attr("valueData",k)}j=j.split(",");var l=g.attr("valueData").split(",");j[b]=e.checked[b];var m=function(){for(var a=e.checked[b],c="",d=0;d<i.length;d++){var f=i[d];a==f.id&&(c=f.value)}return c};l[b]=m(),g.attr("idValue",j),g.attr("valueData",l)}}else f.an_combo({row:e.row,showUrl:h})}});var d=[];f.find("[an-combo = an-combo]").each(function(b,e){var f=a(e).attr("id"),g=a("#"+f);andy.inputLayout(g),d.push(f),g.bind(andy.COMBO_CHOOSE_LISET,function(e,f){if(D(a(f),b),d[b+1]){var g=a("#"+d[b+1]),h=a(f).attr("listId"),i=A(h,c);if(z="","object"==typeof i){if(0==i.length)return E(b,d),!1;for(var j=C(i,g).clone(),k=b+1;k<d.length;k++){var l=a("#"+d[k]);l.an_combo("setDefault")}g.an_combo("setShowTarget",j),g.an_combo("isEnable",!0)}else"string"==typeof i?andy.loaddata(i,function(e,f){if(!e||0==e.length)return E(b,d),!1;B(h,c,e);for(var i=C(e,g).clone(),j=b+1;j<d.length;j++){var k=a("#"+d[j]);k.an_combo("setDefault")}g.an_combo("setShowTarget",i),g.an_combo("isEnable",!0)}):i||E(b,d)}})})})}}})}(jQuery),function(a){var b={};b.an_alertclose=function(a,b,c){a.click(b),a.mouseenter(function(a){$(this).attr("lock",!0),$(this).removeClass("fadeInDown"),$(this).addClass("pulse")}),a.mouseout(function(b){$(this).removeAttr("lock"),$(this).removeClass("pulse"),setTimeout(function(){void 0==a.attr("lock")&&(a.addClass("zoomOut"),setTimeout(function(){a.remove()},250))},c)}),setTimeout(function(){void 0==a.attr("lock")&&(a.addClass("zoomOut"),setTimeout(function(){a.remove()},250))},c)},b.an_alertitem=function(b,c,d,e,f,g,h,i){if("top"==b?a.top.$("body").find(".alertnew").removeClass("alertnew"):$("body").find(".alertnew").removeClass("alertnew"),"message"==g)var j='<i class="iconfont">&#xe703;</i> ';else if("emial"==g)var j='<i class="iconfont">&#xe6e7;</i> ';else var j='<img src="'+g+'" class="f-r-o f-left">';c.prepend("<div class='alert f-clear "+e+" f-m-b-xs animated fadeInDown alertnew' id = "+i.id+" >"+j+d+"</div>"),"top"==b?a.top.$("body").find(".alertnew").each(function(){var a=$(this);andy.an_alertclose(a,f,h)}):$("body").find(".alertnew").each(function(){var a=$(this);andy.an_alertclose(a,f,h)})},b.an_alert=function(b){var c={id:"",type:"message",style:"alert-black",content:"提示内容",target:"top",position:"t-m",audio:"",callback:function(){},delaytime:5e3},d=$.extend(c,b);if(void 0!=d.audio&&""!=d.audio&&(a.top.$("body").append("<audio id='audio' src='"+d.audio+"' autoplay></audio>"),setTimeout(function(){a.top.$("body").find("#audio").remove()},1e3)),"top"==d.target)if(0==a.top.$("body").find("."+d.position).length){a.top.$("body").append("<div class='m-alertbox "+d.position+"'></div>");var e=a.top.$("body").find("."+d.position);andy.an_alertitem(d.target,e,d.content,d.style,d.callback,d.type,d.delaytime,d)}else{var e=a.top.$("body").find("."+d.position);andy.an_alertitem(d.target,e,d.content,d.style,d.callback,d.type,d.delaytime,d)}if("self"==d.target)if(0==$("body").find("."+d.position).length){$("body").append("<div class='m-alertbox "+d.position+"'></div>");var e=$("body").find("."+d.position);andy.an_alertitem(d.target,e,d.content,d.style,d.callback,d.type,d.delaytime,d)}else{var e=$("body").find("."+d.position);andy.an_alertitem(d.target,e,d.content,d.style,d.callback,d.type,d.delaytime,d)}},$.extend(a.andy,b)}(window),function(a){function b(b,d,e){var f=function(){if(e.data){var f=e.valueField||"value",g=e.textField||"text",h=e.itemWidth||"";""!=h&&(h="width:"+h);var i=d.attr("name"),j="";e.editable&&(j="disabled='disabled'"),a.each(e.data,function(a,c){0==a?(e.checked||d.attr("value",c[f]),b.append('<label class="u-checkbox" style="'+h+'" ><input name="'+i+'_radio" type="radio" '+j+' value="'+c[f]+'" checked="checked" >'+c[g]+"</label>")):b.append('<label class="u-checkbox" style="'+h+'" ><input name="'+i+'_radio" type="radio" '+j+' value="'+c[f]+'" >'+c[g]+"</label>")}),c(b,d,e),e.checked&&d.an_checkbox("setValue",e.checked)}};e.url&&andy.loaddata(e.url,function(a){e.data=a,f()}),f()}function c(a,b,c){a.find("input").on("click",function(){b.val(b.an_radiobox("getValue")),c.onclick&&c.onclick(b)})}function d(a,b){a.attr("value",b)}a.fn.an_radiobox=function(c,e){if("string"==typeof c){var f=a.fn.an_radiobox.methods[c];if(f)return f(this.next(),e)}else{var g=this.attr("options");if(g){g="{"+g+"}",g=andy.stringToJson(g);for(var h in g)"checked"==h?(d(this,g[h]),c.checked=g[h]):c[h]=g[h]}var i=c.width||this.width(),j=c.height||this.height(),k=a("<div class='u-input-span' ></div>");k.width(i),k.height(j),this.hide(),this.after(k),c=c||{},b(k,this,c)}},a.fn.an_radiobox.methods={getValue:function(a,b){var c=a.find("input:checked"),d="";return c.length&&(d=c[0].value),d},setValue:function(b,c){b.find("input").each(function(b,d){c==a(d).attr("value")&&1!=a(d).prop("checked")&&a(d).prop("checked",!0)})}}}(jQuery),function(a){function b(b,d,e){var f=function(a){for(var b=!1,c=0;c<e.checked.length;c++)e.checked[c]==a&&(b=!0);return b},g=function(){if(e.data){var g=e.valueField||"value",h=e.textField||"text",i=e.itemWidth||"";""!=i&&(i="width:"+i);var j=d.attr("name"),k="";if(e.editable&&(k="disabled='disabled'"),a.each(e.data,function(a,c){f(c.id)?(e.checked||d.attr("value",c[g]),b.append('<label class="u-checkbox" style="'+i+'" ><input name="'+j+'_checkbox" type="checkbox" '+k+' value="'+c[g]+'" checked="checked" >'+c[h]+"</label>")):b.append('<label class="u-checkbox" style="'+i+'" ><input name="'+j+'_checkbox" type="checkbox" '+k+' value="'+c[g]+'" >'+c[h]+"</label>")}),c(b,d),e.checked)for(var l=0;l<e.checked.length;l++)d.an_checkbox("setValue",e.checked[l])}};e.url&&andy.loaddata(e.url,function(a){e.data=a,g()}),g()}function c(a,b){a.find("input").on("click",function(){b.val(b.an_checkbox("getValue"))})}function d(a,b){a.attr("value",b)}a.fn.an_checkbox=function(c,e){if("string"==typeof c){var f=a.fn.an_checkbox.methods[c];if(f)return f(this.next(),e)}else{var g=this.attr("options");if(g){g="{"+g+"}",g=andy.stringToJson(g);for(var h in g)if("checked"==h){d(this,g[h]);var i=g[h].split(",");c.checked=i}else c[h]=g[h]}else c.checked&&d(this,c.checked);var j=c.width||this.width(),k=c.height||this.height(),l=a("<div class='u-input-span' ></div>");l.width(j),l.height(k),this.hide(),this.after(l),c=c||{},b(l,this,c)}},a.fn.an_checkbox.methods={getValue:function(b,c){var d=new Array,e="";return b.find("input").each(function(b,c){1==a(c).prop("checked")&&d.push(a(c).prop("value"))}),e=d.join(",")},setValue:function(b,c){b.find("input").each(function(b,d){c==a(d).attr("value")&&1!=a(d).prop("checked")&&a(d).prop("checked",!0)})}}}(jQuery),function(a){"use strict";var b="rippler",c={init:function(d){return d=a.extend({effectClass:"rippler-effect",effectSize:16,addElement:"div",duration:600},d),this.each(function(){var e=this,f=a(this),g=f.data(b);g||(d=a.extend({},d),f.data(b,{options:d}),"undefined"!=typeof document.ontouchstart?(f.on("touchstart."+b,function(b){var d=a(this);c.elementAdd.call(e,d,b)}),f.on("touchend."+b,function(b){var d=a(this);c.effect.call(e,d,b)})):(f.on("mousedown."+b,function(b){var d=a(this);c.elementAdd.call(e,d,b)}),f.on("mouseup."+b,function(b){var d=a(this);c.effect.call(e,d,b)})))})},template:function(c){var d=a(this);c=d.data(b).options;var e,f="rippler-svg",g="rippler-div",h='<circle cx="'+c.effectSize+'" cy="'+c.effectSize+'" r="'+c.effectSize/2+'">',i='<svg class="'+c.effectClass+" "+f+'" xmlns="http://www.w3.org/2000/svg" viewBox="'+c.effectSize/2+" "+c.effectSize/2+" "+c.effectSize+" "+c.effectSize+'">'+h+"</svg>",j='<div class="'+c.effectClass+" "+g+'"></div>';return e="svg"===c.addElement?i:j},elementAdd:function(d,e,f){var g=this,h=a(this);f=h.data(b).options,d.append(c.template.call(g));var i=d.find("."+f.effectClass),j=d.offset(),k=c.targetX.call(g,e),l=c.targetY.call(g,e);return i.css({width:f.effectSize,height:f.effectSize,left:k-j.left-f.effectSize/2,top:l-j.top-f.effectSize/2}),g},effect:function(d,e,f){var g=this,h=a(this);f=h.data(b).options;var i=a("."+f.effectClass),j=d.offset(),k=h.outerWidth(),l=h.outerHeight(),m=2*c.diagonal(k,l),n=c.targetX.call(g,e),o=c.targetY.call(g,e);return i.css({width:m,height:m,left:n-j.left-m/2,top:o-j.top-m/2,transition:"all "+f.duration/1e3+"s ease-out"}),c.elementRemove.call(g)},elementRemove:function(c){var d=this,e=a(this);c=e.data(b).options;var f=a("."+c.effectClass);return setTimeout(function(){f.css({opacity:0,transition:"all "+c.duration/1e3+"s ease-out"}),setTimeout(function(){f.remove()},1.5*c.duration)},c.duration),d},targetX:function(a){var b,c=a.originalEvent;return b="undefined"!=typeof document.ontouchstart?c.changedTouches[0].pageX:c.pageX},targetY:function(a){var b,c=a.originalEvent;return b="undefined"!=typeof document.ontouchstart?c.changedTouches[0].pageY:c.pageY},diagonal:function(a,b){return a>0&&b>0&&Math.sqrt(Math.pow(a,2)+Math.pow(b,2))},destroy:function(){return this.each(function(){var c=a(this);a(window).unbind("."+b),c.removeData(b)})}};a.fn.rippler=function(d){return c[d]?c[d].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof d&&d?void a.error("Method "+d+" does not exist on jQuery."+b):c.init.apply(this,arguments)}}(jQuery),function(a){a.fn.extend({an_topnav:function(){var b={},c="",d=arguments[0];"object"==typeof d?b=d:c=d;var e=a.extend({menuId:"",url:"",urlData:"",checked:"",downMenu:!0,defaultShowDown:!1,defaultIcon:"&#xe68c;",showEvent:"mouseover",hideEvent:"mouseleave",childrenDownIcon:"&#xe613;",isFitParent:!1,childrenRightIcon:"&#xe607;",onMouseOver:function(){},onMouseEnter:function(){},onClick:function(){}},b),f=a(this);""==e.menuId&&(f=andy.setRandomId(f,"topnav_"),e.menuId=f.attr("id"));var g=f.attr("options");if(g){g="{"+g+"}",g=andy.stringToJson(g);for(var h in g)"true"==g[h]?e[h]=!0:"false"==g[h]?e[h]=!1:e[h]=g[h]}e.menu=f,e.resizeHanld=null,e.level=0;var i="EVENT_CHECKED",j="EVENT_ON_RESIZE",k="EVENT_CLEAR_CHECKED";if(""!=c)if("checked"==c){var l=arguments[1],m={arr:l};e.menu.trigger(i,m)}else"onresize"==c?e.menu.trigger(j):"clearChecked"==c&&e.menu.trigger(k);else{var n,o,p,q=function(a){return 0==a.is("li")&&(a=a.parents("li").eq(0)),a},r=function(b){b.siblings().each(function(b,c){a(c).find("ul").removeClass("show")})},s=function(a){a.parent().parent().siblings().find("a").removeClass("active"),a.parent().parent().find("a:first").addClass("active"),a.siblings().find("a").removeClass("active")},t=function(a){0==a.find("ul").length&&a.data("children")?(a.append("<ul></ul>"),n(a),a.find("ul").addClass("show")):a.find("ul").eq(0).addClass("show")};p=function(b){b.unbind(e.showEvent),b.click(function(a){s(b),e.onClick(b),b.children("a:first").addClass("active"),a.stopPropagation()}),b.mouseover(function(a){e.onMouseOver(b),a.stopPropagation()}),b.mouseenter(function(a){e.onMouseEnter(b),a.stopPropagation()}),b.bind(e.showEvent,function(b){var c=q(a(b.target));e.downMenu&&(r(c),t(c))})},n=function(b){var c=b.data("children"),d=b.parents("ul").length;for(var f in c){var g=c[f];try{var h,i,j,k,l;if(h="",i="javascript:;",l="",g.icons){var m=g.icons;""==g.icons?m=e.defaultIcon:null,h="<i class='iconfont icon'>"+m+"</i>"}else""!=e.defaultIcon&&(h="<i class='iconfont icon'>"+e.defaultIcon+"</i>");g.url?i=g.url:null,j=g.target?"target="+g.target:"",g.id==e.checked[d]&&(l="active"),k="<li id = "+g.id+"><a href="+i+" "+j+" class = '"+l+"'>"+h+g.text+"</a></li>",b.find("ul").append(k);var n=a("#"+g.id);g.children&&g.children.length>0&&n.length>0&&(n.data("children",g.children),n.find("a").append("<i class='iconfont arrow'>"+e.childrenRightIcon+"</i>")),p(n)}catch(a){alert(a)}}},o=function(b){var c=0;for(var d in b){var f=b[d];try{var g,h,i,j,k;if(g="",k="",h="javascript:;",f.icons){var l=f.icons;""==f.icons?l=e.defaultIcon:null,g="<i class='iconfont icon'>"+l+"</i>"}else""!=e.defaultIcon&&(g="<i class='iconfont icon'>"+e.defaultIcon+"</i>");f.url?h=f.url:null,i=f.target?"target="+f.target:"",f.id==e.checked[0]?k="active":null,j="<li id = "+f.id+"><a href="+h+" "+i+" class = '"+k+"'>"+g+f.text+"</a></li>",e.menu.append(j);var m=a("#"+f.id);m.data("json",f),f.children&&f.children.length>0&&m.length>0&&(m.data("children",f.children),e.downMenu&&m.find("a").append("<i class='iconfont arrow'>"+e.childrenDownIcon+"</i>")),p(m),c+=m.outerWidth()}catch(a){}}},showMenu=function(){if(e.checked.length>0)for(var a=0;a<e.checked.length;a++){var b=e.menu.find("#"+e.checked[a]);e.defaultShowDown&&t(b)}};var u=function(){var b;""!=e.url?andy.loaddata(e.url,function(a){a=andy.stringToJson(a),o(a),showMenu()}):""!=e.urlData?(b=andy.stringToJson(e.urlData),o(b),showMenu()):(f.find("li").each(function(b,c){p(a(c))}),showMenu())},v=function(){if(e.isFitParent){var b=e.menu.parent(),c=b.find(".right-btn"),d=b.find(".left-btn"),f=0,g="none";b.siblings().each(function(b,c){a(c).hasClass("no-float")?null:f+=a(c).outerWidth()});var h=b.parent().width()-f-parseInt(b.css("margin-left"))-parseInt(b.css("margin-right"));b.outerWidth(h-1),g=b.outerWidth()<e.menu.outerWidth()?"":"none",d.css({top:"0",display:g,left:"0"}),c.css({top:"0",display:g,left:"0"}),"none"==g&&e.menu.css("left",0)}},w=function(){var a=e.menu.parent(),b=e.menu.outerHeight(),c="<div class = 'right-btn f-clear'><i class='iconfont'>&#xe60f;</i></div>",d="<div class = 'left-btn f-clear'><i class='iconfont'>&#xe626;</i></div>";right=a.parent().find(".right-btn"),left=a.parent().find(".left-btn"),right.length>0?null:a.append(c),right=a.find(".right-btn"),right.css({cursor:"pointer","text-decoration":"none",position:"relative",width:"16px",float:"left",display:"block","line-height":b+"px",height:b}),right.unbind("click").on("click",function(){var b=parseInt(e.menu.css("left"))-a.width();b<-e.menu.width()+a.width()?b=-e.menu.width()+a.width():null,e.menu.css("left",b)}),left.length>0?null:a.append(d),left=a.find(".left-btn"),left.css({cursor:"pointer","text-decoration":"none",position:"relative",width:"16px",float:"left",display:"block","line-height":b+"px",height:b}),left.unbind("click").on("click",function(){var b=parseInt(e.menu.css("left"))+a.width();b>0?b=0:null,e.menu.css("left",b)})},x=function(){if(e.isFitParent){var b=e.menu.parent(),c=e.menu.outerHeight();b.css({height:c,overflow:"hidden",position:"relative",top:"0px",left:"0px"}),e.menu.css({position:"absolute",left:"0"}),w(),v(),a(window).resize(function(a){null==e.resizeHanld?e.resizeHanld=setTimeout(function(){v(),e.resizeHanld=null},300):(clearTimeout(e.resizeHanld),e.resizeHanld=setTimeout(function(){v(),e.resizeHanld=null},300))})}},y=function(){u(),x()};y(),e.menu.bind(e.hideEvent,function(){e.menu.find("ul").removeClass("show")}),e.menu.bind(j,function(){v()}),e.menu.bind(k,function(b){e.menu.find("li").each(function(b,c){a(c).find("a").removeClass("active")})}),e.menu.bind(i,function(a,b){var b=b.arr;for(var c in b){var d=e.menu.find("[id="+b[c]+"]");d.siblings().find("a").removeClass("active"),d.find("a").addClass("active")}})}}})}(jQuery),function(a){a.fn.extend({an_sidemenu:function(){var b={},c="",d=arguments[0];"object"==typeof d?b=d:c=d;var e=a.extend({menuId:"",url:"",urlData:"",checked:[],autoHide:!0,autoShow:!1,showEvent:"click",hideEvent:"mouseleave",defaultIcon:"&#xe68c;",childrenDownIcon:"&#xe613;",childrenRightIcon:"&#xe607;",onClick:function(){},onComplete:function(){}},b),f=a(this);""==e.menuId&&(f=andy.setRandomId(f,"menu_"),e.menuId=f.attr("id"));var g=f.attr("options");if(g){g="{"+g+"}",g=andy.stringToJson(g);for(var h in g)"true"==g[h]?e[h]=!0:"false"==g[h]?e[h]=!1:e[h]=g[h]}if(e.menu=f,""!=c);else{var i,j,k,l=function(a){return 0==a.is("li")&&(a=a.parents("li").eq(0)),a},m=function(){e.menu.find("a").removeClass("active")},n=function(b){b.siblings().each(function(b,c){a(c).find("ul").removeClass("show")})},o=function(a){a.find("ul").removeClass("show")},p=function(a){0==a.find("ul").length&&a.data("children")?(a.append("<ul></ul>"),i(a),a.find("ul").addClass("show")):a.find("ul").eq(0).addClass("show")};k=function(b){b.unbind(e.showEvent),b.bind(e.showEvent,function(b){var c=l(a(b.target));m(),e.onClick(c),c.children("a").addClass("active"),b.stopPropagation(),c.children("ul").hasClass("show")?(o(c),b.stopPropagation()):(p(c),e.autoHide&&n(c),b.stopPropagation())})},i=function(b){var c=b.data("children"),d=b.parents("ul").length;for(var f in c){var g=c[f];try{var h,i,j,l,n;if(h="",i="javascript:;",n="",g.icons){var o=g.icons;""==g.icons?o=e.defaultIcon:null,h="<i class='iconfont icon'>"+o+"</i>"}else""!=e.defaultIcon&&(h="<i class='iconfont icon'>"+e.defaultIcon+"</i>");g.url&&(i=g.url),j=g.target?"target="+g.target:"",g.id==e.checked[d]&&(n="active",m()),l="<li id = "+g.id+"><a href="+i+" "+j+" class = '"+n+"'>"+h+g.text+"</a></li>",b.find("ul").append(l);var p=a("#"+g.id);p.data("json",g),g.children&&g.children.length>0&&p.length>0&&(p.data("children",g.children),p.find("a").addClass("parent"),p.find("a").append("<i class='iconfont arrow'>"+e.childrenRightIcon+"</i>")),k(p)}catch(a){}}},j=function(b){for(var c in b){var d=b[c];try{var f,g,h,i,j;if(j="",f="",g="javascript:;",d.icons){var l=d.icons;""==d.icons?l=e.defaultIcon:null,f="<i class='iconfont icon'>"+l+"</i>"}else""!=e.defaultIcon&&(f="<i class='iconfont icon'>"+e.defaultIcon+"</i>");d.url&&(g=d.url),h=d.target?"target="+d.target:"",d.id==e.checked[0]?j="active":null,i="<li id = "+d.id+"><a href="+g+" "+h+" class = '"+j+"'>"+f+d.text+"</a></li>",e.menu.append(i);var m=a("#"+d.id);m.data("json",d),d.children&&d.children.length>0&&m.length>0&&(m.data("children",d.children),m.find("a").addClass("parent"),m.find("a").append("<i class='iconfont arrow'>"+e.childrenRightIcon+"</i>")),k(m)}catch(a){}}},showMenu=function(){if(e.checked.length>0)for(var a=0;a<e.checked.length;a++){var b=e.menu.find("#"+e.checked[a]);p(b)}e.onComplete()};var q=function(){var b;""!=e.url?andy.loaddata(e.url,function(a){a=andy.stringToJson(a),j(a),showMenu()}):""!=e.urlData?(b=andy.stringToJson(e.urlData),j(b),showMenu()):(f.find("li").each(function(b,c){k(a(c))}),showMenu())},r=function(){q()};r(),e.menu.bind(e.hideEvent,function(){})}}})}(jQuery),function(a){a.fn.extend({an_tabsheader:function(){var b={},c="",d=arguments[0];"object"==typeof d?b=d:c=d;var e=a.extend({menuId:"",url:"",urlData:"",chooseIndex:0,changeEvent:"click",onClick:function(){}},b),f=a(this);""==e.menuId&&(f=andy.setRandomId(f,"tabsheader_"),e.menuId=f.attr("id"));var g=f.attr("options");if(g){g="{"+g+"}",g=andy.stringToJson(g);for(var h in g)"true"==g[h]?e[h]=!0:"false"==g[h]?e[h]=!1:e[h]=g[h]}if(e.menu=f,""!=c);else{var i,j,k=function(a){return 0==a.is("li")&&(a=a.parents("li").eq(0)),a},l=function(b){b.siblings().each(function(b,c){a(c).removeClass("active")})};j=function(b){b.unbind(e.changeEvent),"click"!=e.changeEvent&&e.onClick(b,b.data("children")),b.bind(e.changeEvent,function(c){var d=k(a(c.target));l(d),d.addClass("active"),"click"==e.changeEvent&&e.onClick(b,b.data("children"))})},i=function(b){var c="<ul class='m-tabs-nav'></ul>";e.menu.append(c),c=e.menu.find("ul");for(var d in b){var f=b[d];try{var g="class = 'active'";d!=e.chooseIndex&&(g="");var h=f.id||e.menuId+d,i="<li "+g+" id = "+h+"><a href='javascript:void(0)'>"+f.text+"</a></li>";c.append(i);var k=a("#"+h);j(k)}catch(a){}}};var m=function(){var b;""!=e.url?andy.loaddata(e.url,function(a){a=andy.stringToJson(a),i(a)}):""!=e.urlData?(b=andy.stringToJson(e.urlData),i(b)):f.find("li").each(function(b,c){j(a(c))})},n=function(){m()};n()}}})}(jQuery),function(a){a.fn.extend({an_scrollbar:function(){var b={},c="",d=arguments[0],e=a(this);"object"==typeof d?b=d:c=d;var f=a.extend({scrollId:"",barStyle:"style01",minStep:2,overflowX:"auto",overflowY:"auto",isBarPlaceholder:!1,isFitParent:!0,autoHidden:!1,resizeHanld:null,alwaysShow:!1},b);""==f.scrollId&&(e=andy.setRandomId(e,"scroll_"),f.scrollId=e.attr("id"));var g=e.attr("options");if(g){g="{"+g+"}",g=andy.stringToJson(g);for(var h in g)"true"==g[h]?f[h]=!0:"false"==g[h]?f[h]=!1:f[h]=g[h]}if(e.data("options",f),e.showBar=function(){e.trigger("showScrollBar")},e.anchor=function(a){e.trigger("anchor",a)},""!=c)e[d]?e[d](arguments[1]):null;else{e.height();e.addClass("f-clear"),e.wrap("<div class='m-scroll "+f.barStyle+"'></div>"),e.wrap("<div class='m-scroll-left'></div>");var i=e.parent().parent(),j=e.parent(),k="<div class='m-scroll-right'><div class='scroll-ico-top'><i class='iconfont'>&#xe615;</i></div><div class='scroll-ico-con'></div><div class='scroll-ico-bottom'><i class='iconfont'>&#xe613;</i></div></div>";i.append(k);var l=j.next(),m=l.find(".scroll-ico-con"),n=l.find(".scroll-ico-top"),o="<div class='m-scroll-bottom'><div class='scroll-ico-left'><i class='iconfont'>&#xe614;</i></div><div class='scroll-ico-con'></div><div class='scroll-ico-right'><i class='iconfont'>&#xe607;</i></div></div>";i.append(o);var p=l.next(),q=p.find(".scroll-ico-con"),r=p.find(".scroll-ico-left"),s=p.find(".scroll-ico-right");"none"==r.css("display")?r.width(0):null,"none"==s.css("display")?s.width(0):null;var t=!1,u=0;"none"==n.css("display")?n.height(0):null;var v=l.find(".scroll-ico-bottom");"none"==v.css("display")?v.height(0):null;var w=!1,x=0;f.isBarPlaceholder&&j.css({
"padding-right":m.width(),"padding-bottom":q.height()}),e.showScrollBar=function(){if(f.alwaysShow||(e.height()<=i.height()?(l.hide(),e.parent().parent().unbind("mouseout mouseover"),j.css({top:0,"padding-right":0})):"auto"==f.overflowY&&(l.show(),f.autoHidden&&(e.parent().parent().mouseout(function(b){a(b.target).parents(".m-scroll")&&(l.hide(),p.hide()),b.preventDefault()}),e.parent().parent().mouseover(function(a){l.show(),e.width()>i.width()&&p.show(),a.preventDefault()}))),e.width()<=i.width()?(p.hide(),j.css({left:0,"padding-bottom":0})):"auto"==f.overflowX&&p.show(),0==l.is(":hidden")&&0==p.is(":hidden")&&0==l.hasClass("edit")&&f.isBarPlaceholder&&(l.addClass("edit"),p.addClass("edit"),l.height(l.height()-parseInt(j.css("padding-bottom"))),p.width(p.width()-parseInt(j.css("padding-right"))),j.after("<div class = 'm-scroll-bg'></div>"))),"auto"==f.overflowY){var b=parseInt(l.height()-2*v.height())*(i.height()/j.outerHeight());m.animate({height:b},100)}else l.hide();if("auto"==f.overflowX){var c=parseInt(p.width()-2*r.height())*(i.width()/j.outerWidth());q.animate({width:c},100)}else p.hide()},e.getDisHeight=function(){return l.height()-(m.height()-2*v.height())},e.moveContent=function(a){var b=l.height()-m.height()-2*v.height(),c=(j.outerHeight()-i.height())/b,d=-a*c;d<i.height()-j.outerHeight()&&(d=i.height()-j.outerHeight()),e.parent().css("top",d)},e.moveBar=function(a){if(w){var b=a.clientY-x,c=l.height()-m.height()-2*v.height();b<n.height()?b=n.height():b>c+n.height()&&(b=c+n.height()),m.css("top",b),e.moveContent(b-n.height())}},e.disMoveBottomBar=function(a){if(e.width()<i.width())return!1;var b=p.width()-q.width()-2*v.width(),c=Math.ceil(b/q.width());c>f.minStep?f.minStep=c:null;var d=parseInt(q.css("left"))-a*(b/f.minStep);d<r.width()?d=r.width():d>b+r.width()&&(d=b+r.width()),q.css({left:d}),e.moveBottomContent(d-n.width())},e.moveBottomContent=function(a){var b=p.width()-q.width()-2*r.width(),c=(j.outerWidth()-i.width())/b,d=-a*c;d<i.width()-j.outerWidth()&&(d=i.width()-j.outerWidth()),e.parent().css("left",d)},e.moveBottomBar=function(a){if(t){var b=a.clientX-u,c=p.width()-q.width()-2*r.width();b<r.width()?b=r.width():b>c+r.width()&&(b=c+r.width()),q.css("left",b),e.moveBottomContent(b-r.width())}},e.disMoveBar=function(a){if(e.height()<i.height())return!1;var b=l.height()-m.height()-2*v.height(),c=Math.ceil(b/m.height());c>f.minStep?f.minStep=c:null;var d=parseInt(m.css("top"))-a*(b/f.minStep);d<n.height()?d=n.height():d>b+n.height()&&(d=b+n.height()),m.css({top:d}),e.moveContent(d-n.height())},e.contentAnchor=function(a,b){var c=l.height()-m.height()-2*v.height(),d=-a;return!(i.height()>e.height())&&void setTimeout(function(){a+b>i.height()&&d<i.height()-e.height()&&(d=i.height()-e.height()),e.parent().css("top",d);var f=c/(e.height()-i.height())*d;m.css({top:-f})},100)},m.mousedown(function(a){return w=!0,x=a.clientY-parseInt(m.css("top")),!0}),m.parent().parent().mousemove(function(a){return e.moveBar(a),!0}),m.parent().parent().mouseout(function(a){return a.stopPropagation(),!0}),m.parent().parent().mouseup(function(a){return w=!1,!0}),m.parent().parent().mouseenter(function(a){return e.showScrollBar(),w=!1,!0}),q.mousedown(function(a){return t=!0,u=a.clientX-parseInt(q.css("left")),!0}),q.parent().parent().mousemove(function(a){return e.moveBottomBar(a),!0}),q.parent().parent().mouseout(function(a){return a.stopPropagation(),!0}),q.parent().parent().mouseup(function(a){return t=!1,!0}),q.parent().parent().mouseenter(function(a){return e.showScrollBar(),t=!1,!0}),i.on("mousewheel DOMMouseScroll",function(a){var b=a.originalEvent.wheelDelta&&(a.originalEvent.wheelDelta>0?1:-1)||a.originalEvent.detail&&(a.originalEvent.detail>0?-1:1);a.preventDefault(),b>0?e.disMoveBar(b):b<0&&e.disMoveBar(b)}),n.click(function(){e.disMoveBar(1)}),v.click(function(){e.disMoveBar(-1)}),r.click(function(){e.disMoveBottomBar(1)}),s.click(function(){e.disMoveBottomBar(-1)}),e.mousedown(function(){setTimeout(function(){e.showScrollBar()},300)}),e.bind("showScrollBar",function(){setTimeout(function(){e.showScrollBar()},100)}),e.bind("anchor",function(a,b){var c=e.find("#"+b),d=c.css("position");c.length>0&&(c.css("position","absolute"),e.contentAnchor(c[0].offsetTop,c.height()),c.css("position",d),c=[])}),a(window).resize(function(a){f.isFitParent&&(null==f.resizeHanld?f.resizeHanld=setTimeout(function(){e.showScrollBar(),f.resizeHanld=null},300):(clearTimeout(f.resizeHanld),f.resizeHanld=setTimeout(function(){e.showScrollBar(),f.resizeHanld=null},300)))}),f.alwaysShow?null:e.showScrollBar()}}})}(jQuery),function(a){a.fn.extend({an_inputcombo:function(){var b={},c="",d=arguments[0];"object"==typeof d?b=d:c=d;var e=a.extend({comboId:"",touchTargetType:"input",inputVerify:"",showTargetType:"list",inputName:"",showUrl:"",showData:[],checked:[],treeCheckBoxType:{},defaultValue:"下拉选择",treeId:"",treeSetting:{},treeAsync:{},selects:!1,isEnable:!0,isText:!1,row:0,showHeight:200,open:!1,windowAuto:!0,idvalue:"id",valuedata:"value",namevalue:"name",editor:!0,autoclear:!1,setListHtml:"",onInputChange:function(){},onChange:function(){}},b),f=a(this);if(f.is("input")){var g=f.attr("id");f.removeAttr("id",""),f.removeAttr("an-combo",""),g||(g="combo_"+andy.getRandom(1e4));var h=f.attr("style");f.removeAttr("style"),e.inputName=f.attr("name"),f.removeAttr("name");var i=f.attr("options");i="options = "+i,f.removeAttr("options","");var j="m-combo";f.attr("class")&&(j=f.attr("class"),f.attr("class","")),f.css("type","hidden");var k="<div class = '"+j+"' id = '"+g+"' style = '"+h+"' "+i+" an-combo></div>";f.before(k),f.remove(),f=a("#"+g),e.comboId=g}"an-combo"!=f.attr("an-combo")&&f.attr("an-combo","an-combo");var l=function(b,c,d){var e=b.attr("id"),f=d||1e4;return void 0==e||null==e||""==e?(e=c+andy.getRandom(f),b.attr("id",e),b=a("#"+e)):b=a("#"+e),b};""==e.comboId&&(f=l(f,"combo_"),e.comboId=f.attr("id"));var m=a(document),n=a(window),o=0,p="EVENT_ROW",q="EVENT_SET_DEFAULT",r="EVENT_GET_VALUE",s="EVENT_GET_ID",t="EVENT_SHOW",u="EVENT_ENABLE",v="EVENT_CHOOSE",w="EVENT_SET_NEW_LIST",x="EVENT_SET_NEW_TREE",y="EVENT_TREE",z="click",A=f.attr("options");if(A){A="{"+A+"}",A=andy.stringToJson(A);for(var B in A)if("onChange"==B){var C=A[B];e.onChange=function(a){var b=andy.stringToJson(C);b(a)}}else if("checked"==B){var D=A[B].split(",");e.checked=D}else"true"==A[B]?e[B]=!0:"false"==A[B]?e[B]=!1:e[B]=A[B]}if(e.combo=f,e.valueForInput=null,f.find("input").each(function(b,c){"hidden"==a(c).attr("type")&&(e.valueForInput=a(c))}),""!=c)if("row"==c){var E=arguments[1];f&&f[0]&&f.trigger(p,E)}else if("setDefault"==c){var F=arguments[1];f.trigger(q,F)}else if("setCurrentChoose"==c){var G=arguments[1],H={choose:G};f.trigger(v,H)}else if("getValue"==c){var F=arguments[1];f.trigger(r,F)}else if("getChooseId"==c){var F=arguments[1];f.trigger(s,F)}else{if("getShowTarget"==c)return andy.combo("getShowTarget",a("#"+e.comboId));if("setShowTarget"==c){var I=arguments[1];f.trigger(t,I)}else if("setList"==c){var H={listdata:arguments[1]};f.trigger(w,H)}else if("setTree"==c){var H={listdata:arguments[1]};f.trigger(x,H)}else if("addTree"==c){var J=arguments[1];f.trigger(y,J)}else if("isEnable"==c){var K=arguments[1];f.trigger(u,K)}}else{6==andy.IE()&&f.find("ul").each(function(b,c){var d=a(c);d.prev().is("div")||d.before("<div></div>")});var L=function(){var a=!1;return m.height()>n.innerHeight()&&(a=!0),a},M=function(){f.showTarget.children().length>e.row&&0!=e.row?(f.showTarget.addClass("u-overflow-y"),o=e.row*f.showTarget.children().outerHeight(),f.showTarget.height(o)):(f.showTarget.removeClass("u-overflow-y"),o=0,f.showTarget.css("height",""))},N=function(a){a<f.showTarget.height()&&(f.showTarget.addClass("u-overflow-y"),f.showTarget.outerHeight(a))},O=function(a,b){var c=a.offset(),d=c.left,g=c.top,h=m.width(),i=(m.height(),m.scrollTop()),j=b.outerWidth();M();var k=b.height(),l=0;L()&&(l=17),h-d-l>=j?b.css({left:"0px",right:"auto"}):b.css({left:"auto",right:"0px"});var o=f.touchTarget.outerHeight(),p=n.height()-(g-i),q=n.height()-p-o;e.windowAuto?p>=q?(b.css("top",o+"px"),N(p-o)):(N(n.height()-p),k=f.showTarget.outerHeight(),b.css("top",-k+"px")):(b.css("top",o+"px"),N(p-o))},I=function(a,b){var c=a.offset(),d=c.left,g=c.top,h=m.width(),i=(m.height(),m.scrollTop()),j=b.outerWidth(),k=b.height(),l=0;L()&&(l=17),h-d-l>=j?b.css({left:"0px",right:"auto"}):b.css({left:"auto",right:"0px"});var o=f.touchTarget.outerHeight(),p=n.height()-(g-i),q=n.height()-p-o;e.windowAuto?p>=q?(b.css("top",o+"px"),N(p-o)):(N(n.height()-p),k=f.showTarget.outerHeight(),b.css("top",-k+"px")):(b.css("top",o+"px"),N(p-o))},P=function(b,c){c&&f.showTarget.empty(),b instanceof jQuery?f.showTarget.replaceWith(b):f.showTarget.replaceWith(a(b)),andy.combo({combo:f,showEvent:z,showComplete:function(){"list"==e.showTargetType?O(f,f.showTarget):b(f,f.showTarget)}}),e.showData=[],f.an_inputcombo_bindEvent(e)},Q=function(){if(f){var a=f.touchTarget;0==a.is("input")&&(a=a.find("input")),1==f.data("isEnable")?(a.removeAttr("disabled"),f.removeClass("u-disabled")):(a.attr("disabled","disabled"),f.addClass("u-disabled"))}},R=function(a,b,c){a.data("selects",e.selects),a.data("isEnable",e.isEnable),a.data("isText",e.isText),a.an_inputcombo_creatTouch(e),a.an_inputcombo_creatShow(e),""!=e.inputName&&void 0!=e.inputName||(e.inputName=e.comboId+"_input"),null==e.valueForInput&&(a.append("<input type = 'hidden' name = '"+e.inputName+"'>"),e.valueForInput=a.find("input:hidden"))};if(0==f.children().length)R(f,e.touchTargetType,e.showTargetType),0==e.editor?f.find(".u-input:first").addClass("u-diseditor"):(f.find(".u-input:first").attr("readonly",null),f.find(".u-input:first").removeClass("u-diseditor"));else{andy.combo("getTouchTarget",f);R(f,e.touchTargetType,e.showTargetType),0==e.editor?f.find(".u-input:first").addClass("u-diseditor"):f.find(".u-input:first").attr("readonly",null)}andy.combo({combo:f,showEvent:z,showComplete:function(){f.css("z-index",99999),f.showTarget.css("z-index",99999),"list"==e.showTargetType?O(f,f.showTarget):I(f,f.showTarget)},hiddenComplete:function(){f.css("z-index",""),f.showTarget.css("z-index","")}}),Q(),e.valueForInput=f.touchTarget,0==e.valueForInput.is("input")&&e.valueForInput.find("input").each(function(b,c){e.valueForInput=a(c)}),""==e.inputName&&void 0==e.valueForInput.attr("name")?e.valueForInput.attr("name",e.comboId+"_value"):void 0==e.valueForInput.attr("name")&&e.valueForInput.attr("name",e.comboId+"_value"),f.bind(p,function(a,b){e.row=b}),f.bind(w,function(a,b){var c=(f.an_inputcombo_getList(e,b.listdata),f.showTarget);c.empty(),e.showData=b.listdata,f.an_inputcombo_bindEvent(e)}),f.bind(x,function(a,b){var c=f.showTarget;c.empty(),andy.combo({combo:f,showEvent:z,showComplete:function(){I(f,f.showTarget)}}),e.showData=b.listdata,f.an_inputcombo_bindEvent(e)}),f.bind(t,function(a,b){P(b,!0)}),f.bind(y,function(a,b){}),f.showTarget.is("ul"),f.bind(q,function(b,c){var d=f.find("input:hidden"),g=f.touchTarget,h="",i="",j="";0==g.is("input")&&(g=f.find("input:first")),f.showTarget.is("ul")&&f.showTarget.children().each(function(b,c){var d=a(c);if(d.hasClass("active")&&d.removeClass("active"),e.checked.length>0)for(var f in e.checked)d.attr("listId")==e.checked[f]&&(d.addClass("active"),""==j?(h=d.text(),i=d.attr("value"),j=d.attr("listId")):(h+=","+d.text(),i=d.attr("value"),j+=","+d.attr("listId")))}),d.is("input")&&(e.checked.length>0?(d.attr({value:h,idValue:j,valueData:i}),d.val(h),g.attr("value",h),g.val(h)):(d.attr({value:e.defaultValue,idValue:"",valueData:""}),d.val(e.defaultValue),g.attr("value",e.defaultValue),g.val(e.defaultValue))),c&&c(i,j)}),f.bind(u,function(a,b){f.data("isEnable",b),Q()}),f.an_inputcombo_creatShow("eventBind",e),f.bind(v,function(a,b){})}},an_inputcombo_creatTouch:function(){for(var b={},c="",d=0;d<arguments.length;d++){var e=arguments[0];"object"==typeof e?b=e:"string"==typeof e&&(c=e)}var f=a.extend({combo:"",comboName:"combo",inputVerify:"",checked:"",selects:!1,defaultValue:"下拉选择",touchTargetType:""},b),g="EVENT_ADD_CHOOSE",h="EVENT_CANCEL_CHOOSE",i="EVENT_GET_VALUE",j="EVENT_GET_ID",k=a(this).attr("id"),l=a("#"+k),m="",n="";if(void 0!=l.data("selects")&&(f.selects=l.data("selects")),""!=c){if("addChoose"==c){var o=arguments[1];l.trigger(g,o)}else if("cancelChoose"==c){var o=arguments[1];l.trigger(h,o)}else if("getValue"==c){var p=arguments[1];l.trigger(i,p)}}else{var q=function(a){n.addElement(a)},r=function(a){n.deleteElement(a)},s=function(b){var c=a("#"+k),d=andy.combo("getTouchTarget",c),e=d.parent().find("p"),g=f.valueForInput;0==g.is("input")&&g.find("input").each(function(b,c){g=a(c)});var h=e.attr("value"),i=g.attr("idValue");b.attr&&"string"!=typeof b.attr&&(b.attr="");var j=g.attr("valueData");if(void 0==h||""==h||h==f.defaultValue)h=b.name,i=b.id,j=b.value||b.attrValue||b.attr;else{h=h+"，"+b.name,i=i+","+b.id;var l=b.value||b.attrValue||b.attr;j=j+","+l}0==f.selects?(g.attr({idValue:b.id,valueData:b.value||b.attrValue||b.attr}),e.text(b.name)):(g.attr({idValue:i,valueData:j}),e.text(h)),g.attr("verify")},t=function(b){var c=a("#"+k);null==f.valueForInput&&0==c.find("input").length&&(c.append("<input type = 'hidden' name = '"+f.inputName+"'>"),f.valueForInput=c.find("input"));var d=f.valueForInput;if(0==d.is("input")&&d.find("input").each(function(b,c){d=a(c)}),d&&d.is("input")){var e=d.attr("idValue");if(void 0!=e&&""!=e){for(var g=e.split(","),h=!1,i=0;i<g.length;i++)g[i]==b.id&&(h=!0);h||s(b)}else s(b)}},u=function(a){for(var b="",c=0;c<a.length-1;c++)b+=a[c].name+"-";return b},v=function(b){var c=a("#"+k),d=andy.combo("getTouchTarget",c),e=c.find("input:hidden");0==d.is("input")&&d.find("input:first");var g=d.attr("value"),h=e.attr("idValue");b.attr&&"string"!=typeof b.attr&&(b.attr="");var i=e.attr("valueData"),j="";if(b.getParentNode&&0==f.selects?j=u(b.getPath()):b.path&&0==f.selects&&(j=u(b.path)),void 0==g||""==g||g==f.defaultValue)g=j+b.name,h=b.id,i=b.value||b.attrValue||b.attr;else{g=g+"，"+j+b.name,h=h+","+b.id;var l=b.value||b.attrValue||b.attr;i=i+","+l}0==f.selects?(e.attr({value:b.id,idValue:b.id,valueData:b.value||b.attrValue||b.attr}),e.val(b.id),d.attr("value",j+b.name),d.val(j+b.name)):(e.attr({value:h,idValue:h,valueData:i}),e.val(h),d.attr({value:g}),d.val(g)),e.attr("verify")&&andy.inputCheck(e[0])},w=function(b){var c=andy.combo("getTouchTarget",a("#"+k));if(0==c.is("input")&&c.find("input").each(function(b,d){c=a(d)}),c&&c.is("input")){var d=c.attr("idValue");if(void 0!=d&&""!=d){for(var e=d.split(","),f=!1,g=0;g<e.length;g++)e[g]==b.id&&(f=!0);f||v(b)}else v(b)}},x=function(b){var c=a("#"+k).find("input:hidden"),d=andy.combo("getTouchTarget",a("#"+k));if(0==d.is("input")&&d.find("input:first"),c&&c.is("input")){for(var e=d.attr("value"),f=c.attr("idValue"),g=c.attr("valueData"),h=e.split("，"),i=f.split(","),j=g.split(","),l=0;l<i.length;l++)i[l]==b.id&&(i.splice(l,1),h.splice(l,1),j.splice(l,1));c.attr("value",""),c.attr("idValue",""),c.attr("valueData","");for(var e=d.attr("value"),f=c.attr("idValue"),g=c.attr("valueData"),l=0;l<i.length;l++){var m=h[l],n=i[l],o=j[l];0==l?(e=m,f=n,g=o):(e=e+"，"+m,f=f+","+n,g=g+","+o)}d.attr("value",e),d.val(e),c.val(f),c.attr("value",f),c.attr("idValue",f),c.attr("valueData",g)}},y=function(a){"input"==f.touchTargetType?w(a):"button"==f.touchTargetType?t(a):"selects"==f.touchTargetType&&q(a)},z=function(a){"input"==f.touchTargetType?x(a):"button"==f.touchTargetType?removeSetButton(a):"selects"==f.touchTargetType&&r(a)};if("input"==f.touchTargetType){if(0==f.combo.children().length){var A="";0==f.combo.data("isEnable")&&(A="disabled"),f.checked.length>0&&(f.defaultValue=""),f.combo.append("<div class='u-group u-up-menu'><input class = 'item item-l u-input u-diseditor' readonly='readonly' verify = '"+f.inputVerify+"' value = '"+f.defaultValue+"' "+A+" combo = '"+f.comboName+"'><i class='iconfont mark item item-r'>&#xe613;</i></div>"),andy.formlayout()}}else if("button"==f.touchTargetType){if(0==f.combo.children().length){var A="";0==f.combo.data("isEnable")&&(A="disabled"),f.checked.length>0&&(f.defaultValue=""),f.combo.append("<span class='u-but-group u-group-center'><p style='color:#000'>"+f.defaultValue+"</p><i class='iconfont'>&#xe613;</i><button type='button' class='u-but-button' combo = '"+f.comboName+"'></button></span>"),f.combo.toggleClass("u-btn-eject u-group-center"),andy.formlayout()}}else if("selects"==f.touchTargetType){m=k+"_selects",0==f.combo.children().length&&f.combo.append("<div class='u-btn-eject' style='width:100%;' combo = '"+f.comboName+"'><div class='u-btn-checkbox f-clear' id="+m+"></div></div>");var B=f.inputName;(B="")&&(B=k+"_input"),n=andy.multiSelect({parent:document.getElementById(m),dataKey:B,list:[]})}var C=andy.combo("getTouchTarget",a("#"+k));0==C.is("input")&&(C=C.find("input:first")),C.keyup(function(){var a=C.val();f.onInputChange(a),C.attr("value",a);var b=l.find("input:hidden");b.val(a),b.attr("value",a)}),C.blur(function(){if(f.autoclear){C.attr("value",null),C.val(null);var a=l.find("input:hidden");a.val(null),a.attr("value",null)}}),C.mouseup(function(){this.select()}),l.bind(g,function(a,b){y(b)}),l.bind(h,function(a,b){z(b)}),l.bind(i,function(b,c){var d=andy.combo("getTouchTarget",a("#"+k));if(d){var e=d.attr("valueData");c(e)}}),l.bind(j,function(b,c){var d=andy.combo("getTouchTarget",a("#"+k));if(0==d.is("input")&&d.find("input").each(function(b,c){d=a(c)}),d){var e=d.attr("idvalue");c(e)}})}},an_inputcombo_creatShow:function(){for(var b={},c="",d=0;d<arguments.length;d++){var e=arguments[0];"object"==typeof e?b=e:"string"==typeof e&&(c=e)}var f=a.extend({combo:"",comboName:"combo",showTargetType:""},b),g="EVENT_BIND";if(""!=c){if("eventBind"==c){var h=arguments[1];a(this).trigger(g,h)}}else"list"==f.showTargetType?1==f.combo.children().length&&f.combo.append("<ul class = 'combo u-down-menu' combo = '"+f.comboName+"'></ul>"):"tree"==f.showTargetType&&1==f.combo.children().length&&f.combo.append("<div class='combo but-tree' style='height:"+f.showHeight+"px;' combo ='"+f.comboName+"'></div>"),f.combo.bind(g,function(a,b){f.combo.an_inputcombo_bindEvent(b)})},an_inputcombo_getList:function(a,b){var c="";if(0==b.length)return c;for(var d=0;d<b.length;d++){var e=b[d],f="",g="",h="",i="";0==d&&(f="first"),e[a.valuedata]?g="value = "+e[a.valuedata]:e.attrValue?i="attrValue = "+e.attrValue:e.attr&&(h="attrStr = "+e.attr);var j="<li class = '"+f+"' "+g+" "+h+" "+i+" listId = '"+e[a.idvalue]+"' ><a>"+e[a.namevalue]+"</a></li>";""!=a.setListHtml&&(j=a.setListHtml(e).html),c+=j}return c},an_inputcombo_bindEvent:function(){for(var b={},c="",d=0;d<arguments.length;d++){var e=arguments[0];"object"==typeof e?b=e:"string"==typeof e&&(c=e)}var f=a.extend({combo:"",selects:!1,checked:[],treeId:"",onChange:function(){},touchTargetType:"input",showTargetType:"list",showUrl:""},b),g=(f.combo.touchTarget,f.combo.showTarget);if(void 0!=a(this).data("selects")&&(f.selects=a(this).data("selects")),""!=c);else{var h=function(b,c){var d=f.combo;c&&d.showTarget.empty(),b instanceof jQuery?d.showTarget=b:d.showTarget=a(b)},i=function(a){a.checked?f.combo.an_inputcombo_creatTouch("addChoose",a):f.combo.an_inputcombo_creatTouch("cancelChoose",a)},j=function(a,b){if(a&&b&&a.checked)if(a.children&&f.selects){f.combo.an_inputcombo_creatTouch("addChoose",a);for(var c=0;c<a.children.length;c++)j(a.children[c],b)}else f.combo.an_inputcombo_creatTouch("addChoose",a);else if(!b)if(a.children){f.combo.an_inputcombo_creatTouch("cancelChoose",a);for(var c=0;c<a.children.length;c++)j(a.children[c],b)}else f.combo.an_inputcombo_creatTouch("cancelChoose",a)},k=function(a){a&&j(a,a.checked)},l=function(b,c){if(!c)return!1;for(var d=a.fn.zTree.getZTreeObj(b),e=0;e<c.length;e++){var g=d.getNodeByParam("id",c[e],null);if(g){d.checkNode(g,!0,!0);var h={path:g.getPath(),children:g.children,value:g[f.valuedata],attr:g.attr||"",name:g[f.namevalue],children:g.children,checked:g.checked,id:g[f.idvalue]};k(h)}}},m=function(a){var b={checked:a.hasClass("active"),value:a.attr("value"),id:a.attr("listId"),name:a.text()};return b},n=function(){var b=f.checked.length;g.children().each(function(c,d){var e=a(d);if(e.attr("listId")||e.attr("listId",f.combo.attr("id")+"_"+c),b>0)for(var h=0;h<b;h++)if(e.attr("listId")==String(f.checked[h])){e.addClass("active");var j=m(e);i(j)}e.unbind("click"),e.on("click",function(b){var c=a(b.target);0==c.is("li")&&(c=c.closest("li")),f.selects||g.children().each(function(b,c){a(c).removeClass("active")}),c.toggleClass("active");var d=m(c);e.comboData=d,i(d),a("#"+f.comboId).trigger(andy.COMBO_CHOOSE_LISET,e),f.onChange(e),0==f.selects&&andy.combo("hiddenTarget",f.combo)})})},o=function(b,c,d,e){var g=b;f.selects=e.selects;var i=e.checked,j=f.combo,m={treeObj:null,callback:{onCheck:function(a,b,c){var d={path:c.getPath(),children:c.children,value:c[f.valuedata],attr:c.attr||"",name:c[f.namevalue],children:c.children,checked:c.checked,id:c[f.idvalue]};k(d),f.onChange(c)}},check:{enable:!0,autoCheckTrigger:!0,chkStyle:"checkbox",chkboxType:{Y:"s",N:"s"}},data:{key:{name:f.namevalue},simpleData:{enable:!0,idKey:f.idvalue}}};f.treeCheckBoxType!={}&&(m.check.chkboxType=f.treeCheckBoxType),f.treeAsync!={}&&(m.async=f.treeAsync),0==f.selects&&(m.check={enable:!0,radioType:"all",chkStyle:"radio"}),c&&(m=a.extend(!0,{},m,c)),j.showTarget.append("<div class='g-h-max'><ul id='"+g+"' class='ztree'></ul></div>");var n="";d?(a.fn.zTree.init(a("#"+g),m,d),n=a("#"+g),l(g,i),h(j.showTarget)):e&&e.url&&andy.loaddata(e.url,function(b){b=andy.stringToJson(b),a.fn.zTree.init(a("#"+g),m,b),n=a("#"+g),l(g,i),h(j.showTarget)})},p=function(a){if("list"==f.showTargetType){var b=f.combo.an_inputcombo_getList(f,a);g.append(b),n()}else"tree"==f.showTargetType&&(""==f.treeId&&(f.treeId="treeId_"+andy.getRandom(1e4)),o(f.treeId,f.treeSetting,a,f))};if(null==f.showUrl||""==f.showUrl&&0==f.showData.length)return"list"==f.showTargetType&&n(),!1;f.showData.length>0?("string"==typeof f.showData&&(f.showData=andy.stringToJson(f.showData)),p(f.showData)):""!=f.showUrl?andy.loaddata(f.showUrl,function(a){a=andy.stringToJson(a),a.length>0&&p(a)}):"list"==f.showTargetType&&n(),f.combo.bind("EVENT_CHOOSE",function(b,c){g.children().each(function(b,d){for(var e=a(d),h=0;h<c.choose.length;h++)if(parseInt(e.attr("listId"))==c.choose[h]){f.selects||g.children().each(function(b,c){a(c).removeClass("active")}),e.addClass("active");var j=m(e);i(j)}})})}}})}(jQuery),function(a){a.fn.extend({an_path:function(){function b(b){for(var c="",d=0;d<b.length;d++){var e,f,g,j,k=b[d];g=0==d?"home":"",j=d==b.length-1?" active":"",f=k.url&&""!=k.url&&0==h.disableA?k.url:"javascript:;",spliteIcon="<i class = 'iconfont'>"+h.spliteIcon+"</i>",icons=k.icons&&""!=k.icon?"<i class = 'iconfont homeicon'>"+k.icons+"</i>":"",e=k.target&&""!=k.target?"target="+k.target:"",c+="<li liId = "+k.id+" class = "+g+j+" ><a href ="+f+" target = "+e+">"+icons+k.text+spliteIcon+"</a></li>"}i.append(c),i.find("li").each(function(c,d){var e=a(d);e.data("json",b[c]),e.click(function(b){h.onClick(a(this).data("json")),b.preventDefault()})})}function c(){""!=h.url?andy.loadData(h.url,function(a){b(a)}):b(data)}function d(){c()}var e={},f="",g=arguments[0];"object"==typeof g?e=g:f=g;var h=a.extend({url:"",data:"",disableA:!1,spliteIcon:"&#xe600",onClick:function(){}},e),i=a(this),j="EVENT_RESET",k=i.attr("options");if(k){k="{"+k+"}",k=andy.stringToJson(k);for(var l in k)"true"==k[l]?h[l]=!0:"false"==k[l]?h[l]=!1:h[l]=k[l]}if(""!=f){if("reset"==f){var m={data:arguments[1]};i.trigger(j,m)}}else d(),i.bind(j,function(a,c){i.empty(),b(c.data)})}})}(jQuery),function(a){a.fn.extend({an_scrolltabs:function(){var b={},c="",d=arguments[0],e=a(this);"object"==typeof d?b=d:c=d;var f=a.extend({scrollId:"",minStep:2,stepWidth:0,isContentMove:!1,isAnimation:!0,animationTime:300,isBarPlaceholder:!1,isFitParent:!0,autoHidden:!1,resizeHanld:null,alwaysShow:!1},b);""==f.scrollId&&(e=andy.setRandomId(e,"scrolltabs_"),f.scrollId=e.attr("id"));var g=e.attr("options");if(g){g="{"+g+"}",g=andy.stringToJson(g);for(var h in g)"true"==g[h]?f[h]=!0:"false"==g[h]?f[h]=!1:f[h]=g[h]}if(e.data("options",f),""!=c)e[d]?e[d](arguments[1]):null;else{var i=(e.parent().innerWidth(),e.parent().innerHeight());e.wrap("<div class='m-scrolltabs'></div>"),e.wrap("<div class='scrolltabs-con f-clear'></div>"),e.css({position:"absolute",left:0});var j=e.parent().parent(),k=e.parent(),l="<div class='iconfont left-bar'>&#xe610;</div>";j.append(l),l=j.find(".left-bar");var m="<div class='iconfont right-bar'>&#xe7be;</div>";j.append(m),m=j.find(".right-bar"),f.width&&f.width>0&&j.outerWidth(f.width),f.height&&f.height>0?j.outerHeight(f.height):j.outerHeight(i),0==f.isBarPlaceholder?j.addClass("m-scrolltabs-cover"):f.width&&f.width>0&&j.outerWidth(j.outerWidth()-2*l.outerWidth()),f.autoHidden&&(l.hide(),m.hide()),e.setWidth=function(){var b=e.getChildren(),c=0;b.each(function(b,d){c+=a(d).outerWidth()}),e.innerWidth(c),e.css("display","block")},e.getChildren=function(){var a;return k.children().length>1?a=k.children():k.children().children().length>1&&(a=k.children().children()),a},e.getDis=function(b){var c,d=0,f=0,g=parseInt(e.css("left"));return c=e.getChildren(),f=b<0?g<0?-g+k.width():g+k.width():g<0?-g:g,c.each(function(c,e){if(d<=f&&(d+=a(e).outerWidth(),d>f))return b<0?d-=f:d=a(e).outerWidth()==d-f?a(e).outerWidth():a(e).outerWidth()-(d-f),!1}),d},e.disMoveBar=function(a){if(e.width()<j.width())return l.hide(),m.hide(),!1;l.show(),m.show();var b=e.outerWidth()-k.width(),c=Math.ceil(b/k.width());c>f.minStep?f.minStep=c:null;var d=f.stepWidth>0?f.stepWidth:b/c;f.isContentMove&&(d=e.getDis(a));var g=parseInt(e.css("left"))+a*d;g<-b?g=-b:g>0&&(g=0),f.isAnimation?e.animate({left:g},f.animationTime):e.css("left",g)},e.isShow=function(){return!(e.width()<j.width())&&void(f.autoHidden&&(l.show(),m.show()))},l.click(function(){e.disMoveBar(1)}),m.click(function(){e.disMoveBar(-1)}),j.mouseover(function(){e.isShow()}),j.mouseout(function(){f.autoHidden&&(l.hide(),m.hide())}),j.mouseenter(function(){e.isShow()}),e.setWidth(),a(window).resize(function(a){f.isFitParent&&(null==f.resizeHanld?f.resizeHanld=setTimeout(function(){e.disMoveBar(),f.resizeHanld=null},300):(clearTimeout(f.resizeHanld),f.resizeHanld=setTimeout(function(){e.disMoveBar(),f.resizeHanld=null},300)))})}}})}(jQuery);